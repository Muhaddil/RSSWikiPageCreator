import{u as E,d as X,I as Q,e as Y,E as A,f as ee,b as j,S as le}from"./main-DRLOz5So.js";import{s as U}from"./pinia-DWbtGVIA.js";import{f as z,c as m,b as o,R as S,d as a,S as $,G as F,y as t,a3 as te,a4 as se,r as _,v as M,P as f,L as g,V as ae,F as k,K as V,O as ie,N as O,M as L,E as oe,J as B,X as G,i as ne}from"./@vue-mPvUAMx_.js";import{q as re,e as Z,r as T,k as H,s as R}from"./primevue-D6uD4tpJ.js";import{e as ue,w as de,g as J,d as q}from"./@vueuse-ju9LKoy1.js";import{d as pe}from"./debounce-B7UkYTDg.js";import{l as ce}from"./vue-draggable-plus-Bejfw292.js";const Oe="Royal Space Society",Te=z({__name:"GalleryOutput",props:{fileList:{}},setup(e){const l=E(),{galleryFiles:i}=U(l);return(e,l)=>(o(),m(S,null,[l[0]||(l[0]=a("div",null,"<gallery>",-1)),(o(!0),m(S,null,$(e.fileList??t(i),(e=>(o(),m("div",{key:e.id},F(e.file.name)+F(e.desc?"|":"")+F(e.desc),1)))),128)),l[1]||(l[1]=a("div",null,"</gallery>",-1))],64))}}),D=1e7,me={class:"is-flex is-justify-content-space-between is-align-items-center full-width"},fe=["for"],ve=200,ge=z({__name:"SingleFileUpload",props:te({label:{},tooltip:{},helpImg:{},helpTitle:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(e){const l=se(e,"modelValue"),i=_(!1),s=_(!0),n=M((()=>i.value||!s.value));function u(e){const l=e.files[0];l instanceof File&&r([l])}function r(e){const a=null==e?void 0:e[0];if(!a)return;const t=a.size>D;if(i.value=t,t)return;const s=a.name;l.value=s}ue(document,"reset",(()=>i.value=!1)),de(l,(e=>s.value=!e||e.includes(".")),{debounce:pe});const c=X("file-upload-"),d=_(null),p=_(null),v=_(),{isOverDropZone:h}=J(d,{onDrop:r,dataTypes:e=>e.every((e=>e.startsWith("image/"))),multiple:!1,preventDefaultForUnhandled:!0}),{height:y}=q(v),b=M((()=>y.value/2)),{width:x}=q(p),S=M((()=>x.value<=ve));return(e,r)=>(o(),m("div",{ref_key:"dropzone",ref:d},[f(Q,null,{label:g((()=>[a("div",me,[a("label",{for:t(c)},F(e.label),9,fe),e.tooltip?(o(),V(ee,{key:0,"help-img":e.helpImg,"help-title":e.helpTitle,tooltip:e.tooltip},{default:g((()=>[oe(e.$slots,"default",{},void 0,!0)])),_:3},8,["help-img","help-title","tooltip"])):L("",!0)])])),input:g((()=>[a("div",{ref_key:"inputWrapper",ref:p},[f(Y,{invalid:n.value,top:`${b.value}px`,"move-left":S.value?void 0:"5.5rem"},ae({default:g((()=>[(o(),V(ie(S.value?"div":t(re)),{class:O({"is-flex is-flex-direction-column is-gap-1":S.value})},{default:g((()=>[f(t(Z),{modelValue:l.value,"onUpdate:modelValue":r[0]||(r[0]=e=>l.value=e),id:t(c),invalid:n.value,ref_key:"textInput",ref:v,size:"small"},null,8,["modelValue","id","invalid"]),f(t(T),{class:O([{"p-button-outlined":!t(h)},"p-button-sm upload-button"]),accept:"image/*",mode:"basic",auto:"","custom-upload":"",chooseLabel:"Elegir",onSelect:u},null,8,["class"])])),_:1},8,["class"]))])),_:2},[i.value?{name:"errorMessage",fn:g((()=>[r[1]||(r[1]=k(" Este archivo es demasiado grande para subirlo a la wiki. El tamaño máximo es de 10 MB. Comprime tu archivo aquí: ")),f(A,{link:"https://nmscd.com/Image-Compressor/",text:"Compresor de imágenes"})])),key:"0"}:s.value?void 0:{name:"errorMessage",fn:g((()=>[r[2]||(r[2]=k("¡El archivo no tiene extensión de archivo (es decir, .jpg, .png)!"))])),key:"1"}]),1032,["invalid","top","move-left"])],512)])),_:3})],512))}}),je=j(ge,[["__scopeId","data-v-55613b7e"]]),ye={class:"gallery-wrapper is-flex full-width"},he=["href"],be=["alt","src"],xe={class:"input-section is-flex is-flex-direction-column is-flex-grow-1 is-gap-1 p-2"},_e={style:{"word-break":"break-all"}},ke={class:"is-flex is-flex-direction-column is-justify-content-space-between is-align-items-center is-gap-1 p-2 ml-auto"},Se={class:"handle pi pi-arrows-v",title:"Mover la imagen hacia arriba o hacia abajo",draggable:"true"},Fe={class:"button-wrapper is-flex-direction-column is-gap-1"},we=z({__name:"GalleryItem",props:{fileItem:{},isLocationFile:{type:Boolean}},setup(e){const l=e,i=E(),{galleryFiles:s,locationFiles:n,galleryDescriptions:u}=U(i),r=URL.createObjectURL(l.fileItem.file);const c=["up","down"];return(e,l)=>(o(),V(t(H),{class:"gallery-item"},{default:g((()=>[a("div",ye,[a("a",{class:"gallery-media is-flex is-unselectable is-justify-content-center",href:t(r),target:"_blank",rel:"noopener noreferrer"},[a("img",{alt:e.fileItem.file.name,src:t(r),class:"mx-auto"},null,8,be)],8,he),a("div",xe,[a("p",_e,[l[3]||(l[3]=a("span",{class:"has-text-weight-bold"},"Nombre: ",-1)),k(F(e.fileItem.file.name),1)]),B(a("div",null,[f(le,{modelValue:e.fileItem.desc,"onUpdate:modelValue":l[0]||(l[0]=l=>e.fileItem.desc=l),options:t(u)},null,8,["modelValue","options"])],512),[[G,t(u).length]]),a("div",null,[f(t(Z),{modelValue:e.fileItem.desc,"onUpdate:modelValue":l[1]||(l[1]=l=>e.fileItem.desc=l),placeholder:"Descripción",size:"small"},null,8,["modelValue"])])]),a("div",ke,[f(t(R),{class:"delete-icon is-clickable",severity:"danger",title:"Eliminar imagen de la galería",onClick:l[2]||(l[2]=l=>function(e){s.value=s.value.filter((l=>l!==e)),n.value=n.value.filter((l=>l!==e))}(e.fileItem))},{default:g((()=>l[4]||(l[4]=[k(" ❌ ")]))),_:1,__:[4]}),B(a("span",Se,null,512),[[G,!e.isLocationFile]]),a("div",Fe,[(o(),m(S,null,$(c,(l=>B(f(t(R),{icon:`pi pi-sort-${l}-fill`,title:`Mover ${l}`,severity:"secondary",outlined:"",onClick:a=>function(e,l){const a=s.value.indexOf(e),i=n.value.indexOf(e),t=(()=>{if(-1!==a)return s;if(-1!==i)return n;throw new Error("Couldn't find item!")})(),o=t.value.indexOf(e);if("up"===l&&o)t.value.splice(o-1,0,e),t.value.splice(o+1,1);else if("down"===l&&o!==t.value.length-1){const l=t.value.filter((l=>l!==e));l.splice(o+1,0,e),t.value=l}}(e.fileItem,l)},null,8,["icon","title","onClick"]),[[G,!e.isLocationFile]]))),64))])])])])),_:1}))}}),W=j(we,[["__scopeId","data-v-3654535c"]]),Ie={key:0,class:"is-flex is-flex-direction-column is-gap-1"},Ve=z({__name:"GalleryPreview",setup(e){const l=E(),{galleryFiles:i,locationFiles:s}=U(l),n=_(!1);return(e,l)=>t(i).length?(o(),V(t(H),{key:0,collapsed:n.value,"onUpdate:collapsed":l[1]||(l[1]=e=>n.value=e),header:"Vistra Previa",toggleable:""},{default:g((()=>[f(t(ce),{modelValue:t(i),"onUpdate:modelValue":l[0]||(l[0]=e=>ne(i)?i.value=e:null),animation:250,class:"is-flex is-flex-direction-column is-gap-1",handle:".handle"},{default:g((()=>[(o(!0),m(S,null,$(t(i),(e=>(o(),V(W,{"file-item":e,key:e.id,"is-location-file":!1},null,8,["file-item"])))),128))])),_:1},8,["modelValue"]),t(s).length?(o(),m("div",Ie,[l[2]||(l[2]=a("p",{class:"has-text-weight-bold is-block mb-1"},"Location Files",-1)),(o(!0),m(S,null,$(t(s),(e=>(o(),V(W,{"file-item":e,key:e.id,"is-location-file":!0},null,8,["file-item"])))),128))])):L("",!0)])),_:1},8,["collapsed"])):L("",!0)}}),De={class:"is-flex is-flex-direction-column is-gap-2 mt-5"},$e={key:0,class:"error-message"},ze=z({__name:"GalleryInput",setup(e){const l=E(),{galleryFiles:i}=U(l),s=_([]);let n=0;function u(e){const l=e.files;if(!Array.isArray(l))return;s.value=[];const a=l.filter((e=>e instanceof File&&(!(e.size>D)||(s.value.push(e.name),!1)))).map((e=>({file:e,id:n++,desc:""})));a.length&&i.value.unshift(...a)}const r=_(null),{isOverDropZone:c}=J(r,{onDrop:function(e){if(!e)return;s.value=[];const l=e.filter((e=>!(e.size>D)||(s.value.push(e.name),!1))).map((e=>({file:e,id:n++,desc:""})));l.length&&i.value.unshift(...l)},dataTypes:e=>e.every((e=>e.startsWith("image/"))),multiple:!0,preventDefaultForUnhandled:!0});return(e,l)=>(o(),m("div",De,[s.value.length?(o(),m("p",$e,[1===s.value.length?(o(),m(S,{key:0},[l[0]||(l[0]=k(" El archivo ")),a("strong",null,F(s.value[0]),1),l[1]||(l[1]=k(" es demasiado grande para subirlo (máx. 10MB). "))],64)):(o(),m(S,{key:1},[l[2]||(l[2]=k(" Los siguientes archivos son demasiado grandes para subirlos (máx. 10MB): ")),a("ul",null,[(o(!0),m(S,null,$(s.value,(e=>(o(),m("li",{key:e},F(e),1)))),128))])],64)),l[3]||(l[3]=k(" Comprime tu archivo aquí: ")),f(A,{link:"https://nmscd.com/Image-Compressor/",text:"Compresor de imágenes"})])):L("",!0),f(t(T),{maxFileSize:t(D),"show-cancel-button":!1,"show-upload-button":!1,accept:"image/*",auto:"","custom-upload":"",multiple:"",onSelect:u},{header:g((()=>[a("div",{class:"full-width",ref_key:"dropzone",ref:r},[f(t(T),{class:O({"p-button-outlined":!t(c)}),maxFileSize:t(D),accept:"image/*","choose-label":"Añadir archivos",auto:"","custom-upload":"",mode:"basic",multiple:"",onSelect:u},null,8,["class","maxFileSize"])],512)])),empty:g((()=>l[4]||(l[4]=[a("div",{class:"is-flex is-justify-content-center is-align-items-center my-5"},[a("p",null,"Suelte los archivos de la galería aquí")],-1)]))),_:1},8,["maxFileSize"]),f(Ve)]))}}),Ne=j(ze,[["__scopeId","data-v-73de13bb"]]);export{Ne as G,je as S,Te as _,Oe as c};
