import{J as e,P as t,W as n,at as r,dt as i,et as a,f as o,h as s,ht as c,i as l,p as u,q as d,v as f,x as p,y as m}from"./runtime-dom.esm-bundler-DokFv1WN.js";import{t as h}from"./button-eiEoyAAE.js";import{f as g,s as _,t as v}from"./SanitisedTextInput-B8scvA3I.js";import"./baseinput-BFbMRtx5.js";import{t as y}from"./_plugin-vue_export-helper-D6098ZHW.js";import{r as b,t as x}from"./dist-C-AyODtz.js";import{t as S}from"./PageCreator-ChCAhYug.js";import{t as C}from"./TextareaInput-DsKJfjFi.js";var w={class:`formatted-text`},T=y(p({__name:`baseOutput`,setup(e){let{censusrenewal:n}=g(_());return(e,r)=>(t(),s(`pre`,w,c(i(n)),1))}}),[[`__scopeId`,`data-v-00c30dfe`]]),E={class:`code-container`},D={class:`checkbox-container`},O=y(p({__name:`BaseInput`,setup(c){let u=_(),{censusrenewal:p,release:y,name:S}=g(u),w=new Date().getUTCFullYear(),T=y.value,O=r(!1),k=r(``);function A(e){let t=w,n=/censusrenewal\s*=\s*([^\n]*)/,r=e.match(n);if(r&&r[1]){let i=r[1].split(`,`).map(e=>e.trim());if(i.length===0)return e.replace(n,`censusrenewal = ${t}`);if(O.value){let e=parseInt(i[i.length-1],10);for(let n=e+1;n<=t;n++)i.includes(n.toString())||i.push(n.toString())}return i.includes(t.toString())||i.push(t.toString()),e.replace(n,`censusrenewal = ${i.join(`, `)}`)}else return e.trimEnd()+`\ncensusrenewal = ${t}`}function j(e){let t=/{{Version\|([^\n]*)}}/,n=/\| release =\s*([^\n]*)/,r=e.replace(t,`{{Version|${T}}}`);return r=r.replace(n,`| release = ${T}`),r}function M(e){let t=A(e);return t=j(t),t}function N(e){let t=e.match(/\| name =\s*([^\n]*)/);return t&&t[1]?t[1].trim():``}function P(){p.value&&(u.censusrenewal=M(p.value),k.value=N(p.value),u.name=k.value)}n(O,()=>{P()}),n(p,()=>{P()});let F=b();function I(e){F.error(e,{position:x.BOTTOM_RIGHT})}function L(){let e=[{field:u.name,message:`¡Pon el nombre de tu base!`}];for(let{field:t,message:n}of e)if(!t){I(n);return}F.success(`¡Creada!`,{position:x.BOTTOM_RIGHT}),window.open(`https://nomanssky.fandom.com/wiki/${u.name}?action=edit#editform`,`_blank`)}return(n,r)=>(t(),s(`div`,E,[r[6]||=o(`h2`,{class:`title`},`Actualización del Censo RSS`,-1),r[7]||=o(`p`,{class:`description`},` Pega aquí el código que deseas actualizar. Los valores se actualizarán automáticamente con el año actual y la versión más reciente. `,-1),o(`div`,D,[o(`label`,null,[e(o(`input`,{type:`checkbox`,"onUpdate:modelValue":r[0]||=e=>O.value=e},null,512),[[l,O.value]]),r[3]||=f(` Añadir todos los años desde el último registrado. `,-1)]),r[4]||=o(`div`,{class:`note`},[o(`p`,null,[o(`strong`,null,`Nota:`),f(` Selecciona esto antes de ingresar tu código o puede haber errores.`)])],-1)]),m(v,{modelValue:i(S),"onUpdate:modelValue":r[1]||=e=>a(S)?S.value=e:null,"help-img":`base/baseName`,"help-title":`Nombre de la Base:`,label:`Nombre de la Base`,tooltip:`Escribe exactamente como se ve en el juego. Cuidado con 0 (cero) y O (o).`},{default:d(()=>[...r[5]||=[f(` Escribe exactamente como se ve en el juego. Cuidado con 0 (cero) y O (o). `,-1)]]),_:1},8,[`modelValue`]),m(i(h),{as:`a`,label:`Ir a la base`,severity:`warn`,onClick:L}),r[8]||=o(`br`,null,null,-1),r[9]||=o(`br`,null,null,-1),m(C,{modelValue:i(p),"onUpdate:modelValue":r[2]||=e=>a(p)?p.value=e:null,label:`Pega tu código aquí`,placeholder:`Ejemplo de código a pegar`,class:`textarea-input`},null,8,[`modelValue`]),r[10]||=o(`div`,{class:`note`},[o(`p`,null,[o(`strong`,null,`Nota:`),f(` Si no tienes ningún año en el campo de `),o(`code`,null,`censusrenewal`),f(`, el sistema fallará. `)])],-1)]))}}),[[`__scopeId`,`data-v-39f0f925`]]),k=p({__name:`BaseRenewal`,setup(e){return(e,n)=>(t(),u(S,null,{input:d(()=>[m(O)]),output:d(()=>[m(T)]),_:1}))}});export{k as default};