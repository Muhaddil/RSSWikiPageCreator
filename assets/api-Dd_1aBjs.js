var e=e=>{let t=new URLSearchParams;return Object.entries(e).forEach(([e,n])=>{t.append(e,n.toString())}),`https://nomanssky.fandom.com/api.php?${t.toString()}`},t={format:`json`,origin:`*`};const n=(n,r,i)=>e({...t,action:`cargoquery`,tables:`Bases`,fields:[`Name`,`CensusPlayer`,`CensusReddit`,`CensusDiscord`,`CensusFriend`,`System`,`Platform`,`Mode`,`CensusArrival`,`CensusRenewal`,`Builderlink`].join(`,`),where:`CensusShow IS NOT NULL AND Civilized='${n}'${i?` AND CensusRenewal HOLDS ${i}`:``}`,order_by:`CensusRenewal DESC`,group_by:`CensusPlayer`,limit:500,offset:r}),r=async e=>{try{let t=await fetch(e);if(!t.ok)throw Error(`HTTP error! status: ${t.status}`);let n=i(await t.text());return JSON.parse(n)}catch(e){throw console.error(`API call failed:`,e),e}};var i=e=>e.replace(/&lt;/g,`<`).replace(/&gt;/g,`>`).replace(/&quot;/g,`"`).replace(/&#039;/g,`'`).replace(/&amp;/g,`&`);const a=e=>e.cargoquery.map(({title:e})=>({Name:e.Name,_pageName:e._pageName||e.Name,CensusPlayer:e.CensusPlayer||`Desconocido`,System:e.System||`Desconocido`,Platform:e.Platform||`Desconocida`,Mode:e.Mode||`Desconocido`,CensusArrival:e.CensusArrival||`Desconocido`,CensusRenewal:e.CensusRenewal||`Desconocido`,Builderlink:e.Builderlink,CensusReddit:e.CensusReddit,CensusDiscord:e.CensusDiscord,CensusFriend:e.CensusFriend,CensusVerified:e.CensusVerified})),o=async(e,t,i)=>{let o=await r(n(e,t,i));if(!o?.cargoquery)throw Error(`Invalid API response structure`);return a(o)},s=async n=>{let i=((await r(e({...t,action:`parse`,page:n,prop:`wikitext`})))?.parse?.wikitext?.[`*`]||``).match(/\|\s*image\s*=\s*(.+)/i);return i?i[1].split(`
`)[0].split(`|`)[0].trim():null},c=async n=>{n.toLowerCase().startsWith(`file:`)||(n=`File:`+n);let i=(await r(e({...t,action:`query`,titles:n,prop:`imageinfo`,iiprop:`url`})))?.query?.pages;if(i){let e=i[Object.keys(i)[0]];if(e&&e.imageinfo&&e.imageinfo[0]){let t=e.imageinfo[0].url;return{panel:t.split(`/revision`)[0],modal:t.split(`revision`)[0]}}}return null},l=async e=>{let t=await s(e);return t?await c(t):null},u=(n,r=0)=>e({...t,action:`cargoquery`,tables:`Regions`,fields:[`Regions.Coordinates`,`Regions.Galaxy`,`Regions.Quadrant`,`Regions.Civilized`,`_pageName=Region`].join(`,`),where:`Civilized='${n}'`,order_by:`Region ASC`,offset:r}),d=e=>e.cargoquery.map(({title:e})=>({Coordinates:e.Coordinates||`Desconocido`,Galaxy:e.Galaxy||`Desconocido`,Quadrant:e.Quadrant||`Desconocido`,Civilized:e.Civilized||`Desconocido`,Region:e.Region||`Desconocido`})),f=async(e,t=0)=>{let n=await r(u(e,t));if(!n?.cargoquery)throw Error(`Invalid API response structure`);return d(n)},p=async n=>{let i=((await r(e({...t,action:`parse`,page:n,prop:`wikitext`})))?.parse?.wikitext?.[`*`]||``).match(/\|\s*image\s*=\s*(.+)/i);return i?i[1].split(`
`)[0].split(`|`)[0].trim():null},m=async n=>{n.toLowerCase().startsWith(`file:`)||(n=`File:`+n);let i=(await r(e({...t,action:`query`,titles:n,prop:`imageinfo`,iiprop:`url`})))?.query?.pages;if(i){let e=i[Object.keys(i)[0]];if(e&&e.imageinfo&&e.imageinfo[0]){let t=e.imageinfo[0].url;return{panel:t.split(`/revision`)[0],modal:t.split(`revision`)[0]}}}return null};export{m as a,p as i,o as n,f as r,l as t};