import{F as e,I as t,N as n,S as r,at as i,b as a,dt as o,f as s,g as c,h as l,ht as u,k as d,m as f,mt as p,p as m,q as h,u as g,y as _}from"./runtime-dom.esm-bundler-qDVwTlDV.js";import"./button-D7Lf3U4Q.js";import"./baseinput-ChXkcOAs.js";import{t as v}from"./_plugin-vue_export-helper-B-x99n_9.js";import{t as y}from"./card-DJq_3h6r.js";import{t as ee}from"./progressbar-BhywyH2b.js";import{t as te}from"./checkbox-DS6Jt1Wj.js";import{t as b}from"./panel-7UR1_Y77.js";import{t as x}from"./logo-white-CmB7GzSq.js";import{t as S}from"./tag-C0-fDuRU.js";import{a as ne,i as re,r as ie}from"./api-lfChQBpo.js";var ae={class:`space-page-container`},oe={class:`flex items-start justify-between mb-6 header-container`},se={class:`flex flex-col`},ce={class:`flex items-center gap-2 mt-2`},le={class:`panel-content`},ue={class:`loading-status`},de={class:`loading-stats mt-3`},fe={key:0},pe={key:0,class:`text-sm text-stellar-gray`},me={class:`panel-content`},he={class:`security-level mt-2`},C={class:`update-info`},w={key:2,class:`galaxy-container`},T={class:`galaxy-header`},E=[`src`],D={class:`galaxy-title`},O={class:`quadrants-grid`},k={class:`quadrant-title`},A={class:`p-4 base-content`},j={class:`flex flex-column gap-3`},M={class:`flex align-items-center gap-2`},N={class:`base-title`},P={class:`base-details`},F={class:`detail-item`},I={class:`detail-value`},L={class:`detail-item`},R={class:`detail-value`},ge={class:`detail-item`},_e={class:`glyph-value`},ve={class:`panel-content-with-image`},z=[`href`],ye=[`src`,`onClick`],be=`Royal Space Society`,B=4,xe=10080*60*1e3,V=v(r({__name:`Regions`,setup(r){let v=i([]),x=i(!0),V=i(null),H=i(window.innerWidth),U=i(!1),W=i({current:0,total:0,status:`Iniciando...`,percentage:0,estimatedMinutes:0}),G=[],K=!1,q=60*1e3/B,J=new Set,Y=new Map,Se=[`Uekenbe Shallows`,`Uklots Shallows`,`Eighba Fringe`,`Xecroften`,`Areyas`,`Sea of Ticrops`,`Udrupi Shallows`,`Jiessl Shallows`,`Becheeth Sector`,`Juhalbe Cluster`,`Larinar Boundary`,`Qudsor Void`,`Uhcheimri Void`,`Skitco`,`Emcalh Nebula`,`Gumita Nebula`,`Jajaja Cluster`],Ce={"Uekenbe Shallows":`Bajíos de Uekenbe`,"Uklots Shallows":`Bajíos de Uklots`,"Eighba Fringe":`Frontera de Eighba`,Xecroften:`Xecroften`,Areyas:`Areyas`,"Sea of Ticrops":`Mar de Ticrops`,"Udrupi Shallows":`Bajíos de Udrupi`,"Jiessl Shallows":`Bajíos de Jiessl`,"Becheeth Sector":`Sector Becheeth`,"Juhalbe Cluster":`Cúmulo de Juhalbe`,"Larinar Boundary":`Frontera de Larinar`,"Qudsor Void":`Vacío de Qudsor`,"Uhcheimri Void":`Vacío de Uhcheimri`,Skitco:`Skitco`,"Emcalh Nebula":`Nebulosa de Emcalh`,"Gumita Nebula":`Nebulosa de Gumita`,"Jajaja Cluster":`Cúmulo de Jajaja`},we={"Uekenbe Shallows":`2141F7EC0D24`,"Uklots Shallows":`01B8032FE9B0`,Xecroften:`01B8F7EC0D25`,Areyas:`0080F8EBDD24`,"Udrupi Shallows":`10BCF7EBFD24`,"Jiessl Shallows":`01A7F7EBFD25`,"Becheeth Sector":`00E6F7EC1D24`,"Juhalbe Cluster":`01B6F6EC0D23`,"Sea of Ticrops":`007A0EEC7D10`,"Larinar Boundary":`010F0AAEBB96`,"Eighba Fringe":`0133FEA34C10`,"Emcalh Nebula":`0041F9F846D8`,"Qudsor Void":`007CFF9B4CB0`,"Uhcheimri Void":`00EAFBF21696`,Skitco:`00F30266CF95`,"Gumita Nebula":`140FF7EBFD23`},Te={Cross:`Cruzado`,"Star systems":`Sistemas`,Planets:`Planetas`,Starships:`Naves`,"Multi-Tools":`Multiherramientas`,Euclid:`Euclides`,"Hilbert Dimension":`Dimensión de Hilbert`},Ee=s(()=>H.value<768?1:H.value<1200?2:3),X=async()=>{if(!(K||G.length===0)){for(K=!0;G.length>0&&J.size<B;){let e=G.shift();if(!e)break;if(J.has(e.id)){G.push({...e,priority:(e.priority||0)-1});continue}J.add(e.id);try{let t=await e.execute();e.resolve(t)}catch(t){e.reject(t)}finally{J.delete(e.id),G.length>0&&await new Promise(e=>setTimeout(e,q))}}K=!1,G.length>0&&setTimeout(()=>X(),q)}},De=(e,t,n=0)=>new Promise((r,i)=>{let a=`query-${e}`,o=Y.get(a);if(o&&Date.now()-o.timestamp<xe){r(o.data);return}let s={id:e,execute:async()=>{let e=await t();return Y.set(a,{data:e,timestamp:Date.now()}),e},resolve:r,reject:i,priority:n},c=G.findIndex(e=>(e.priority||0)<n);c===-1?G.push(s):G.splice(c,0,s),K||X()}),Oe=async e=>De(`image-${e}`,async()=>{let t=await re(e);return t?await ne(t):null},1),Z=async e=>{try{let t={regions:e.map(e=>({...e,statsLoading:!1})),timestamp:Date.now(),version:`1.1`};localStorage.setItem(`rss-regions-cache`,JSON.stringify(t))}catch(e){console.error(`Error guardando caché:`,e)}},ke=async()=>{try{let e=localStorage.getItem(`rss-regions-cache`);if(e){let t=JSON.parse(e);if(Date.now()-t.timestamp<1440*60*1e3*7&&t.version===`1.1`)return console.log(`✅ Datos cargados desde caché`),t.regions;console.log(`⚠️ Caché expirada o versión antigua, recargando...`)}}catch{console.log(`ℹ️ No hay caché disponible`)}return null},Q=(e,t,n)=>{let r=t>0?Math.round(e/t*100):0,i=t-e;W.value={current:e,total:t,status:n,percentage:r,estimatedMinutes:Math.ceil(i*q/(60*1e3))}},Ae=async()=>{try{let e=await ke();if(e&&e.length>0){v.value=e,Q(e.length,e.length,`Datos cargados desde caché`),x.value=!1;return}Q(0,0,`Obteniendo lista de regiones...`);let t=(await ie(be,0)).filter(e=>Se.some(t=>e.Region.includes(t))),n=t.length;Q(0,n,`Cargando imágenes de regiones...`);let r=[];for(let e=0;e<t.length;e++){let i=t[e];try{Q(e+1,n,`Cargando imagen de ${i.Region}...`),i.imageUrl=await Oe(i.Region),i.stats=null,i.statsLoaded=!1,i.statsLoading=!1,r.push(i),v.value=[...r],await d(),(e+1)%2==0&&await Z(r)}catch(e){console.error(`Error procesando región ${i.Region}:`,e),i.imageUrl=null,i.stats=null,i.statsLoaded=!1,i.statsLoading=!1,r.push(i)}}await Z(r),Q(n,n,`¡Imágenes cargadas! Las estadísticas se cargarán bajo demanda.`),x.value=!1}catch(e){V.value=`Error al cargar las regiones`,console.error(e),x.value=!1}};n(async()=>{window.addEventListener(`resize`,()=>H.value=window.innerWidth),await Ae()});let $=e=>e.trim().replace(/\s+/g,`_`).replace(/\//g,`_`),je=e=>{window.open(e,`_blank`)};function Me(e){let t=e.split(`:`);if(t.length!==4)return``;let[n,r,i]=t,a=parseInt(n,16),o=parseInt(r,16),s=parseInt(i,16),c=2049,l=2047,u=a<=2046?a+c:a-l,d=s<=2046?s+c:s-l,f=o<=126?o+129:o-127,p=u.toString(16).toUpperCase().padStart(3,`0`),m=f.toString(16).toUpperCase().padStart(2,`0`),h=d.toString(16).toUpperCase().padStart(3,`0`);return`0000`+m+h+p}function Ne(e,t){return we[e]||Me(t)}function Pe(e){let t=e.toString();return Te[t]||t}let Fe=s(()=>{let e=new Map;return v.value.forEach(t=>{e.has(t.Galaxy)||e.set(t.Galaxy,{name:t.Galaxy,quadrants:[],image:t.imageUrl?.modal});let n=e.get(t.Galaxy),r=n.quadrants.find(e=>e.name===t.Quadrant);r||(r={name:t.Quadrant,regions:[]},n.quadrants.push(r)),r.regions.push(t)}),Array.from(e.values())});function Ie(e){return U.value?e:Ce[e]||e}return(n,r)=>(e(),f(o(y),{class:`p-0 galactic-card`},{content:h(()=>[m(`div`,ae,[m(`div`,oe,[m(`div`,se,[r[2]||=m(`div`,{class:`header-container`},[m(`a`,{href:`https://nomanssky.fandom.com/es/wiki/Royal_Space_Society`,target:`_blank`},[m(`div`,{class:`rss-logo`},[m(`img`,{src:`/RSSWikiPageCreator/assets/images/shared/logo-white.png`,class:`logo-image`,alt:`RSS Logo`})])]),m(`div`,{class:`title-theme-container`},[m(`h1`,{class:`galactic-title`},[m(`span`,{class:`title-text`},`Regiones - Royal Space Society`)])])],-1),r[3]||=m(`p`,{class:`text-stellar-gray mt-2`},`Explora las regiones de la Royal Space Society`,-1),m(`div`,ce,[a(o(te),{modelValue:U.value,"onUpdate:modelValue":r[0]||=e=>U.value=e,binary:!0,inputId:`toggle-language`},null,8,[`modelValue`]),r[1]||=m(`label`,{for:`toggle-language`,class:`cursor-pointer select-none`},` Mostrar nombres de las regiones en inglés `,-1)])])]),x.value?(e(),f(o(b),{key:0,class:`galactic-panel mt-6 loading-panel`},{header:h(()=>[...r[4]||=[m(`h2`,{class:`panel-title`},[m(`i`,{class:`pi pi-spin pi-spinner`}),_(` Cargando datos...`)],-1)]]),default:h(()=>[m(`div`,le,[m(`p`,ue,u(W.value.status),1),a(o(ee),{value:W.value.percentage,class:`mt-3`},null,8,[`value`]),m(`div`,de,[m(`p`,null,[r[5]||=_(` Progreso: `,-1),m(`strong`,null,u(W.value.current),1),r[6]||=_(` de `,-1),m(`strong`,null,u(W.value.total),1),r[7]||=_(` consultas completadas `,-1),W.value.percentage>0?(e(),c(`span`,fe,` (`+u(W.value.percentage)+`%) `,1)):l(``,!0)]),W.value.estimatedMinutes>0?(e(),c(`p`,pe,` Tiempo estimado restante: ~`+u(W.value.estimatedMinutes)+` minuto`+u(W.value.estimatedMinutes===1?``:`s`),1)):l(``,!0)])])]),_:1})):l(``,!0),x.value?l(``,!0):(e(),f(o(b),{key:1,class:`galactic-panel mt-6`},{header:h(()=>[...r[8]||=[m(`h2`,{class:`panel-title`},`Información de las regiones`,-1)]]),default:h(()=>[m(`div`,me,[m(`p`,null,[r[9]||=_(` Total de regiones registradas: `,-1),m(`strong`,null,u(v.value.length),1)]),m(`p`,he,[r[10]||=_(` Nivel de seguridad: `,-1),a(o(S),{value:`Clasificado RSS`,severity:`info`,class:`category-tag`})]),m(`p`,C,`Última actualización: `+u(new Date().toLocaleDateString()),1)])]),_:1})),r[17]||=m(`br`,null,null,-1),!x.value&&!V.value?(e(),c(`div`,w,[(e(!0),c(g,null,t(Fe.value,(n,i)=>(e(),f(o(b),{key:i,class:`galaxy-panel`,toggleable:``,collapsed:``},{header:h(()=>[m(`div`,T,[n.image?(e(),c(`img`,{key:0,src:n.image,class:`galaxy-image`},null,8,E)):l(``,!0),m(`h2`,D,u(Pe(n.name)),1),a(o(S),{value:`${n.quadrants.length} ${n.quadrants.length===1?`Cuadrante`:`Cuadrantes`}`,severity:`info`},null,8,[`value`])])]),default:h(()=>[m(`div`,O,[(e(!0),c(g,null,t(n.quadrants,(n,i)=>(e(),f(o(b),{key:i,class:`quadrant-panel`,toggleable:``,collapsed:``},{header:h(()=>[m(`h3`,k,[r[11]||=m(`i`,{class:`pi pi-th-large`},null,-1),_(` `+u(n.name)+` `,1),a(o(S),{value:`${n.regions.length} ${n.regions.length===1?`Región`:`Regiones`}`,severity:`info`},null,8,[`value`])])]),default:h(()=>[m(`div`,{class:`regions-grid`,style:p(`grid-template-columns: repeat(${Ee.value}, 3fr)`)},[(e(!0),c(g,null,t(n.regions,(t,n)=>(e(),f(o(y),{key:n,class:`region-card`},{content:h(()=>[m(`div`,A,[m(`div`,j,[m(`div`,M,[m(`h3`,N,u(Ie(t.Region)),1),a(o(S),{value:t.Galaxy,severity:`info`,class:`category-tag`},null,8,[`value`])]),m(`div`,P,[m(`div`,F,[r[12]||=m(`span`,{class:`detail-label`},`Cuadrante:`,-1),m(`span`,I,u(t.Quadrant),1)]),m(`div`,L,[r[13]||=m(`span`,{class:`detail-label`},`Coordenadas:`,-1),m(`span`,R,u(t.Coordinates),1)]),m(`div`,ge,[r[14]||=m(`span`,{class:`detail-label`},`Glifos:`,-1),m(`span`,_e,u(Ne(t.Region,t.Coordinates)),1)])]),t.Region?(e(),f(o(b),{key:0,class:`builder-panel mt-3`},{header:h(()=>[...r[15]||=[m(`span`,{class:`builder-link-header`},`Enlaces de la Región`,-1)]]),default:h(()=>[m(`div`,ve,[m(`a`,{href:`https://nomanssky.fandom.com/wiki/${$(t.Region)}`,target:`_blank`,class:`builder-link`},[...r[16]||=[m(`i`,{class:`pi pi-external-link`},null,-1),_(` Ver detalles de la región `,-1)]],8,z),t.imageUrl?(e(),c(`img`,{key:0,src:t.imageUrl.modal,alt:`Imagen de la base`,class:`panel-base-image`,onClick:e=>je(`https://nomanssky.fandom.com/wiki/${$(t.Region)}`)},null,8,ye)):l(``,!0)])]),_:2},1024)):l(``,!0)])])]),_:2},1024))),128))],4)]),_:2},1024))),128))])]),_:2},1024))),128))])):l(``,!0)])]),_:1}))}}),[[`__scopeId`,`data-v-873d1f1f`]]);export{V as default};