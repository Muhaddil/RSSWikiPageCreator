import{$ as e,K as t,P as n,U as r,f as i,h as a,i as o,it as s,mt as c,p as l,q as u,ut as d,v as f,x as p,y as m}from"./runtime-dom.esm-bundler-BxVoWjA0.js";import{t as h}from"./button-BjSjIJD1.js";import{f as g,s as _,t as v}from"./SanitisedTextInput-BYY2vgzV.js";import"./baseinput-CswjWXl7.js";import{t as y}from"./_plugin-vue_export-helper-D6098ZHW.js";import{r as b,t as x}from"./dist-CmxcWEP_.js";import{t as S}from"./PageCreator-BFz-sYCA.js";import{t as C}from"./TextareaInput-CE3APdc9.js";var w={class:`formatted-text`},T=y(p({__name:`baseOutput`,setup(e){let{censusrenewal:t}=g(_());return(e,r)=>(n(),a(`pre`,w,c(d(t)),1))}}),[[`__scopeId`,`data-v-00c30dfe`]]),E={class:`code-container`},D={class:`checkbox-container`},O=y(p({__name:`BaseInput`,setup(c){let l=_(),{censusrenewal:p,release:y,name:S}=g(l),w=new Date().getUTCFullYear(),T=y.value,O=s(!1),k=s(``);function A(e){let t=w,n=/censusrenewal\s*=\s*([^\n]*)/,r=e.match(n);if(r&&r[1]){let i=r[1].split(`,`).map(e=>e.trim());if(i.length===0)return e.replace(n,`censusrenewal = ${t}`);if(O.value){let e=parseInt(i[i.length-1],10);for(let n=e+1;n<=t;n++)i.includes(n.toString())||i.push(n.toString())}return i.includes(t.toString())||i.push(t.toString()),e.replace(n,`censusrenewal = ${i.join(`, `)}`)}else return e.trimEnd()+`\ncensusrenewal = ${t}`}function j(e){let t=/{{Version\|([^\n]*)}}/,n=/\| release =\s*([^\n]*)/,r=e.replace(t,`{{Version|${T}}}`);return r=r.replace(n,`| release = ${T}`),r}function M(e){let t=A(e);return t=j(t),t}function N(e){let t=e.match(/\| name =\s*([^\n]*)/);return t&&t[1]?t[1].trim():``}function P(){p.value&&(l.censusrenewal=M(p.value),k.value=N(p.value),l.name=k.value)}r(O,()=>{P()}),r(p,()=>{P()});let F=b();function I(e){F.error(e,{position:x.BOTTOM_RIGHT})}function L(){let e=[{field:l.name,message:`¡Pon el nombre de tu base!`}];for(let{field:t,message:n}of e)if(!t){I(n);return}F.success(`¡Creada!`,{position:x.BOTTOM_RIGHT}),window.open(`https://nomanssky.fandom.com/wiki/${l.name}?action=edit#editform`,`_blank`)}return(r,s)=>(n(),a(`div`,E,[s[6]||=i(`h2`,{class:`title`},`Actualización del Censo RSS`,-1),s[7]||=i(`p`,{class:`description`},` Pega aquí el código que deseas actualizar. Los valores se actualizarán automáticamente con el año actual y la versión más reciente. `,-1),i(`div`,D,[i(`label`,null,[u(i(`input`,{type:`checkbox`,"onUpdate:modelValue":s[0]||=e=>O.value=e},null,512),[[o,O.value]]),s[3]||=f(` Añadir todos los años desde el último registrado. `,-1)]),s[4]||=i(`div`,{class:`note`},[i(`p`,null,[i(`strong`,null,`Nota:`),f(` Selecciona esto antes de ingresar tu código o puede haber errores.`)])],-1)]),m(v,{modelValue:d(S),"onUpdate:modelValue":s[1]||=t=>e(S)?S.value=t:null,"help-img":`base/baseName`,"help-title":`Nombre de la Base:`,label:`Nombre de la Base`,tooltip:`Escribe exactamente como se ve en el juego. Cuidado con 0 (cero) y O (o).`},{default:t(()=>[...s[5]||=[f(` Escribe exactamente como se ve en el juego. Cuidado con 0 (cero) y O (o). `,-1)]]),_:1},8,[`modelValue`]),m(d(h),{as:`a`,label:`Ir a la base`,severity:`warn`,onClick:L}),s[8]||=i(`br`,null,null,-1),s[9]||=i(`br`,null,null,-1),m(C,{modelValue:d(p),"onUpdate:modelValue":s[2]||=t=>e(p)?p.value=t:null,label:`Pega tu código aquí`,placeholder:`Ejemplo de código a pegar`,class:`textarea-input`},null,8,[`modelValue`]),s[10]||=i(`div`,{class:`note`},[i(`p`,null,[i(`strong`,null,`Nota:`),f(` Si no tienes ningún año en el campo de `),i(`code`,null,`censusrenewal`),f(`, el sistema fallará. `)])],-1)]))}}),[[`__scopeId`,`data-v-39f0f925`]]),k=p({__name:`BaseRenewal`,setup(e){return(e,r)=>(n(),l(S,null,{input:t(()=>[m(O)]),output:t(()=>[m(T)]),_:1}))}});export{k as default};