import{A as e,At as t,D as n,E as r,G as i,V as a,W as o,_ as s,c as ee,ct as c,h as l,k as u,kt as te,l as ne,m as d,nt as f,o as p,r as m,s as h,u as g}from"./runtime-core.esm-bundler-CNadvJx8.js";import{i as re,t as ie}from"./runtime-dom.esm-bundler-rkPjeQEv.js";import"./button-D1ppH4Ef.js";import"./portal-BOmEmGK0.js";import"./core-DwCp9VXr.js";import{t as ae}from"./ThemeSwitch-Ck7H4F9-.js";import"./baseinput-DhitGjnO.js";import{t as oe}from"./inputtext-CKVrimjR.js";import{t as _}from"./_plugin-vue_export-helper-DyZRSbhD.js";import"./iconfield-DkDn1MGT.js";import"./select-GPmwNjc_.js";import"./check-CBynw2iz.js";import"./chevrondown-CuBdFnSW.js";import{t as v}from"./card-BviZZTYj.js";import"./minus-I7VNL3G0.js";import{t as se}from"./panel-BwPhW7dk.js";import{t as y}from"./logo-white-BFvoBgAm.js";import{t as ce}from"./tag-adrsO1qO.js";import{t as b}from"./dropdown-vVcXbrO5.js";var x={class:`space-page-container`},S={class:`flex items-start justify-between mb-6 header-container`},C={class:`flex flex-col`},w={class:`header-container`},T={class:`title-theme-container`},E={class:`galactic-title`},D={class:`title-text`},O={class:`text-stellar-gray mt-2`},k={class:`text-stellar-gray mt-2`},A={class:`filter-container mb-6 p-4 bg-space-dark rounded-lg`},j={class:`grid grid-cols-1 md:grid-cols-2 gap-4`},M={class:`flex`},N={class:`block mb-2`},P={class:`panel-content`},F={class:`update-info mt-2`},I={key:0,class:`loading-message`},L={key:1,class:`error-message p-error`},R={class:`p-4`},z={class:`flex flex-column gap-3`},le={class:`flex align-items-center gap-2`},B={class:`update-title`},V={class:`update-details`},H={class:`detail-item`},U={class:`detail-value`},W={class:`detail-item`},ue={class:`detail-value`},de={class:`comment-box mt-3 p-3 bg-space-light rounded`},fe={class:`mt-1`},pe={class:`mt-3`},me=[`href`],he=[`href`],G=_(s({__name:`WikiUpdates`,setup(s){let _=f([]),y=f(!0),G=f(null),K=f(window.innerWidth),q=f(500),J=f(``),Y=f(!1),X=f(!1),ge=p(()=>K.value<768?1:K.value<1200?2:3),_e=p(()=>Y.value?`https://nomanssky.fandom.com/api.php`:`https://nomanssky.fandom.com/es/api.php`),ve=f([{value:25,label:`25 resultados`},{value:50,label:`50 resultados`},{value:100,label:`100 resultados`},{value:200,label:`200 resultados`},{value:300,label:`300 resultados`},{value:400,label:`400 resultados`},{value:500,label:`500 resultados`}]),Z=async()=>{try{y.value=!0,G.value=null;let e=new URLSearchParams({action:`query`,list:`recentchanges`,rcprop:`title|timestamp|user|comment|ids|flags|loginfo|revid|old_revid`,rclimit:q.value.toString(),rcshow:`!bot`,rcdir:`older`,format:`json`,origin:`*`,...J.value&&{rcuser:J.value}}),t=await fetch(`${_e.value}?${e.toString()}`);if(!t.ok)throw Error(`Error en la API de la wiki`);let n=await t.json();if(n.error)throw Error(n.error.info);_.value=n.query.recentchanges.map(e=>({title:e.title,timestamp:e.timestamp,user:e.user,comment:e.comment||`(sin comentario)`,pageid:e.pageid,revid:e.revid,old_revid:e.old_revid}))}catch(e){G.value=`Error al cargar actualizaciones`,console.error(e)}finally{y.value=!1}};r(async()=>{window.addEventListener(`resize`,()=>K.value=window.innerWidth),await Z()}),a(Y,()=>{Z()}),a(q,()=>{Z()});let Q=e=>e.trim().replace(/\s+/g,`_`).replace(/\//g,`_`),ye=e=>{let t=new Date,n=new Date(e),r=t.getTime()-n.getTime(),i=Math.floor(r/6e4);if(i<60)return`Hace ${i} min`;let a=Math.floor(i/60);return a<24?`Hace ${a} h`:`Hace ${Math.floor(a/24)} días`},be=e=>new Date(e).toLocaleString(`es-ES`,{year:`numeric`,month:`long`,day:`numeric`,hour:`2-digit`,minute:`2-digit`,second:`2-digit`}),$=()=>{X.value=window.scrollY>300},xe=()=>{window.scrollTo({top:0,behavior:`smooth`})};return r(()=>{window.addEventListener(`scroll`,$)}),n(()=>{window.removeEventListener(`scroll`,$)}),(n,r)=>(u(),g(m,null,[l(c(v),{class:`p-0 galactic-card`},{content:o(()=>[h(`div`,x,[h(`div`,S,[h(`div`,C,[r[3]||=h(`a`,{href:`https://nomanssky.fandom.com/es/wiki/Royal_Space_Society`,target:`_blank`},[h(`div`,{class:`wiki-logo`},[h(`img`,{src:`/RSSWikiPageCreator/assets/images/shared/logo-white.png`,class:`logo-image`,alt:`Wiki Logo`})])],-1),h(`div`,w,[h(`div`,T,[h(`h1`,E,[h(`span`,D,`Actualizaciones Recientes - Wiki `+t(Y.value?`EN`:`ES`),1)])])]),h(`p`,O,` Últimos cambios en la wiki `+t(Y.value?`inglesa`:`española`)+` de No Man's Sky `,1)]),h(`p`,k,[l(ae,{style:{"margin-right":`2rem`}})])]),h(`div`,A,[h(`div`,j,[h(`div`,null,[r[4]||=h(`label`,{class:`block mb-6 text-stellar-blue font-medium`},`Resultados:`,-1),l(c(b),{modelValue:q.value,"onUpdate:modelValue":r[0]||=e=>q.value=e,options:ve.value,optionLabel:`label`,optionValue:`value`,class:`w-full ml-2`,pt:{root:{class:`bg-space-light border-space-blue`},input:{class:`text-stellar-light`},trigger:{class:`bg-space-blue`}}},null,8,[`modelValue`,`options`])]),h(`div`,null,[r[5]||=h(`label`,{class:`block mb-2`},`Filtrar por usuario:`,-1),h(`div`,M,[l(c(oe),{modelValue:J.value,"onUpdate:modelValue":r[1]||=e=>J.value=e,placeholder:`Nombre de usuario`,class:`w-full`},null,8,[`modelValue`]),h(`button`,{onClick:Z,class:`p-button p-component ml-2`},` Buscar `)])])]),h(`div`,null,[h(`label`,N,[i(h(`input`,{type:`checkbox`,"onUpdate:modelValue":r[2]||=e=>Y.value=e,class:`mr-2`},null,512),[[re,Y.value]]),r[6]||=d(` Consultar wiki en inglés `,-1)])])]),l(c(se),{class:`galactic-panel`},{header:o(()=>[...r[7]||=[h(`h2`,{class:`panel-title`},`Información de Actualizaciones`,-1)]]),default:o(()=>[h(`div`,P,[h(`p`,null,[r[8]||=d(` Total de cambios recientes: `,-1),h(`strong`,null,t(_.value.length),1)]),h(`p`,F,`Actualizado: `+t(new Date().toLocaleString(`es-ES`)),1)])]),_:1}),r[17]||=h(`br`,null,null,-1),y.value?(u(),g(`div`,I,[...r[9]||=[h(`i`,{class:`pi pi-spinner pi-spin`},null,-1),d(` Cargando actualizaciones... `,-1)]])):G.value?(u(),g(`div`,L,[r[10]||=h(`i`,{class:`pi pi-exclamation-triangle`},null,-1),d(` `+t(G.value),1)])):(u(),g(`div`,{key:2,class:`grid gap-4`,style:te(`grid-template-columns: repeat(${ge.value}, 1fr)`)},[(u(!0),g(m,null,e(_.value,(e,n)=>(u(),ee(c(v),{key:n,class:`update-card`},{content:o(()=>[h(`div`,R,[h(`div`,z,[h(`div`,le,[h(`h3`,B,t(e.title),1),l(c(ce),{value:ye(e.timestamp),severity:`info`,class:`time-tag`},null,8,[`value`])]),h(`div`,V,[h(`div`,H,[r[11]||=h(`span`,{class:`detail-label`},`Usuario:`,-1),h(`span`,U,t(e.user),1)]),h(`div`,W,[r[12]||=h(`span`,{class:`detail-label`},`Fecha:`,-1),h(`span`,ue,t(be(e.timestamp)),1)]),h(`div`,de,[r[13]||=h(`span`,{class:`detail-label`},`Comentario:`,-1),h(`p`,fe,t(e.comment),1)])]),h(`div`,pe,[h(`a`,{href:`https://nomanssky.fandom.com/${Y.value?``:`es/`}wiki/${Q(e.title)}`,target:`_blank`,class:`wiki-link`},[...r[14]||=[h(`i`,{class:`pi pi-external-link`},null,-1),d(` Ver página en la wiki `,-1)]],8,me),r[16]||=h(`span`,{class:`mx-2`},`|`,-1),h(`a`,{href:`https://nomanssky.fandom.com/${Y.value?``:`es/`}wiki/${Q(e.title)}?diff=${e.revid}&oldid=${e.old_revid}`,target:`_blank`,class:`wiki-link`},[...r[15]||=[h(`i`,{class:`pi pi-history`},null,-1),d(` Ver cambios `,-1)]],8,he)])])])]),_:2},1024))),128))],4))])]),_:1}),l(ie,{name:`fade`},{default:o(()=>[X.value?(u(),g(`button`,{key:0,onClick:xe,class:`scroll-top-button`},[...r[18]||=[h(`i`,{class:`pi pi-arrow-up`},null,-1)]])):ne(``,!0)]),_:1})],64))}}),[[`__scopeId`,`data-v-96583537`]]);export{G as default};