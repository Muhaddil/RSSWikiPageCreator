"use strict";import{d as F,r as c,c as L,x as E,y as W,a as o,o as i,f as n,k as v,b as e,j as S,e as m,g as r,h as s,U as J,Z as Y,t as u,B as Z,F as N,H as q,a9 as G,p as H}from"./main-Cl-tM1iJ.js";import{_ as K}from"./logo-white-CwkOOWqZ.js";import{s as U}from"./index-BR9Rg848.js";import{s as y}from"./index-DtCiWGgX.js";import{s as $}from"./index-Ca0eIYfG.js";import{s as O}from"./index-Ozpljqi7.js";import{s as I}from"./index-7a4H2-ve.js";import{f as Q,a as X}from"./api-Bbdr4r4D.js";import"./index-RaeJkH-i.js";import"./index-CGQXJmal.js";const ee={class:"space-page-container"},ae={class:"filter-container mb-6"},le={class:"filter-row"},se={class:"year-filter"},ie={class:"input-group"},te={class:"pagination-filter"},ne={key:0,class:"rows-filter"},oe={key:0,class:"filter-info"},re={class:"info-text"},ce={key:0,class:"info-text"},ue={class:"panel-content"},de={class:"security-level mt-2"},pe={class:"update-info"},ve={key:1,class:"loading-message"},me={key:2,class:"error-message p-error"},ge={class:"p-4 base-content"},fe={class:"flex flex-column gap-3"},ye={class:"flex align-items-center gap-2"},be={class:"base-title"},we={class:"base-details"},he={class:"detail-item"},ke={class:"detail-value"},_e={class:"detail-item"},xe={class:"detail-value"},Se={class:"flex gap-2"},Ce={class:"panel-content-with-image"},Ve=["href"],Re=["src","onClick"],Le="Royal Space Society",Ee=F({__name:"CensusTable",setup(Ue){const t=c([]),b=c(!0),w=c(null),_=c(window.innerWidth),h=c(""),g=c(!0),f=c(0),d=c(10),C=c(!1),P=[{label:"5 por p\xE1gina",value:5},{label:"10 por p\xE1gina",value:10},{label:"25 por p\xE1gina",value:25},{label:"50 por p\xE1gina",value:50}],B=L(()=>g.value?t.value.slice(f.value,f.value+d.value):t.value),T=[{label:"S\xED, usar paginaci\xF3n",value:!0},{label:"No, mostrar todo",value:!1}],j=L(()=>_.value<768?1:_.value<1200?2:3),x=async(p=0,a)=>{try{const l=await Q(Le,p,a);await Promise.all(l.map(async k=>{k.imageUrl=await X(k._pageName)})),t.value=[...t.value,...l],l.length===500&&await x(p+500,a)}catch(l){w.value="Error al cargar las bases",console.error(l)}finally{b.value=!1}},A=async()=>{t.value=[],b.value=!0,w.value=null,await x(0,h.value)};E(async()=>{window.addEventListener("resize",()=>_.value=window.innerWidth),await x(0,h.value)});const V=p=>p.trim().replace(/\s+/g,"_").replace(/\//g,"_"),M=p=>{window.open(p,"_blank")},z=()=>{f.value=0},R=()=>{C.value=window.scrollY>300},D=()=>{window.scrollTo({top:0,behavior:"smooth"})};return E(()=>{window.addEventListener("scroll",R)}),W(()=>{window.removeEventListener("scroll",R)}),(p,a)=>(i(),o(N,null,[n(s(U),{class:"p-0 galactic-card"},{content:v(()=>[e("div",ee,[a[18]||(a[18]=e("div",{class:"flex items-start justify-between mb-6 header-container"},[e("div",{class:"flex flex-col"},[e("a",{href:"https://nomanssky.fandom.com/es/wiki/Royal_Space_Society",target:"_blank"},[e("div",{class:"rss-logo"},[e("img",{src:K,class:"logo-image",alt:"RSS Logo"})])]),e("div",{class:"header-container"},[e("div",{class:"title-theme-container"},[e("h1",{class:"galactic-title"},[e("span",{class:"title-text"},"Censo de Bases - Royal Space Society")])])]),e("p",{class:"text-stellar-gray mt-2"},"Explora las bases espaciales de la Royal Space Society")])],-1)),e("div",ae,[e("div",le,[e("div",se,[a[4]||(a[4]=e("label",{for:"yearInput",class:"filter-label"},[e("i",{class:"pi pi-calendar mr-2"}),r(" A\xF1o del censo: ")],-1)),e("div",ie,[n(s(J),{id:"yearInput",type:"number",modelValue:h.value,"onUpdate:modelValue":a[0]||(a[0]=l=>h.value=l),placeholder:"Ej. 2023",class:"year-input"},null,8,["modelValue"]),n(s(Y),{onClick:A,icon:"pi pi-search",label:"Filtrar",class:"filter-btn",loading:b.value},null,8,["loading"])])]),e("div",te,[a[5]||(a[5]=e("label",{class:"filter-label"},[e("i",{class:"pi pi-list mr-2"}),r(" Paginaci\xF3n: ")],-1)),n(s(I),{modelValue:g.value,"onUpdate:modelValue":a[1]||(a[1]=l=>g.value=l),options:T,optionLabel:"label",optionValue:"value",class:"pagination-dropdown"},null,8,["modelValue"])]),g.value?(i(),o("div",ne,[a[6]||(a[6]=e("label",{class:"filter-label"},[e("i",{class:"pi pi-th-large mr-2"}),r(" Elementos: ")],-1)),n(s(I),{modelValue:d.value,"onUpdate:modelValue":a[2]||(a[2]=l=>d.value=l),options:P,optionLabel:"label",optionValue:"value",class:"rows-dropdown",onChange:z},null,8,["modelValue"])])):m("",!0)]),t.value.length>0?(i(),o("div",oe,[e("span",re,[a[7]||(a[7]=e("i",{class:"pi pi-database mr-1"},null,-1)),r(" Total: "+u(t.value.length)+" bases ",1)]),g.value?(i(),o("span",ce,[a[8]||(a[8]=e("i",{class:"pi pi-eye mr-1"},null,-1)),r(" Mostrando: "+u(Math.min(f.value+d.value,t.value.length))+" de "+u(t.value.length),1)])):m("",!0)])):m("",!0)]),g.value&&t.value.length>d.value?(i(),S(s(O),{key:0,first:f.value,rows:d.value,totalRecords:t.value.length,onPage:a[3]||(a[3]=l=>{f.value=l.first,d.value=l.rows}),class:"mb-4"},null,8,["first","rows","totalRecords"])):m("",!0),n(s($),{class:"galactic-panel mt-6"},{header:v(()=>[...a[9]||(a[9]=[e("h2",{class:"panel-title"},"Informaci\xF3n del Censo",-1)])]),default:v(()=>[e("div",ue,[e("p",null,[a[10]||(a[10]=r(" Total de bases registradas: ",-1)),e("strong",null,u(t.value.length),1)]),e("p",de,[a[11]||(a[11]=r(" Nivel de seguridad: ",-1)),n(s(y),{value:"Clasificado RSS",severity:"info",class:"category-tag"})]),e("p",pe,"\xDAltima actualizaci\xF3n: "+u(new Date().toLocaleDateString()),1)])]),_:1}),a[19]||(a[19]=e("br",null,null,-1)),b.value?(i(),o("div",ve,[...a[12]||(a[12]=[e("i",{class:"pi pi-spinner pi-spin"},null,-1),r(" Cargando bases espaciales... ",-1)])])):w.value?(i(),o("div",me,[a[13]||(a[13]=e("i",{class:"pi pi-exclamation-triangle"},null,-1)),r(" "+u(w.value),1)])):(i(),o("div",{key:3,class:"grid gap-4",style:Z(`grid-template-columns: repeat(${j.value}, 1fr)`)},[(i(!0),o(N,null,q(B.value,(l,k)=>(i(),S(s(U),{key:k,class:"link-card"},{content:v(()=>[e("div",ge,[e("div",fe,[e("div",ye,[e("h3",be,u(l.Name),1),n(s(y),{value:l.Platform,severity:"info",class:"category-tag"},null,8,["value"])]),e("div",we,[e("div",he,[a[14]||(a[14]=e("span",{class:"detail-label"},"Jugador:",-1)),e("span",ke,u(l.CensusPlayer),1)]),e("div",_e,[a[15]||(a[15]=e("span",{class:"detail-label"},"Sistema:",-1)),e("span",xe,u(l.System),1)]),e("div",Se,[n(s(y),{value:l.Mode,severity:"success",class:"category-tag"},null,8,["value"]),n(s(y),{value:`Llegada: ${l.CensusArrival}`,severity:"warning",class:"category-tag"},null,8,["value"]),n(s(y),{value:`Renovaci\xF3n: ${l.CensusRenewal}`,severity:"danger",class:"category-tag"},null,8,["value"])])]),l.Name?(i(),S(s($),{key:0,class:"builder-panel mt-3"},{header:v(()=>[...a[16]||(a[16]=[e("span",{class:"builder-link-header"},"Enlaces de la Base",-1)])]),default:v(()=>[e("div",Ce,[e("a",{href:`https://nomanssky.fandom.com/wiki/${V(l._pageName)}`,target:"_blank",class:"builder-link"},[...a[17]||(a[17]=[e("i",{class:"pi pi-external-link"},null,-1),r(" Ver detalles de construcci\xF3n ",-1)])],8,Ve),l.imageUrl?(i(),o("img",{key:0,src:l.imageUrl.panel,alt:"Imagen de la base",class:"panel-base-image",onClick:$e=>M(`https://nomanssky.fandom.com/wiki/${V(l._pageName)}`)},null,8,Re)):m("",!0)])]),_:2},1024)):m("",!0)])])]),_:2},1024))),128))],4))])]),_:1}),n(G,{name:"fade"},{default:v(()=>[C.value?(i(),o("button",{key:0,onClick:D,class:"scroll-top-button"},[...a[20]||(a[20]=[e("i",{class:"pi pi-arrow-up"},null,-1)])])):m("",!0)]),_:1})],64))}}),Ne=H(Ee,[["__scopeId","data-v-697ae107"]]);export{Ne as default};
