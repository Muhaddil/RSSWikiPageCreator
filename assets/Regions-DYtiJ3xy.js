import{A as e,At as t,E as n,T as r,W as i,_ as a,c as o,ct as s,h as c,k as l,kt as u,l as d,m as f,nt as p,o as m,r as h,s as g,u as _}from"./runtime-core.esm-bundler-DchWbIG6.js";import"./runtime-dom.esm-bundler-BLbTed6u.js";import"./button-B2IlAsp7.js";import"./baseinput-DGGDxDlI.js";import{t as v}from"./_plugin-vue_export-helper-DyZRSbhD.js";import"./check-DajuQgww.js";import{t as y}from"./card-BcBQ0oRB.js";import"./minus-B1GCgViL.js";import{t as ee}from"./progressbar-Cf6gCwhN.js";import{t as te}from"./checkbox-BicTgW9g.js";import{t as b}from"./panel-CbD19-xJ.js";import{t as x}from"./logo-white-DFArQECj.js";import{t as S}from"./tag-yAZDWcTO.js";import{a as ne,i as re,r as ie}from"./api-Dd_1aBjs.js";var ae={class:`space-page-container`},oe={class:`flex items-start justify-between mb-6 header-container`},se={class:`flex flex-col`},ce={class:`flex items-center gap-2 mt-2`},le={class:`panel-content`},ue={class:`loading-status`},de={class:`loading-stats mt-3`},fe={key:0},pe={key:0,class:`text-sm text-stellar-gray`},me={class:`panel-content`},he={class:`security-level mt-2`},C={class:`update-info`},w={key:2,class:`galaxy-container`},T={class:`galaxy-header`},E=[`src`],D={class:`galaxy-title`},O={class:`quadrants-grid`},k={class:`quadrant-title`},A={class:`p-4 base-content`},j={class:`flex flex-column gap-3`},M={class:`flex align-items-center gap-2`},N={class:`base-title`},P={class:`base-details`},F={class:`detail-item`},I={class:`detail-value`},L={class:`detail-item`},R={class:`detail-value`},ge={class:`detail-item`},_e={class:`glyph-value`},ve={class:`panel-content-with-image`},ye=[`href`],z=[`src`,`onClick`],be=`Royal Space Society`,B=4,xe=10080*60*1e3,V=v(a({__name:`Regions`,setup(a){let v=p([]),x=p(!0),V=p(null),H=p(window.innerWidth),U=p(!1),W=p({current:0,total:0,status:`Iniciando...`,percentage:0,estimatedMinutes:0}),G=[],K=!1,q=60*1e3/B,J=new Set,Y=new Map,Se=[`Uekenbe Shallows`,`Uklots Shallows`,`Eighba Fringe`,`Xecroften`,`Areyas`,`Sea of Ticrops`,`Udrupi Shallows`,`Jiessl Shallows`,`Becheeth Sector`,`Juhalbe Cluster`,`Larinar Boundary`,`Qudsor Void`,`Uhcheimri Void`,`Skitco`,`Emcalh Nebula`,`Gumita Nebula`,`Jajaja Cluster`],Ce={"Uekenbe Shallows":`Bajíos de Uekenbe`,"Uklots Shallows":`Bajíos de Uklots`,"Eighba Fringe":`Frontera de Eighba`,Xecroften:`Xecroften`,Areyas:`Areyas`,"Sea of Ticrops":`Mar de Ticrops`,"Udrupi Shallows":`Bajíos de Udrupi`,"Jiessl Shallows":`Bajíos de Jiessl`,"Becheeth Sector":`Sector Becheeth`,"Juhalbe Cluster":`Cúmulo de Juhalbe`,"Larinar Boundary":`Frontera de Larinar`,"Qudsor Void":`Vacío de Qudsor`,"Uhcheimri Void":`Vacío de Uhcheimri`,Skitco:`Skitco`,"Emcalh Nebula":`Nebulosa de Emcalh`,"Gumita Nebula":`Nebulosa de Gumita`,"Jajaja Cluster":`Cúmulo de Jajaja`},we={"Uekenbe Shallows":`2141F7EC0D24`,"Uklots Shallows":`01B8032FE9B0`,Xecroften:`01B8F7EC0D25`,Areyas:`0080F8EBDD24`,"Udrupi Shallows":`10BCF7EBFD24`,"Jiessl Shallows":`01A7F7EBFD25`,"Becheeth Sector":`00E6F7EC1D24`,"Juhalbe Cluster":`01B6F6EC0D23`,"Sea of Ticrops":`007A0EEC7D10`,"Larinar Boundary":`010F0AAEBB96`,"Eighba Fringe":`0133FEA34C10`,"Emcalh Nebula":`0041F9F846D8`,"Qudsor Void":`007CFF9B4CB0`,"Uhcheimri Void":`00EAFBF21696`,Skitco:`00F30266CF95`,"Gumita Nebula":`140FF7EBFD23`},Te={Cross:`Cruzado`,"Star systems":`Sistemas`,Planets:`Planetas`,Starships:`Naves`,"Multi-Tools":`Multiherramientas`,Euclid:`Euclides`,"Hilbert Dimension":`Dimensión de Hilbert`},Ee=m(()=>H.value<768?1:H.value<1200?2:3),X=async()=>{if(!(K||G.length===0)){for(K=!0;G.length>0&&J.size<B;){let e=G.shift();if(!e)break;if(J.has(e.id)){G.push({...e,priority:(e.priority||0)-1});continue}J.add(e.id);try{let t=await e.execute();e.resolve(t)}catch(t){e.reject(t)}finally{J.delete(e.id),G.length>0&&await new Promise(e=>setTimeout(e,q))}}K=!1,G.length>0&&setTimeout(()=>X(),q)}},De=(e,t,n=0)=>new Promise((r,i)=>{let a=`query-${e}`,o=Y.get(a);if(o&&Date.now()-o.timestamp<xe){r(o.data);return}let s={id:e,execute:async()=>{let e=await t();return Y.set(a,{data:e,timestamp:Date.now()}),e},resolve:r,reject:i,priority:n},c=G.findIndex(e=>(e.priority||0)<n);c===-1?G.push(s):G.splice(c,0,s),K||X()}),Oe=async e=>De(`image-${e}`,async()=>{let t=await re(e);return t?await ne(t):null},1),Z=async e=>{try{let t={regions:e.map(e=>({...e,statsLoading:!1})),timestamp:Date.now(),version:`1.1`};localStorage.setItem(`rss-regions-cache`,JSON.stringify(t))}catch(e){console.error(`Error guardando caché:`,e)}},ke=async()=>{try{let e=localStorage.getItem(`rss-regions-cache`);if(e){let t=JSON.parse(e);if(Date.now()-t.timestamp<1440*60*1e3*7&&t.version===`1.1`)return console.log(`✅ Datos cargados desde caché`),t.regions;console.log(`⚠️ Caché expirada o versión antigua, recargando...`)}}catch{console.log(`ℹ️ No hay caché disponible`)}return null},Q=(e,t,n)=>{let r=t>0?Math.round(e/t*100):0,i=t-e;W.value={current:e,total:t,status:n,percentage:r,estimatedMinutes:Math.ceil(i*q/(60*1e3))}},Ae=async()=>{try{let e=await ke();if(e&&e.length>0){v.value=e,Q(e.length,e.length,`Datos cargados desde caché`),x.value=!1;return}Q(0,0,`Obteniendo lista de regiones...`);let t=(await ie(be,0)).filter(e=>Se.some(t=>e.Region.includes(t))),n=t.length;Q(0,n,`Cargando imágenes de regiones...`);let i=[];for(let e=0;e<t.length;e++){let a=t[e];try{Q(e+1,n,`Cargando imagen de ${a.Region}...`),a.imageUrl=await Oe(a.Region),a.stats=null,a.statsLoaded=!1,a.statsLoading=!1,i.push(a),v.value=[...i],await r(),(e+1)%2==0&&await Z(i)}catch(e){console.error(`Error procesando región ${a.Region}:`,e),a.imageUrl=null,a.stats=null,a.statsLoaded=!1,a.statsLoading=!1,i.push(a)}}await Z(i),Q(n,n,`¡Imágenes cargadas! Las estadísticas se cargarán bajo demanda.`),x.value=!1}catch(e){V.value=`Error al cargar las regiones`,console.error(e),x.value=!1}};n(async()=>{window.addEventListener(`resize`,()=>H.value=window.innerWidth),await Ae()});let $=e=>e.trim().replace(/\s+/g,`_`).replace(/\//g,`_`),je=e=>{window.open(e,`_blank`)};function Me(e){let t=e.split(`:`);if(t.length!==4)return``;let[n,r,i]=t,a=parseInt(n,16),o=parseInt(r,16),s=parseInt(i,16),c=2049,l=2047,u=a<=2046?a+c:a-l,d=s<=2046?s+c:s-l,f=o<=126?o+129:o-127,p=u.toString(16).toUpperCase().padStart(3,`0`),m=f.toString(16).toUpperCase().padStart(2,`0`),h=d.toString(16).toUpperCase().padStart(3,`0`);return`0000`+m+h+p}function Ne(e,t){return we[e]||Me(t)}function Pe(e){let t=e.toString();return Te[t]||t}let Fe=m(()=>{let e=new Map;return v.value.forEach(t=>{e.has(t.Galaxy)||e.set(t.Galaxy,{name:t.Galaxy,quadrants:[],image:t.imageUrl?.modal});let n=e.get(t.Galaxy),r=n.quadrants.find(e=>e.name===t.Quadrant);r||(r={name:t.Quadrant,regions:[]},n.quadrants.push(r)),r.regions.push(t)}),Array.from(e.values())});function Ie(e){return U.value?e:Ce[e]||e}return(n,r)=>(l(),o(s(y),{class:`p-0 galactic-card`},{content:i(()=>[g(`div`,ae,[g(`div`,oe,[g(`div`,se,[r[2]||=g(`div`,{class:`header-container`},[g(`a`,{href:`https://nomanssky.fandom.com/es/wiki/Royal_Space_Society`,target:`_blank`},[g(`div`,{class:`rss-logo`},[g(`img`,{src:`/RSSWikiPageCreator/assets/images/shared/logo-white.png`,class:`logo-image`,alt:`RSS Logo`})])]),g(`div`,{class:`title-theme-container`},[g(`h1`,{class:`galactic-title`},[g(`span`,{class:`title-text`},`Regiones - Royal Space Society`)])])],-1),r[3]||=g(`p`,{class:`text-stellar-gray mt-2`},`Explora las regiones de la Royal Space Society`,-1),g(`div`,ce,[c(s(te),{modelValue:U.value,"onUpdate:modelValue":r[0]||=e=>U.value=e,binary:!0,inputId:`toggle-language`},null,8,[`modelValue`]),r[1]||=g(`label`,{for:`toggle-language`,class:`cursor-pointer select-none`},` Mostrar nombres de las regiones en inglés `,-1)])])]),x.value?(l(),o(s(b),{key:0,class:`galactic-panel mt-6 loading-panel`},{header:i(()=>[...r[4]||=[g(`h2`,{class:`panel-title`},[g(`i`,{class:`pi pi-spin pi-spinner`}),f(` Cargando datos...`)],-1)]]),default:i(()=>[g(`div`,le,[g(`p`,ue,t(W.value.status),1),c(s(ee),{value:W.value.percentage,class:`mt-3`},null,8,[`value`]),g(`div`,de,[g(`p`,null,[r[5]||=f(` Progreso: `,-1),g(`strong`,null,t(W.value.current),1),r[6]||=f(` de `,-1),g(`strong`,null,t(W.value.total),1),r[7]||=f(` consultas completadas `,-1),W.value.percentage>0?(l(),_(`span`,fe,` (`+t(W.value.percentage)+`%) `,1)):d(``,!0)]),W.value.estimatedMinutes>0?(l(),_(`p`,pe,` Tiempo estimado restante: ~`+t(W.value.estimatedMinutes)+` minuto`+t(W.value.estimatedMinutes===1?``:`s`),1)):d(``,!0)])])]),_:1})):d(``,!0),x.value?d(``,!0):(l(),o(s(b),{key:1,class:`galactic-panel mt-6`},{header:i(()=>[...r[8]||=[g(`h2`,{class:`panel-title`},`Información de las regiones`,-1)]]),default:i(()=>[g(`div`,me,[g(`p`,null,[r[9]||=f(` Total de regiones registradas: `,-1),g(`strong`,null,t(v.value.length),1)]),g(`p`,he,[r[10]||=f(` Nivel de seguridad: `,-1),c(s(S),{value:`Clasificado RSS`,severity:`info`,class:`category-tag`})]),g(`p`,C,`Última actualización: `+t(new Date().toLocaleDateString()),1)])]),_:1})),r[17]||=g(`br`,null,null,-1),!x.value&&!V.value?(l(),_(`div`,w,[(l(!0),_(h,null,e(Fe.value,(n,a)=>(l(),o(s(b),{key:a,class:`galaxy-panel`,toggleable:``,collapsed:``},{header:i(()=>[g(`div`,T,[n.image?(l(),_(`img`,{key:0,src:n.image,class:`galaxy-image`},null,8,E)):d(``,!0),g(`h2`,D,t(Pe(n.name)),1),c(s(S),{value:`${n.quadrants.length} ${n.quadrants.length===1?`Cuadrante`:`Cuadrantes`}`,severity:`info`},null,8,[`value`])])]),default:i(()=>[g(`div`,O,[(l(!0),_(h,null,e(n.quadrants,(n,a)=>(l(),o(s(b),{key:a,class:`quadrant-panel`,toggleable:``,collapsed:``},{header:i(()=>[g(`h3`,k,[r[11]||=g(`i`,{class:`pi pi-th-large`},null,-1),f(` `+t(n.name)+` `,1),c(s(S),{value:`${n.regions.length} ${n.regions.length===1?`Región`:`Regiones`}`,severity:`info`},null,8,[`value`])])]),default:i(()=>[g(`div`,{class:`regions-grid`,style:u(`grid-template-columns: repeat(${Ee.value}, 3fr)`)},[(l(!0),_(h,null,e(n.regions,(e,n)=>(l(),o(s(y),{key:n,class:`region-card`},{content:i(()=>[g(`div`,A,[g(`div`,j,[g(`div`,M,[g(`h3`,N,t(Ie(e.Region)),1),c(s(S),{value:e.Galaxy,severity:`info`,class:`category-tag`},null,8,[`value`])]),g(`div`,P,[g(`div`,F,[r[12]||=g(`span`,{class:`detail-label`},`Cuadrante:`,-1),g(`span`,I,t(e.Quadrant),1)]),g(`div`,L,[r[13]||=g(`span`,{class:`detail-label`},`Coordenadas:`,-1),g(`span`,R,t(e.Coordinates),1)]),g(`div`,ge,[r[14]||=g(`span`,{class:`detail-label`},`Glifos:`,-1),g(`span`,_e,t(Ne(e.Region,e.Coordinates)),1)])]),e.Region?(l(),o(s(b),{key:0,class:`builder-panel mt-3`},{header:i(()=>[...r[15]||=[g(`span`,{class:`builder-link-header`},`Enlaces de la Región`,-1)]]),default:i(()=>[g(`div`,ve,[g(`a`,{href:`https://nomanssky.fandom.com/wiki/${$(e.Region)}`,target:`_blank`,class:`builder-link`},[...r[16]||=[g(`i`,{class:`pi pi-external-link`},null,-1),f(` Ver detalles de la región `,-1)]],8,ye),e.imageUrl?(l(),_(`img`,{key:0,src:e.imageUrl.modal,alt:`Imagen de la base`,class:`panel-base-image`,onClick:t=>je(`https://nomanssky.fandom.com/wiki/${$(e.Region)}`)},null,8,z)):d(``,!0)])]),_:2},1024)):d(``,!0)])])]),_:2},1024))),128))],4)]),_:2},1024))),128))])]),_:2},1024))),128))])):d(``,!0)])]),_:1}))}}),[[`__scopeId`,`data-v-873d1f1f`]]);export{V as default};