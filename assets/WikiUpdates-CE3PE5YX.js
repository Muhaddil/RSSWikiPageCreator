import{d as M,r as o,c as V,x as E,a2 as U,y as R,a as c,o as r,f as d,k as p,b as s,t as i,b3 as A,h as u,U as j,W as F,g as m,aU as H,B as I,F as L,H as q,j as P,e as O,a9 as Y,p as G}from"./main-BFhWpmjg.js";import{_ as J}from"./logo-white-CwkOOWqZ.js";import{s as C}from"./index-D7gwbxNe.js";import{s as K}from"./index-AM6IVb4y.js";import{s as Q}from"./index-i59d1PBl.js";import{s as X}from"./index-TV4SBHl5.js";import"./index-DHFbA6Mw.js";const Z={class:"space-page-container"},ss={class:"flex items-start justify-between mb-6 header-container"},es={class:"flex flex-col"},ts={class:"header-container"},ls={class:"title-theme-container"},as={class:"galactic-title"},os={class:"title-text"},is={class:"text-stellar-gray mt-2"},ns={class:"text-stellar-gray mt-2"},rs={class:"filter-container mb-6 p-4 bg-space-dark rounded-lg"},ds={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},cs={class:"flex"},us={class:"block mb-2"},ms={class:"panel-content"},ps={class:"update-info mt-2"},vs={key:0,class:"loading-message"},gs={key:1,class:"error-message p-error"},fs={class:"p-4"},_s={class:"flex flex-column gap-3"},bs={class:"flex align-items-center gap-2"},hs={class:"update-title"},ks={class:"update-details"},ws={class:"detail-item"},ys={class:"detail-value"},xs={class:"detail-item"},$s={class:"detail-value"},Ss={class:"comment-box mt-3 p-3 bg-space-light rounded"},Vs={class:"mt-1"},Es={class:"mt-3"},Us=["href"],Ls=["href"],Cs=M({__name:"WikiUpdates",setup(Ts){const b=o([]),h=o(!0),v=o(null),k=o(window.innerWidth),g=o(500),f=o(""),n=o(!1),x=o(!1),T=V(()=>k.value<768?1:k.value<1200?2:3),W=V(()=>n.value?"https://nomanssky.fandom.com/api.php":"https://nomanssky.fandom.com/es/api.php"),B=o([{value:25,label:"25 resultados"},{value:50,label:"50 resultados"},{value:100,label:"100 resultados"},{value:200,label:"200 resultados"},{value:300,label:"300 resultados"},{value:400,label:"400 resultados"},{value:500,label:"500 resultados"}]),_=async()=>{try{h.value=!0,v.value=null;const a=new URLSearchParams({action:"query",list:"recentchanges",rcprop:"title|timestamp|user|comment|ids|flags|loginfo|revid|old_revid",rclimit:g.value.toString(),rcshow:"!bot",rcdir:"older",format:"json",origin:"*",...f.value&&{rcuser:f.value}}),e=await fetch(`${W.value}?${a.toString()}`);if(!e.ok)throw new Error("Error en la API de la wiki");const t=await e.json();if(t.error)throw new Error(t.error.info);b.value=t.query.recentchanges.map(l=>({title:l.title,timestamp:l.timestamp,user:l.user,comment:l.comment||"(sin comentario)",pageid:l.pageid,revid:l.revid,old_revid:l.old_revid}))}catch(a){v.value="Error al cargar actualizaciones",console.error(a)}finally{h.value=!1}};E(async()=>{window.addEventListener("resize",()=>k.value=window.innerWidth),await _()}),U(n,()=>{_()}),U(g,()=>{_()});const $=a=>a.trim().replace(/\s+/g,"_").replace(/\//g,"_"),z=a=>{const e=new Date,t=new Date(a),l=e.getTime()-t.getTime(),w=Math.floor(l/6e4);if(w<60)return`Hace ${w} min`;const y=Math.floor(w/60);return y<24?`Hace ${y} h`:`Hace ${Math.floor(y/24)} días`},D=a=>new Date(a).toLocaleString("es-ES",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"}),S=()=>{x.value=window.scrollY>300},N=()=>{window.scrollTo({top:0,behavior:"smooth"})};return E(()=>{window.addEventListener("scroll",S)}),R(()=>{window.removeEventListener("scroll",S)}),(a,e)=>(r(),c(L,null,[d(u(C),{class:"p-0 galactic-card"},{content:p(()=>[s("div",Z,[s("div",ss,[s("div",es,[e[3]||(e[3]=s("a",{href:"https://nomanssky.fandom.com/es/wiki/Royal_Space_Society",target:"_blank"},[s("div",{class:"wiki-logo"},[s("img",{src:J,class:"logo-image",alt:"Wiki Logo"})])],-1)),s("div",ts,[s("div",ls,[s("h1",as,[s("span",os,"Actualizaciones Recientes - Wiki "+i(n.value?"EN":"ES"),1)])])]),s("p",is," Últimos cambios en la wiki "+i(n.value?"inglesa":"española")+" de No Man's Sky ",1)]),s("p",ns,[d(A,{style:{"margin-right":"2rem"}})])]),s("div",rs,[s("div",ds,[s("div",null,[e[4]||(e[4]=s("label",{class:"block mb-6 text-stellar-blue font-medium"},"Resultados:",-1)),d(u(X),{modelValue:g.value,"onUpdate:modelValue":e[0]||(e[0]=t=>g.value=t),options:B.value,optionLabel:"label",optionValue:"value",class:"w-full ml-2",pt:{root:{class:"bg-space-light border-space-blue"},input:{class:"text-stellar-light"},trigger:{class:"bg-space-blue"}}},null,8,["modelValue","options"])]),s("div",null,[e[5]||(e[5]=s("label",{class:"block mb-2"},"Filtrar por usuario:",-1)),s("div",cs,[d(u(j),{modelValue:f.value,"onUpdate:modelValue":e[1]||(e[1]=t=>f.value=t),placeholder:"Nombre de usuario",class:"w-full"},null,8,["modelValue"]),s("button",{onClick:_,class:"p-button p-component ml-2"}," Buscar ")])])]),s("div",null,[s("label",us,[F(s("input",{type:"checkbox","onUpdate:modelValue":e[2]||(e[2]=t=>n.value=t),class:"mr-2"},null,512),[[H,n.value]]),e[6]||(e[6]=m(" Consultar wiki en inglés ",-1))])])]),d(u(Q),{class:"galactic-panel"},{header:p(()=>[...e[7]||(e[7]=[s("h2",{class:"panel-title"},"Información de Actualizaciones",-1)])]),default:p(()=>[s("div",ms,[s("p",null,[e[8]||(e[8]=m(" Total de cambios recientes: ",-1)),s("strong",null,i(b.value.length),1)]),s("p",ps,"Actualizado: "+i(new Date().toLocaleString("es-ES")),1)])]),_:1}),e[17]||(e[17]=s("br",null,null,-1)),h.value?(r(),c("div",vs,[...e[9]||(e[9]=[s("i",{class:"pi pi-spinner pi-spin"},null,-1),m(" Cargando actualizaciones... ",-1)])])):v.value?(r(),c("div",gs,[e[10]||(e[10]=s("i",{class:"pi pi-exclamation-triangle"},null,-1)),m(" "+i(v.value),1)])):(r(),c("div",{key:2,class:"grid gap-4",style:I(`grid-template-columns: repeat(${T.value}, 1fr)`)},[(r(!0),c(L,null,q(b.value,(t,l)=>(r(),P(u(C),{key:l,class:"update-card"},{content:p(()=>[s("div",fs,[s("div",_s,[s("div",bs,[s("h3",hs,i(t.title),1),d(u(K),{value:z(t.timestamp),severity:"info",class:"time-tag"},null,8,["value"])]),s("div",ks,[s("div",ws,[e[11]||(e[11]=s("span",{class:"detail-label"},"Usuario:",-1)),s("span",ys,i(t.user),1)]),s("div",xs,[e[12]||(e[12]=s("span",{class:"detail-label"},"Fecha:",-1)),s("span",$s,i(D(t.timestamp)),1)]),s("div",Ss,[e[13]||(e[13]=s("span",{class:"detail-label"},"Comentario:",-1)),s("p",Vs,i(t.comment),1)])]),s("div",Es,[s("a",{href:`https://nomanssky.fandom.com/${n.value?"":"es/"}wiki/${$(t.title)}`,target:"_blank",class:"wiki-link"},[...e[14]||(e[14]=[s("i",{class:"pi pi-external-link"},null,-1),m(" Ver página en la wiki ",-1)])],8,Us),e[16]||(e[16]=s("span",{class:"mx-2"},"|",-1)),s("a",{href:`https://nomanssky.fandom.com/${n.value?"":"es/"}wiki/${$(t.title)}?diff=${t.revid}&oldid=${t.old_revid}`,target:"_blank",class:"wiki-link"},[...e[15]||(e[15]=[s("i",{class:"pi pi-history"},null,-1),m(" Ver cambios ",-1)])],8,Ls)])])])]),_:2},1024))),128))],4))])]),_:1}),d(Y,{name:"fade"},{default:p(()=>[x.value?(r(),c("button",{key:0,onClick:N,class:"scroll-top-button"},[...e[18]||(e[18]=[s("i",{class:"pi pi-arrow-up"},null,-1)])])):O("",!0)]),_:1})],64))}}),js=G(Cs,[["__scopeId","data-v-96583537"]]);export{js as default};
