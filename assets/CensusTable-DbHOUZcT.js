import{A as e,At as t,D as n,E as r,W as i,_ as ee,c as a,ct as o,h as s,k as c,kt as te,l,m as u,nt as d,o as f,r as p,s as m,u as h}from"./runtime-core.esm-bundler-DchWbIG6.js";import{t as ne}from"./runtime-dom.esm-bundler-BLbTed6u.js";import{t as re}from"./button-B2IlAsp7.js";import"./portal-DzRr4Kdd.js";import"./baseinput-DGGDxDlI.js";import{t as g}from"./inputtext-8SA5CJIi.js";import{t as _}from"./_plugin-vue_export-helper-DyZRSbhD.js";import"./iconfield-pzYhGlfx.js";import"./select-C1SuYcp_.js";import"./check-DajuQgww.js";import"./chevrondown-DCmttgiT.js";import{t as v}from"./card-BcBQ0oRB.js";import"./minus-B1GCgViL.js";import{t as y}from"./panel-DiGYrp7H.js";import{t as b}from"./logo-white-BFvoBgAm.js";import{t as x}from"./tag-D6U4rC1k.js";import{t as ie}from"./paginator-Dz4ZXzlO.js";import"./inputnumber-BN8I_kfg.js";import{t as S}from"./dropdown-CUatBA3U.js";import{n as ae,t as oe}from"./api-ChuPdH1F.js";var se={class:`space-page-container`},ce={class:`filter-container mb-6`},le={class:`filter-row`},C={class:`year-filter`},w={class:`input-group`},T={class:`pagination-filter`},E={key:0,class:`rows-filter`},D={key:0,class:`filter-info`},O={class:`info-text`},k={key:0,class:`info-text`},A={class:`panel-content`},j={class:`security-level mt-2`},M={class:`update-info`},N={key:1,class:`loading-message`},P={key:2,class:`error-message p-error`},F={class:`p-4 base-content`},I={class:`flex flex-column gap-3`},L={class:`flex align-items-center gap-2`},R={class:`base-title`},z={class:`base-details`},B={class:`detail-item`},V={class:`detail-value`},H={class:`detail-item`},ue={class:`detail-value`},U={class:`flex gap-2`},de={class:`panel-content-with-image`},fe=[`href`],pe=[`src`,`onClick`],me=`Royal Space Society`,W=_(ee({__name:`CensusTable`,setup(ee){let _=d([]),b=d(!0),W=d(null),G=d(window.innerWidth),K=d(``),q=d(!0),J=d(0),Y=d(12),X=d(!1),he=[{label:`6 por página`,value:6},{label:`12 por página`,value:12},{label:`27 por página`,value:27},{label:`48 por página`,value:48}],ge=f(()=>q.value?_.value.slice(J.value,J.value+Y.value):_.value),_e=[{label:`Sí, usar paginación`,value:!0},{label:`No, mostrar todo`,value:!1}],ve=f(()=>G.value<768?1:G.value<1200?2:3),Z=async(e=0,t)=>{try{let n=await ae(me,e,t);await Promise.all(n.map(async e=>{e.imageUrl=await oe(e._pageName)})),_.value=[..._.value,...n],n.length===500&&await Z(e+500,t)}catch(e){W.value=`Error al cargar las bases`,console.error(e)}finally{b.value=!1}},ye=async()=>{_.value=[],b.value=!0,W.value=null,await Z(0,K.value)};r(async()=>{window.addEventListener(`resize`,()=>G.value=window.innerWidth),await Z(0,K.value)});let Q=e=>e.trim().replace(/\s+/g,`_`).replace(/\//g,`_`),be=e=>{window.open(e,`_blank`)},xe=()=>{J.value=0},$=()=>{X.value=window.scrollY>300},Se=()=>{window.scrollTo({top:0,behavior:`smooth`})};return r(()=>{window.addEventListener(`scroll`,$)}),n(()=>{window.removeEventListener(`scroll`,$)}),(n,r)=>(c(),h(p,null,[s(o(v),{class:`p-0 galactic-card`},{content:i(()=>[m(`div`,se,[r[18]||=m(`div`,{class:`flex items-start justify-between mb-6 header-container`},[m(`div`,{class:`flex flex-col`},[m(`a`,{href:`https://nomanssky.fandom.com/es/wiki/Royal_Space_Society`,target:`_blank`},[m(`div`,{class:`rss-logo`},[m(`img`,{src:`/RSSWikiPageCreator/assets/images/shared/logo-white.png`,class:`logo-image`,alt:`RSS Logo`})])]),m(`div`,{class:`header-container`},[m(`div`,{class:`title-theme-container`},[m(`h1`,{class:`galactic-title`},[m(`span`,{class:`title-text`},`Censo de Bases - Royal Space Society`)])])]),m(`p`,{class:`text-stellar-gray mt-2`},`Explora las bases espaciales de la Royal Space Society`)])],-1),m(`div`,ce,[m(`div`,le,[m(`div`,C,[r[4]||=m(`label`,{for:`yearInput`,class:`filter-label`},[m(`i`,{class:`pi pi-calendar mr-2`}),u(` Año del censo: `)],-1),m(`div`,w,[s(o(g),{id:`yearInput`,type:`number`,modelValue:K.value,"onUpdate:modelValue":r[0]||=e=>K.value=e,placeholder:`Ej. 2023`,class:`year-input`},null,8,[`modelValue`]),s(o(re),{onClick:ye,icon:`pi pi-search`,label:`Filtrar`,class:`filter-btn`,loading:b.value},null,8,[`loading`])])]),m(`div`,T,[r[5]||=m(`label`,{class:`filter-label`},[m(`i`,{class:`pi pi-list mr-2`}),u(` Paginación: `)],-1),s(o(S),{modelValue:q.value,"onUpdate:modelValue":r[1]||=e=>q.value=e,options:_e,optionLabel:`label`,optionValue:`value`,class:`pagination-dropdown`},null,8,[`modelValue`])]),q.value?(c(),h(`div`,E,[r[6]||=m(`label`,{class:`filter-label`},[m(`i`,{class:`pi pi-th-large mr-2`}),u(` Elementos: `)],-1),s(o(S),{modelValue:Y.value,"onUpdate:modelValue":r[2]||=e=>Y.value=e,options:he,optionLabel:`label`,optionValue:`value`,class:`rows-dropdown`,onChange:xe},null,8,[`modelValue`])])):l(``,!0)]),_.value.length>0?(c(),h(`div`,D,[m(`span`,O,[r[7]||=m(`i`,{class:`pi pi-database mr-1`},null,-1),u(` Total: `+t(_.value.length)+` bases `,1)]),q.value?(c(),h(`span`,k,[r[8]||=m(`i`,{class:`pi pi-eye mr-1`},null,-1),u(` Mostrando: `+t(Math.min(J.value+Y.value,_.value.length))+` de `+t(_.value.length),1)])):l(``,!0)])):l(``,!0)]),q.value&&_.value.length>Y.value?(c(),a(o(ie),{key:0,first:J.value,rows:Y.value,totalRecords:_.value.length,onPage:r[3]||=e=>{J.value=e.first,Y.value=e.rows},class:`mb-4`},null,8,[`first`,`rows`,`totalRecords`])):l(``,!0),s(o(y),{class:`galactic-panel mt-6`},{header:i(()=>[...r[9]||=[m(`h2`,{class:`panel-title`},`Información del Censo`,-1)]]),default:i(()=>[m(`div`,A,[m(`p`,null,[r[10]||=u(` Total de bases registradas: `,-1),m(`strong`,null,t(_.value.length),1)]),m(`p`,j,[r[11]||=u(` Nivel de seguridad: `,-1),s(o(x),{value:`Clasificado RSS`,severity:`info`,class:`category-tag`})]),m(`p`,M,`Última actualización: `+t(new Date().toLocaleDateString()),1)])]),_:1}),r[19]||=m(`br`,null,null,-1),b.value?(c(),h(`div`,N,[...r[12]||=[m(`i`,{class:`pi pi-spinner pi-spin`},null,-1),u(` Cargando bases espaciales... `,-1)]])):W.value?(c(),h(`div`,P,[r[13]||=m(`i`,{class:`pi pi-exclamation-triangle`},null,-1),u(` `+t(W.value),1)])):(c(),h(`div`,{key:3,class:`grid gap-4`,style:te(`grid-template-columns: repeat(${ve.value}, 1fr)`)},[(c(!0),h(p,null,e(ge.value,(e,n)=>(c(),a(o(v),{key:n,class:`link-card`},{content:i(()=>[m(`div`,F,[m(`div`,I,[m(`div`,L,[m(`h3`,R,t(e.Name),1),s(o(x),{value:e.Platform,severity:`info`,class:`category-tag`},null,8,[`value`])]),m(`div`,z,[m(`div`,B,[r[14]||=m(`span`,{class:`detail-label`},`Jugador:`,-1),m(`span`,V,t(e.CensusPlayer),1)]),m(`div`,H,[r[15]||=m(`span`,{class:`detail-label`},`Sistema:`,-1),m(`span`,ue,t(e.System),1)]),m(`div`,U,[s(o(x),{value:e.Mode,severity:`success`,class:`category-tag`},null,8,[`value`]),s(o(x),{value:`Llegada: ${e.CensusArrival}`,severity:`warning`,class:`category-tag`},null,8,[`value`]),s(o(x),{value:`Renovación: ${e.CensusRenewal}`,severity:`danger`,class:`category-tag`},null,8,[`value`])])]),e.Name?(c(),a(o(y),{key:0,class:`builder-panel mt-3`},{header:i(()=>[...r[16]||=[m(`span`,{class:`builder-link-header`},`Enlaces de la Base`,-1)]]),default:i(()=>[m(`div`,de,[m(`a`,{href:`https://nomanssky.fandom.com/wiki/${Q(e._pageName)}`,target:`_blank`,class:`builder-link`},[...r[17]||=[m(`i`,{class:`pi pi-external-link`},null,-1),u(` Ver detalles de construcción `,-1)]],8,fe),e.imageUrl?(c(),h(`img`,{key:0,src:e.imageUrl.panel,alt:`Imagen de la base`,class:`panel-base-image`,onClick:t=>be(`https://nomanssky.fandom.com/wiki/${Q(e._pageName)}`)},null,8,pe)):l(``,!0)])]),_:2},1024)):l(``,!0)])])]),_:2},1024))),128))],4))])]),_:1}),s(ne,{name:`fade`},{default:i(()=>[X.value?(c(),h(`button`,{key:0,onClick:Se,class:`scroll-top-button`},[...r[20]||=[m(`i`,{class:`pi pi-arrow-up`},null,-1)]])):l(``,!0)]),_:1})],64))}}),[[`__scopeId`,`data-v-fe111142`]]);export{W as default};