import{_ as q}from"./PageCreator.vue_vue_type_script_setup_true_lang-DuvHhvt5.js";import{u as R,b as S,_ as U}from"./main-i1yO6yH7.js";import{s as $}from"./pinia-DWbtGVIA.js";import{f as _,c as y,b,G as z,y as p,r as C,w as I,d as s,P as u,J as A,F as i,a8 as F,L as g,i as k,K as G}from"./@vue-mPvUAMx_.js";import{T as M}from"./TextareaInput-C1a8QIy3.js";import{u as H,P as N}from"./vue-toastification-Bo5yvJQE.js";import{s as L}from"./primevue-D6uD4tpJ.js";import"./@vueuse-ju9LKoy1.js";import"./parse-mediawiki-template--QNsUU1W.js";import"./@vercel-CRs7IrDO.js";import"./vue-router-ByKNVg0b.js";import"./@primeuix-dlw41lWO.js";import"./@primevue-D8p-tRAr.js";const J={class:"formatted-text"},K=_({__name:"baseOutput",setup(e){const a=R(),{censusrenewal:s}=$(a);return(e,a)=>(b(),y("pre",J,z(p(s)),1))}}),Q=S(K,[["__scopeId","data-v-41f504f8"]]),W={class:"code-container"},X={class:"checkbox-container"},Z=_({__name:"BaseInput",setup(e){const a=R(),{censusrenewal:t,release:n,name:l}=$(a),o=(new Date).getUTCFullYear(),r=n.value,c=C(!1),m=C("");function d(e){let a=function(e){const a=o,s=/censusrenewal\s*=\s*([^\n]*)/,t=e.match(s);if(t&&t[1]){let n=t[1].split(",").map((e=>e.trim()));if(0===n.length)return e.replace(s,`censusrenewal = ${a}`);if(c.value)for(let e=parseInt(n[n.length-1],10)+1;e<=a;e++)n.includes(e.toString())||n.push(e.toString());return n.includes(a.toString())||n.push(a.toString()),e.replace(s,`censusrenewal = ${n.join(", ")}`)}return e.trimEnd()+`\ncensusrenewal = ${a}`}(e);return a=function(e){let a=e.replace(/{{Version\|([^\n]*)}}/,`{{Version|${r}}}`);return a=a.replace(/\| release =\s*([^\n]*)/,`| release = ${r}`),a}(a),a}function v(){if(t.value){const e=d(t.value);a.censusrenewal=e,m.value=function(e){const a=e.match(/\| name =\s*([^\n]*)/);return a&&a[1]?a[1].trim():""}(t.value),a.name=m.value}}I(c,(()=>{v()})),I(t,(()=>{v()}));const f=H();function _(e){f.error(e,{position:N.BOTTOM_RIGHT})}function j(){const e=[{field:a.name,message:"¡Pon el nombre de tu base!"}];for(const{field:a,message:s}of e)if(!a)return void _(s);f.success("¡Creada!",{position:N.BOTTOM_RIGHT}),window.open(`https://nomanssky.fandom.com/wiki/${a.name}?action=edit#editform`,"_blank")}return(e,a)=>(b(),y("div",W,[a[6]||(a[6]=s("h2",{class:"title"},"Actualización del Censo RSS",-1)),a[7]||(a[7]=s("p",{class:"description"}," Pega aquí el código que deseas actualizar. Los valores se actualizarán automáticamente con el año actual y la versión más reciente. ",-1)),s("div",X,[s("label",null,[A(s("input",{type:"checkbox","onUpdate:modelValue":a[0]||(a[0]=e=>c.value=e)},null,512),[[F,c.value]]),a[3]||(a[3]=i(" Añadir todos los años desde el último registrado. "))]),a[4]||(a[4]=s("div",{class:"note"},[s("p",null,[s("strong",null,"Nota:"),i(" Selecciona esto antes de ingresar tu código o puede haber errores.")])],-1))]),u(U,{modelValue:p(l),"onUpdate:modelValue":a[1]||(a[1]=e=>k(l)?l.value=e:null),"help-img":"base/baseName","help-title":"Nombre de la Base:",label:"Nombre de la Base",tooltip:"Escribe exactamente como se ve en el juego. Cuidado con 0 (cero) y O (o)."},{default:g((()=>a[5]||(a[5]=[i(" Escribe exactamente como se ve en el juego. Cuidado con 0 (cero) y O (o). ")]))),_:1,__:[5]},8,["modelValue"]),u(p(L),{as:"a",label:"Ir a la base",severity:"warn",onClick:j}),a[8]||(a[8]=s("br",null,null,-1)),a[9]||(a[9]=s("br",null,null,-1)),u(M,{modelValue:p(t),"onUpdate:modelValue":a[2]||(a[2]=e=>k(t)?t.value=e:null),label:"Pega tu código aquí",placeholder:"Ejemplo de código a pegar",class:"textarea-input"},null,8,["modelValue"]),a[10]||(a[10]=s("div",{class:"note"},[s("p",null,[s("strong",null,"Nota:"),i(" Si no tienes ningún año en el campo de "),s("code",null,"censusrenewal"),i(", el sistema fallará. ")])],-1))]))}}),ee=S(Z,[["__scopeId","data-v-0637f808"]]),_e=_({__name:"BaseRenewal",setup:e=>(e,a)=>(b(),G(q,null,{input:g((()=>[u(ee)])),output:g((()=>[u(Q)])),_:1}))});export{_e as default};
