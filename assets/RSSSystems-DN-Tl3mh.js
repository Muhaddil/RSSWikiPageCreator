"use strict";import{d as ne,r as t,c as D,a2 as re,x as de,y as ue,a as m,o as d,f as c,k as f,b as a,b3 as me,h as n,U as F,g as v,t as o,B as ve,F as M,H as pe,j as ye,e as Se,a9 as ge,p as De}from"./main-boNpAIdz.js";import{_ as fe}from"./logo-white-CwkOOWqZ.js";import{s as N}from"./index-CUqxVh01.js";import{s as W}from"./index-COzRaV4G.js";import{s as we}from"./index-CS6lwThR.js";import{s as I}from"./index-DnF_nj1t.js";import{s as he}from"./index-8eqAPkaL.js";import"./index-D7O2Nh7t.js";import"./index-j6lqbAAi.js";const be={class:"space-page-container"},Ce={class:"flex items-start justify-between mb-6 header-container"},ke={class:"filter-container mb-6 p-4 bg-space-dark rounded-lg"},Re={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},Le={class:"panel-content"},xe={key:0,class:"loading-message"},_e={key:1,class:"error-message p-error"},Ee={class:"p-4"},Te={class:"flex flex-column gap-3"},Ge={class:"update-title"},Pe={class:"update-details"},Ue={class:"detail-item"},Ve={class:"detail-item"},Fe={class:"detail-item"},Me={class:"detail-value"},Ne={class:"detail-item"},We={class:"glyph-value"},Ie={class:"detail-item"},je={class:"detail-value"},Be={class:"detail-item"},qe={class:"detail-value"},ze={class:"detail-item"},Ae={class:"detail-value"},$e={class:"detail-item"},He={class:"detail-value"},Oe={class:"detail-item"},Ye={class:"detail-value"},Je={class:"detail-item"},Ke={class:"detail-value"},Qe={class:"detail-item"},Xe={class:"detail-value"},Ze={class:"detail-item"},ea={class:"detail-value"},aa={class:"detail-item"},sa={class:"detail-value"},la={class:"detail-item"},oa={class:"detail-value"},ta=ne({__name:"RSSSystems",setup(ca){const j={origin:"*",format:"json",limit:"500"},h=t(window.innerWidth),_=t(!1),p=t(0),b=t(12),E=t(0),B=l=>{const e=new URLSearchParams;return Object.entries(l).forEach(([s,i])=>{e.set(s,Array.isArray(i)?i.join(","):String(i))}),`https://nomanssky.fandom.com/api.php?${e.toString()}`},q=(l=0)=>B({...j,action:"cargoquery",tables:"Systems",fields:["Systems._pageName=SystemName","Systems._pageTitle=SystemTitle","Systems.Coordinates","Systems.Galaxy","Systems.Region","Systems.Class","Systems.Color","Systems.Faction","Systems.Planets","Systems.Moons","Systems.Civilized","Systems.Distance","Systems.Platform","Systems.SystemID","Systems.Game_Release","Systems.Economy","Systems.Wealth","Systems.Buy","Systems.Sell","Systems.Conflict","Systems.Water","Systems.Dissonant","Systems.Gateway","Systems.Discovered","Systems.DiscoveredLink","Systems.ResearchTeam","Systems.MultipleStars","Systems.NoShow","Systems.Misc"].join(","),order_by:"Systems._pageName ASC",where:"Systems.Civilized='Royal Space Society'",offset:l}),z=l=>{if(!l?.cargoquery)throw new Error("La respuesta de la API no contiene datos v\xE1lidos");return l.cargoquery.map(({title:e})=>({SystemName:e.SystemName||"Desconocido",SystemTitle:e.SystemTitle||"Desconocido",Coordinates:e.Coordinates||"Desconocido",Galaxy:e.Galaxy||"Desconocido",Region:e.Region||"Desconocido",Class:e.Class||"Desconocido",Color:e.Color||"Desconocido",Faction:e.Faction||"Desconocido",Planets:e.Planets||"Desconocido",Moons:e.Moons||"Desconocido",Civilized:e.Civilized||"Desconocido",Distance:e.Distance||"Desconocido",Platform:e.Platform||"Desconocido",SystemID:e.SystemID||"Desconocido",Game_Release:e.Game_Release||"Desconocido",Economy:e.Economy||"Desconocido",Wealth:e.Wealth||"Desconocido",Buy:e.Buy||"Desconocido",Sell:e.Sell||"Desconocido",Conflict:e.Conflict||"Desconocido",Water:e.Water||"Desconocido",Dissonant:e.Dissonant||"Desconocido",Gateway:e.Gateway||"Desconocido",Discovered:e.Discovered||"Desconocido",DiscoveredLink:e.DiscoveredLink||"Desconocido",ResearchTeam:e.ResearchTeam||"Desconocido",MultipleStars:e.MultipleStars||"Desconocido",NoShow:e.NoShow||"Desconocido",Misc:e.Misc||"Desconocido"}))},A=async(l=0)=>{const e=q(l),s=await fetch(e);if(!s.ok)throw new Error(`Error HTTP: ${s.status}`);const i=await s.json();if(i.error)throw new Error(`Error API: ${i.error.info}`);return z(i)},u=t([]),w=t([]),C=t(!1),k=t(null),y=t(""),S=t(""),r=t(""),g=t(""),$=D(()=>w.value.slice(p.value,p.value+b.value)),T=()=>{w.value=u.value.filter(l=>(!y.value||l.SystemName.toLowerCase().includes(y.value.toLowerCase()))&&(!S.value||l.Galaxy===S.value)&&(!g.value||l.Region===g.value)&&(!r.value||l.DiscoveredLink&&l.DiscoveredLink.toLowerCase().includes(r.value.toLowerCase())||l.Discovered&&l.Discovered.toLowerCase().includes(r.value.toLowerCase())||l.ResearchTeam&&l.ResearchTeam.toLowerCase().includes(r.value.toLowerCase()))),E.value=w.value.length,p.value=0},G=D(()=>[...new Set(u.value.map(l=>l.Galaxy))].sort()),H=D(()=>[...new Set(u.value.map(l=>l.Region))].sort()),O=D(()=>{const l=new Set;return u.value.forEach(e=>{e.DiscoveredLink&&e.DiscoveredLink!=="Desconocido"&&l.add(e.DiscoveredLink.trim()),e.Discovered&&e.Discovered!=="Desconocido"&&l.add(e.Discovered.trim()),e.ResearchTeam&&e.ResearchTeam!=="Desconocido"&&l.add(e.ResearchTeam.trim())}),[...l].sort()}),Y=D(()=>h.value<768?1:h.value<1200?2:3);re([y,S,r,g],T),de(async()=>{window.addEventListener("resize",()=>h.value=window.innerWidth),window.addEventListener("scroll",P),C.value=!0;try{u.value=await A(),T()}catch(l){console.error(l),k.value="Error al cargar sistemas"}finally{C.value=!1}}),ue(()=>{window.removeEventListener("scroll",P)});const P=()=>{_.value=window.scrollY>300},J=()=>{window.scrollTo({top:0,behavior:"smooth"})};function K(l){const e=l.split(":");if(e.length!==4)return"";const[s,i,X]=e,R=parseInt(s,16),L=parseInt(i,16),x=parseInt(X,16),Z="000",U=2049,V=2047,ee=129,ae=127,se=R<=2046?R+U:R-V,le=x<=2046?x+U:x-V,oe=L<=126?L+ee:L-ae,te=se.toString(16).toUpperCase().padStart(3,"0"),ie=oe.toString(16).toUpperCase().padStart(2,"0"),ce=le.toString(16).toUpperCase().padStart(3,"0");return"0"+Z+ie+ce+te}function Q(l){return K(l)}return(l,e)=>(d(),m(M,null,[c(n(N),{class:"p-0 galactic-card"},{content:f(()=>[a("div",be,[a("div",Ce,[e[6]||(e[6]=a("div",{class:"flex flex-col"},[a("a",{href:"https://nomanssky.fandom.com/es/wiki/Royal_Space_Society",target:"_blank"},[a("div",{class:"wiki-logo"},[a("img",{src:fe,class:"logo-image",alt:"Wiki Logo"})])]),a("div",{class:"header-container"},[a("div",{class:"title-theme-container"},[a("h1",{class:"galactic-title"},[a("span",{class:"title-text"},"Sistemas RSS")])])]),a("p",{class:"text-stellar-gray mt-2"},"Listado de sistemas de la Royal Space Society")],-1)),c(me)]),a("div",ke,[a("div",Re,[a("div",null,[e[7]||(e[7]=a("label",{class:"block mb-2"},"Buscar nombre:",-1)),c(n(F),{modelValue:y.value,"onUpdate:modelValue":e[0]||(e[0]=s=>y.value=s),placeholder:"Buscar sistema...",class:"w-full"},null,8,["modelValue"])]),a("div",null,[e[8]||(e[8]=a("label",{class:"block mb-2"},"Filtrar galaxia:",-1)),c(n(I),{modelValue:S.value,"onUpdate:modelValue":e[1]||(e[1]=s=>S.value=s),options:G.value,placeholder:"Todas las galaxias",showClear:"",class:"w-full"},null,8,["modelValue","options"])]),a("div",null,[e[9]||(e[9]=a("label",{class:"block mb-2"},"Filtrar regi\xF3n:",-1)),c(n(I),{modelValue:g.value,"onUpdate:modelValue":e[2]||(e[2]=s=>g.value=s),options:H.value,placeholder:"Todas las regiones",showClear:"",class:"w-full"},null,8,["modelValue","options"])]),a("div",null,[e[10]||(e[10]=a("label",{class:"block mb-2"},"Filtrar por usuario:",-1)),c(n(F),{modelValue:r.value,"onUpdate:modelValue":e[3]||(e[3]=s=>r.value=s),placeholder:"Buscar descubridor o equipo...",class:"w-full"},null,8,["modelValue"])])])]),c(n(we),{class:"galactic-panel"},{header:f(()=>e[11]||(e[11]=[a("h2",{class:"panel-title"},"Estad\xEDsticas",-1)])),default:f(()=>[a("div",Le,[a("p",null,[e[12]||(e[12]=v(" \u{1F310} Sistemas totales: ",-1)),a("strong",null,o(u.value.length),1)]),a("p",null,[e[13]||(e[13]=v(" \u{1F50D} Filtrados: ",-1)),a("strong",null,o(w.value.length),1)]),a("p",null,[e[14]||(e[14]=v(" \u{1FA90} Galaxias: ",-1)),a("strong",null,o(G.value.length),1)]),a("p",null,[e[15]||(e[15]=v(" \u{1F464} Usuarios \xFAnicos: ",-1)),a("strong",null,o(O.value.length),1)])])]),_:1}),e[32]||(e[32]=a("br",null,null,-1)),c(n(he),{first:p.value,"onUpdate:first":e[4]||(e[4]=s=>p.value=s),rows:b.value,"onUpdate:rows":e[5]||(e[5]=s=>b.value=s),totalRecords:E.value,rowsPerPageOptions:[6,12,18,24,30,36,48],class:"mt-4"},null,8,["first","rows","totalRecords"]),e[33]||(e[33]=a("br",null,null,-1)),C.value?(d(),m("div",xe,e[16]||(e[16]=[a("i",{class:"pi pi-spinner pi-spin"},null,-1),v(" Cargando sistemas... ",-1)]))):k.value?(d(),m("div",_e,[e[17]||(e[17]=a("i",{class:"pi pi-exclamation-triangle"},null,-1)),v(" "+o(k.value),1)])):(d(),m("div",{key:2,class:"grid gap-4",style:ve(`grid-template-columns: repeat(${Y.value}, 1fr)`)},[(d(!0),m(M,null,pe($.value,(s,i)=>(d(),ye(n(N),{key:i,class:"update-card"},{content:f(()=>[a("div",Ee,[a("div",Te,[a("h3",Ge,o(s.SystemName),1),a("div",Pe,[a("div",Ue,[e[18]||(e[18]=a("span",{class:"detail-label"},"Regi\xF3n:",-1)),c(n(W),{value:s.Region,class:"category-tag"},null,8,["value"])]),a("div",Ve,[e[19]||(e[19]=a("span",{class:"detail-label"},"Galaxia:",-1)),c(n(W),{value:s.Galaxy,class:"category-tag"},null,8,["value"])]),a("div",Fe,[e[20]||(e[20]=a("span",{class:"detail-label"},"Coordenadas:",-1)),a("span",Me,o(s.Coordinates),1)]),a("div",Ne,[e[21]||(e[21]=a("span",{class:"detail-label"},"Glifos:",-1)),a("span",We,o(Q(s.Coordinates)),1)]),a("div",Ie,[e[22]||(e[22]=a("span",{class:"detail-label"},"Clase:",-1)),a("span",je,o(s.Class),1)]),a("div",Be,[e[23]||(e[23]=a("span",{class:"detail-label"},"Color:",-1)),a("span",qe,o(s.Color),1)]),a("div",ze,[e[24]||(e[24]=a("span",{class:"detail-label"},"Facci\xF3n:",-1)),a("span",Ae,o(s.Faction),1)]),a("div",$e,[e[25]||(e[25]=a("span",{class:"detail-label"},"Planetas:",-1)),a("span",He,o(s.Planets),1)]),a("div",Oe,[e[26]||(e[26]=a("span",{class:"detail-label"},"Lunas:",-1)),a("span",Ye,o(s.Moons),1)]),a("div",Je,[e[27]||(e[27]=a("span",{class:"detail-label"},"Descubridor:",-1)),a("span",Ke,o(s.Discovered&&s.Discovered!=="Desconocido"?s.Discovered:s.DiscoveredLink),1)]),a("div",Qe,[e[28]||(e[28]=a("span",{class:"detail-label"},"Equipo investigaci\xF3n:",-1)),a("span",Xe,o(s.ResearchTeam),1)]),a("div",Ze,[e[29]||(e[29]=a("span",{class:"detail-label"},"Econom\xEDa:",-1)),a("span",ea,o(s.Economy),1)]),a("div",aa,[e[30]||(e[30]=a("span",{class:"detail-label"},"Riqueza:",-1)),a("span",sa,o(s.Wealth),1)]),a("div",la,[e[31]||(e[31]=a("span",{class:"detail-label"},"Conflictos:",-1)),a("span",oa,o(s.Conflict),1)])])])])]),_:2},1024))),128))],4))])]),_:1}),c(ge,{name:"fade"},{default:f(()=>[_.value?(d(),m("button",{key:0,onClick:J,class:"scroll-top-button"},e[34]||(e[34]=[a("i",{class:"pi pi-arrow-up"},null,-1)]))):Se("",!0)]),_:1})],64))}}),ia=De(ta,[["__scopeId","data-v-87fcc8c2"]]);export{ia as default};
