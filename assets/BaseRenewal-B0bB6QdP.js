import{At as e,G as t,V as n,W as r,Z as i,_ as a,c as o,ct as s,h as c,k as l,m as u,nt as d,s as f,u as p}from"./runtime-core.esm-bundler-CNadvJx8.js";import{i as m}from"./runtime-dom.esm-bundler-rkPjeQEv.js";import{t as h}from"./button-D1ppH4Ef.js";import"./portal-BOmEmGK0.js";import"./core-DwCp9VXr.js";import{f as g,s as _,t as v}from"./SanitisedTextInput-B65CT8Sz.js";import"./fluid-D9Vb3Rz7.js";import"./baseinput-DhitGjnO.js";import"./inputtext-CKVrimjR.js";import"./dialog-Cbplccpf.js";import{t as y}from"./_plugin-vue_export-helper-DyZRSbhD.js";import{r as b,t as x}from"./dist-0fpFBDr7.js";import"./iconfield-DkDn1MGT.js";import"./card-BviZZTYj.js";import{t as S}from"./PageCreator-DiZbo2HB.js";import"./textarea-DstjXQn8.js";import{t as C}from"./TextareaInput-CchS-qUl.js";var w={class:`formatted-text`},T=y(a({__name:`baseOutput`,setup(t){let n=_(),{censusrenewal:r}=g(n);return(t,n)=>(l(),p(`pre`,w,e(s(r)),1))}}),[[`__scopeId`,`data-v-41f504f8`]]),E={class:`code-container`},D={class:`checkbox-container`},O=y(a({__name:`BaseInput`,setup(e){let a=_(),{censusrenewal:o,release:y,name:S}=g(a),w=new Date().getUTCFullYear(),T=y.value,O=d(!1),k=d(``);function A(e){let t=w,n=/censusrenewal\s*=\s*([^\n]*)/,r=e.match(n);if(r&&r[1]){let i=r[1].split(`,`).map(e=>e.trim());if(i.length===0)return e.replace(n,`censusrenewal = ${t}`);if(O.value){let e=parseInt(i[i.length-1],10);for(let n=e+1;n<=t;n++)i.includes(n.toString())||i.push(n.toString())}return i.includes(t.toString())||i.push(t.toString()),e.replace(n,`censusrenewal = ${i.join(`, `)}`)}else return e.trimEnd()+`\ncensusrenewal = ${t}`}function j(e){let t=/{{Version\|([^\n]*)}}/,n=/\| release =\s*([^\n]*)/,r=e.replace(t,`{{Version|${T}}}`);return r=r.replace(n,`| release = ${T}`),r}function M(e){let t=A(e);return t=j(t),t}function N(e){let t=e.match(/\| name =\s*([^\n]*)/);return t&&t[1]?t[1].trim():``}function P(){o.value&&(a.censusrenewal=M(o.value),k.value=N(o.value),a.name=k.value)}n(O,()=>{P()}),n(o,()=>{P()});let F=b();function I(e){F.error(e,{position:x.BOTTOM_RIGHT})}function L(){let e=[{field:a.name,message:`¡Pon el nombre de tu base!`}];for(let{field:t,message:n}of e)if(!t){I(n);return}F.success(`¡Creada!`,{position:x.BOTTOM_RIGHT}),window.open(`https://nomanssky.fandom.com/wiki/${a.name}?action=edit#editform`,`_blank`)}return(e,n)=>(l(),p(`div`,E,[n[6]||=f(`h2`,{class:`title`},`Actualización del Censo RSS`,-1),n[7]||=f(`p`,{class:`description`},` Pega aquí el código que deseas actualizar. Los valores se actualizarán automáticamente con el año actual y la versión más reciente. `,-1),f(`div`,D,[f(`label`,null,[t(f(`input`,{type:`checkbox`,"onUpdate:modelValue":n[0]||=e=>O.value=e},null,512),[[m,O.value]]),n[3]||=u(` Añadir todos los años desde el último registrado. `,-1)]),n[4]||=f(`div`,{class:`note`},[f(`p`,null,[f(`strong`,null,`Nota:`),u(` Selecciona esto antes de ingresar tu código o puede haber errores.`)])],-1)]),c(v,{modelValue:s(S),"onUpdate:modelValue":n[1]||=e=>i(S)?S.value=e:null,"help-img":`base/baseName`,"help-title":`Nombre de la Base:`,label:`Nombre de la Base`,tooltip:`Escribe exactamente como se ve en el juego. Cuidado con 0 (cero) y O (o).`},{default:r(()=>[...n[5]||=[u(` Escribe exactamente como se ve en el juego. Cuidado con 0 (cero) y O (o). `,-1)]]),_:1},8,[`modelValue`]),c(s(h),{as:`a`,label:`Ir a la base`,severity:`warn`,onClick:L}),n[8]||=f(`br`,null,null,-1),n[9]||=f(`br`,null,null,-1),c(C,{modelValue:s(o),"onUpdate:modelValue":n[2]||=e=>i(o)?o.value=e:null,label:`Pega tu código aquí`,placeholder:`Ejemplo de código a pegar`,class:`textarea-input`},null,8,[`modelValue`]),n[10]||=f(`div`,{class:`note`},[f(`p`,null,[f(`strong`,null,`Nota:`),u(` Si no tienes ningún año en el campo de `),f(`code`,null,`censusrenewal`),u(`, el sistema fallará. `)])],-1)]))}}),[[`__scopeId`,`data-v-0637f808`]]),k=a({__name:`BaseRenewal`,setup(e){return(e,t)=>(l(),o(S,null,{input:r(()=>[c(O)]),output:r(()=>[c(T)]),_:1}))}});export{k as default};