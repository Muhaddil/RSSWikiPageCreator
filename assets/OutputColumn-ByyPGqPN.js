import{v as X,m as Y,n as M}from"./runtime-dom.esm-bundler-CX6Z4ERK.js";import{ar as $,cN as U,cM as C,b$ as B,bh as p,ag as g,ah as n,c5 as D,bQ as _,aT as E,an as b,Z as w,cL as P,bp as h,bn as z,ad as L,bH as S,b0 as N,cA as K,cK as ee,cg as te,ao as k,ae as y,af as I,c3 as c,bv as q,bs as x,br as ae,al as ne,b_ as le,a$ as oe,b2 as se,a2 as ie}from"./links-BQViK150.js";import{_ as A}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{b as Q,u as re}from"./main-h9NCHA60.js";import{_ as F}from"./Explanation.vue_vue_type_script_setup_true_lang-Wv5nKSR1.js";const ue={class:"debug-skip-label is-flex"},pe=$({__name:"DebugActions",setup(e){const a=U(),{debug:t}=C(a),l=()=>localStorage.clear();return B((()=>document.documentElement.dataset.debug=t.value.toString())),(e,a)=>(p(),g(w,null,[n("label",ue,[D(n("input",{"onUpdate:modelValue":a[0]||(a[0]=e=>E(t)?t.value=e:null),class:"checkbox",type:"checkbox",id:"skipCheck"},null,512),[[X,_(t)]]),a[1]||(a[1]=b("Habilitar depuración (sin controles, sin ventanas emergentes)"))]),n("button",{class:"button is-danger is-small mx-4",id:"clearCache",onClick:l}," Borrar almacenamiento local ")],64))}}),de=A(pe,[["__scopeId","data-v-f6602541"]]),ce=["href"],me=$({__name:"CreatePageButton",setup(e){const a=P(),{pageName:t}=C(a),l=U(),{debug:n}=C(l),o=h(),s=h(!0),i=z({fail:"",idle:"Crear página"}),u=h(i.idle);function r(){const{isValidData:e,message:a}=Q(!1,n.value);o.value=e.value?K+"Special:EditPage/"+t.value:void 0,!e.value&&(i.fail=a.value,u.value=i.fail,s.value=e.value,setTimeout((()=>{u.value=i.idle,s.value=!0}),1500))}const c=L((()=>s.value?"is-outlined is-primary":"is-danger no-interaction"));return(e,a)=>(p(),g("a",{class:N([c.value,"button"]),href:o.value,id:"create",rel:"noopener noreferrer",target:"_blank",onClick:r},S(u.value),11,ce))}});function Z(e){var a;const t=null==(a=e.value)?void 0:a.innerText.replace(/\n{3,}/g,"\n\n").trim();return{articleText:h(t)}}const fe=$({__name:"CopyArticleButton",setup(e){const a=re(),{text:t,copy:l}=C(a),n=U(),{fullArticleElement:o,debug:s}=C(n),i=h(!0),u=h(!1),r=z({fail:"",idle:"Copiar código",success:"¡Copiado!"}),c=h(r.idle);function d(){t.value=ee(),l.value=!0;const{isValidData:e,message:a}=Q(s.value),{articleText:n}=Z(o);navigator.clipboard.writeText(n.value??""),l.value=!0,r.fail=a.value,c.value=e.value?r.success:r.fail,u.value=!0,i.value=e.value,setTimeout((()=>{c.value=r.idle,i.value=!0,u.value=!1}),1500)}const m=L((()=>{const e=u.value?"no-interaction":"";return`${i.value?"is-outlined is-primary":"is-danger"} ${e}`}));return(e,a)=>(p(),g("button",{class:N([m.value,"button"]),id:"copy",type:"button",onClick:d},S(c.value),3))}}),ve=["href"],R=$({__name:"WikiLink",props:{link:{},text:{}},setup(e){const a=e,t=L((()=>K+a.link));return(e,a)=>(p(),g("a",{href:t.value,rel:"noopener noreferrer",target:"_blank"},S(e.text),9,ve))}}),ge={class:"buttons"},be=["download","href"],Ye=$({__name:"Actions",setup(e){const a=P(),{name:t,pageName:l}=C(a),o=U(),{fullArticleElement:s}=C(o),i=L((()=>te(t.value)));B((()=>l.value=i.value));const u=L((()=>l.value+".txt")),r=h();function c(){const{articleText:e}=Z(s);r.value=e.value?"data:text/plain,"+encodeURIComponent(e.value):void 0}return(e,t)=>(p(),g(w,null,[t[1]||(t[1]=n("p",{class:"has-text-centered"},[b(" Primero debes copiar el código y luego pegarlo en la página wiki."),n("br"),b("Además, no olvides cargar las imágenes que hayas puesto aquí. ")],-1)),n("div",ge,[k(fe),n("a",{download:u.value,href:r.value,class:"button is-outlined is-primary",id:"download",onClick:c},"Descargar codigo",8,be),k(R,{class:"button is-outlined is-primary",link:"Special:Upload?multiple=true",text:"Subir Archivos"}),k(me),n("button",{class:"button is-warning",id:"reset",type:"reset",onClick:t[0]||(t[0]=e=>_(a).$reset())}," Restablecer entradas "),_(false)?(p(),y(de,{key:0})):I("",!0)])],64))}}),et=$({__name:"WikiTemplate",props:{templateName:{},isSingleLine:{type:Boolean,default:!0}},setup(e){const a=e.isSingleLine?"span":"div";return(e,t)=>(p(),g(w,null,[(p(),y(q(_(a)),null,{default:c((()=>[t[0]||(t[0]=n("span",null,"{{",-1)),n("span",null,S(e.templateName)+S(e.isSingleLine?"|":""),1)])),_:1})),n("span",null,[x(e.$slots,"default")]),(p(),y(q(_(a)),null,{default:c((()=>t[1]||(t[1]=[n("span",null,"}}",-1)]))),_:1}))],64))}}),_e={},he={class:"table"};function ye(e,a){return p(),g("div",he,[x(e.$slots,"default")])}const $e=A(_e,[["render",ye]]),ke={class:"table-cell text"},xe={class:"table-cell data"},Ce={key:1,class:"table-cell"},T=$({__name:"InputRow",setup:e=>(e,a)=>(p(),y($e,null,{default:c((()=>[e.$slots.label&&e.$slots.input?(p(),g(w,{key:0},[n("div",ke,[x(e.$slots,"label")]),n("div",xe,[x(e.$slots,"input")])],64)):(p(),g("div",Ce,[x(e.$slots,"default")]))])),_:3}))}),Se={for:"discoveredlinkInput"},we={for:"discoveredInput"},tt=$({__name:"DiscovererInputs",props:{type:{default:"Descubridor"}},setup(e){const a=P(),{discovered:t,discoveredlink:l,mode:o}=C(a);return(e,a)=>(p(),g(w,null,[k(T,null,{label:c((()=>a[3]||(a[3]=[n("label",{for:"mode"},"Modo de juego:",-1)]))),input:c((()=>[D(n("select",{"onUpdate:modelValue":a[0]||(a[0]=e=>E(o)?o.value=e:null),id:"mode"},a[4]||(a[4]=[n("option",{value:"Normal"},"Normal",-1),n("option",{value:"Relaxed"},"Relajado",-1),n("option",{value:"Survival"},"Survival",-1),n("option",{value:"Permadeath"},"Muerte permanente",-1),n("option",{value:"Creative"},"Creativo",-1),n("option",{value:"Custom"},"Personalizada",-1)]),512),[[Y,_(o)]])])),_:1}),_(t)?I("",!0):(p(),y(T,{key:0},{label:c((()=>[n("label",Se,"Nombre del "+S(e.type)+" en la wiki:",1)])),input:c((()=>[D(n("input",{"onUpdate:modelValue":a[1]||(a[1]=e=>E(l)?l.value=e:null),type:"text",id:"discoveredlinkInput"},null,512),[[M,_(l)]])])),_:1})),_(l)?I("",!0):(p(),y(T,{key:1},{label:c((()=>[n("label",we,"Alias del "+S(e.type)+" si no tiene wiki:",1)])),input:c((()=>[D(n("input",{"onUpdate:modelValue":a[2]||(a[2]=e=>E(t)?t.value=e:null),type:"text",id:"discoveredInput"},null,512),[[M,_(t)]])])),_:1}))],64))}}),Te={},De={class:"error"};function Ee(e,a){return p(),g("p",De,[x(e.$slots,"default")])}const H=A(Te,[["render",Ee]]),Ie={id:"portalglyphButtons"},Ve=["id","value"],Le={class:"glyph icon is-small"},Pe={name:"portalglyphs",id:"portalglyphsPreview",class:"glyph"},W=12,at=$({__name:"GlyphInput",setup(e){const a=/[0-9A-F]/,t=P(),{glyphs:l,isValidGlyphs:o}=C(t);function s(e){if(!e.target||!(e.target instanceof HTMLButtonElement||e.target instanceof HTMLElement&&e.target.parentElement instanceof HTMLButtonElement))return;const a=e.target instanceof HTMLButtonElement?e.target:e.target.parentElement;a instanceof HTMLButtonElement&&l.value.length<W&&(l.value+=a.value)}function i(){l.value=l.value.slice(0,-1)}function u(){l.value=l.value.toUpperCase().split("").filter((e=>a.test(e))).join("")}const r=e=>e.toString(16).toUpperCase(),d=L((()=>l.value.length===W&&!o.value));return(e,a)=>(p(),g(w,null,[k(T,null,{label:c((()=>[n("div",{class:"label-combo"},[a[1]||(a[1]=n("label",{for:"portalglyphsInput"},"Glifos:",-1)),n("button",{class:"button is-small is-danger",type:"button",id:"glyphDeleteButton",onClick:i}," ← Borrar ")]),k(F,{img:"shared/glyphs"},{heading:c((()=>a[2]||(a[2]=[b("Glifos del portal")]))),content:c((()=>a[3]||(a[3]=[b(" Encontrado en modo foto. Los glifos son específicos de cada planeta. "),n("iframe",{src:"https://nmspar.vercel.app/",sandbox:"allow-scripts allow-same-origin",title:"Glyph Reader",class:"explanation-embed",width:"450",height:"300"},"Lector de glifos",-1)]))),default:c((()=>[a[4]||(a[4]=b(" Encontrado en modo foto. Los glifos son específicos de cada planeta. "))])),_:1})])),input:c((()=>[D(n("input",{class:N([{"error-input":d.value},"glyphs-input"]),id:"portalglyphsInput",type:"text",maxlength:"12","onUpdate:modelValue":a[0]||(a[0]=e=>E(l)?l.value=e:null),onInput:u},null,34),[[M,_(l)]]),d.value?(p(),y(H,{key:0,class:"error"},{default:c((()=>[a[5]||(a[5]=b("No es una región valida de la RSS, por favor mira las ")),k(R,{link:"Regions_RSS",text:"regiones de la RSS"}),a[6]||(a[6]=b(" para obtener una lista de regiones validas."))])),_:1})):I("",!0)])),_:1}),k(T,null,{default:c((()=>[n("div",Ie,[(p(),g(w,null,ae(16,(e=>n("button",{class:"button",type:"button",id:"glyphButton"+e,value:r(e-1),onClick:s},[n("span",Le,S(r(e-1)),1)],8,Ve))),64))]),n("output",Pe,S(_(l)),1)])),_:1})],64))}}),Me=1e7,nt=$({__name:"InfoboxImageInput",setup(e){const a=P(),{image:t}=C(a),l=h(!1),o=h(!1),s=h(!1),i=h(!1);function u(e){var a;if(!(e.target&&e.target instanceof HTMLInputElement))return;const n=null==(a=e.target.files)?void 0:a[0];t.value=(null==n?void 0:n.name)??"",i.value=!!(n&&n.size>Me),!s.value&&!i.value&&(l.value=!0,o.value=!0,s.value=!0)}return B((()=>{o.value&&!l.value&&(o.value=!1)})),B((()=>{!s.value&&l.value&&(s.value=!0)})),(e,a)=>(p(),y(T,null,{label:c((()=>[a[10]||(a[10]=n("label",{for:"picInput"},"Nombre de la imagen principal, incluida la extensión del archivo:",-1)),k(F,{open:l.value,"onUpdate:open":a[0]||(a[0]=e=>l.value=e)},{heading:c((()=>a[2]||(a[2]=[b("Subir archivo")]))),content:c((()=>[o.value?(p(),g(w,{key:1},[n("span",null,[a[6]||(a[6]=b(" No olvides subir tu foto a la wiki en ")),k(R,{link:"Special:Upload?multiple=true",text:"Subir Archivos"}),a[7]||(a[7]=b(". El botón de carga solo completa automáticamente el nombre de la imagen en el código, no se carga automáticamente en la wiki. "))]),a[8]||(a[8]=n("div",{class:"mt-3"},[n("span",{class:"has-text-weight-bold"},"NOTA"),b(': Puede acceder a esta ventana emergente en cualquier momento haciendo clic en "?" junto al botón de carga de la imagen principal. ')],-1))],64)):(p(),g(w,{key:0},[a[3]||(a[3]=b(" Cualquier imagen que cargue aquí no se cargará en la wiki. Esto es sólo para autocompletar el nombre de la imagen. El tamaño máximo del archivo es 10 MB. Puedes subir tus fotos a la wiki en ")),k(R,{link:"Special:Upload?multiple=true",text:"Subir Archivos"}),a[4]||(a[4]=b(". ")),a[5]||(a[5]=n("iframe",{src:"https://nmscd.com/Image-Compressor/",title:"Compresor de imagen",class:"explanation-embed",width:"450",height:"300"},"Compresor de imagen",-1))],64))])),default:c((()=>[a[9]||(a[9]=b(" La imagen no se cargará en la wiki. Esto es sólo para autocompletar el nombre de la imagen. "))])),_:1},8,["open"])])),input:c((()=>[D(n("input",{"onUpdate:modelValue":a[1]||(a[1]=e=>E(t)?t.value=e:null),type:"text",id:"picInput"},null,512),[[M,_(t)]]),n("input",{class:N({"error-input":i.value}),type:"file",onChange:u},null,34),i.value?(p(),y(H,{key:0},{default:c((()=>a[11]||(a[11]=[b("Este archivo es demasiado grande para cargarlo en la wiki. El tamaño máximo del archivo es 10 MB. Comprime tu archivo aquí: "),n("a",{href:"https://nmscd.com/Image-Compressor/",target:"_blank",rel:"noopener noreferrer"},"Compresor de imagen",-1)]))),_:1})):I("",!0)])),_:1}))}}),lt=$({__name:"ResearchteamInput",setup(e){const a=P(),{researchteam:t}=C(a);return(e,a)=>(p(),y(T,null,{label:c((()=>a[1]||(a[1]=[n("label",null,"¿Perteneces a un gremio?",-1)]))),input:c((()=>[D(n("input",{"onUpdate:modelValue":a[0]||(a[0]=e=>E(t)?t.value=e:null),type:"text",id:"researchTeam",placeholder:"Si es que si, di a cual"},null,512),[[M,_(t)]])])),_:1}))}}),Be=["for"],Ne=["list","value","id","maxlength"],ot=$({__name:"SimpleInput",props:{label:{},identifier:{},list:{},img:{},modelValue:{},error:{},maxlength:{}},emits:["update:modelValue","change"],setup(e,{emit:a}){const t=a;function l(e){if(!(e.target instanceof HTMLInputElement))return;const a=e.target.value;t("update:modelValue",a)}return(e,a)=>(p(),y(T,null,{label:c((()=>[n("label",{for:e.identifier},S(e.label),9,Be),e.$slots.default?(p(),y(F,{key:0,img:e.img},ne({default:c((()=>[x(e.$slots,"default")])),_:2},[e.$slots.heading?{name:"heading",fn:c((()=>[x(e.$slots,"heading")])),key:"0"}:void 0,e.$slots.content?{name:"content",fn:c((()=>[x(e.$slots,"content")])),key:"1"}:void 0]),1032,["img"])):I("",!0)])),input:c((()=>[n("input",{class:N({"error-input":e.error}),list:e.list,value:e.modelValue,id:e.identifier,maxlength:e.maxlength,type:"text",onInput:l,onChange:a[0]||(a[0]=a=>e.$emit("change",a))},null,42,Ne),e.error?(p(),y(H,{key:0,innerHTML:e.error},null,8,["innerHTML"])):I("",!0)])),_:3}))}});function O(e){return"function"==typeof e?e():_(e)}typeof WorkerGlobalScope<"u"&&(globalThis,WorkerGlobalScope);const j=()=>{};function Ae(e,a){return function(...t){return new Promise(((l,n)=>{Promise.resolve(e((()=>a.apply(this,t)),{fn:a,thisArg:this,args:t})).then(l).catch(n)}))}}const Re=e=>e();function Ue(e,a={}){let t,l,n=j;const o=e=>{clearTimeout(e),n(),n=j};return s=>{const i=O(e),u=O(a.maxWait);return t&&o(t),i<=0||void 0!==u&&u<=0?(l&&(o(l),l=null),Promise.resolve(s())):new Promise(((e,r)=>{n=a.rejectOnCancel?r:e,u&&!l&&(l=setTimeout((()=>{t&&o(t),l=null,e(s())}),u)),t=setTimeout((()=>{l&&o(l),l=null,e(s())}),i)}))}}function Ge(e,a,t={}){const{eventFilter:l=Re,...n}=t;return le(e,Ae(l,a),n)}function st(e,a,t={}){const{debounce:l=0,maxWait:n,...o}=t;return Ge(e,a,{...o,eventFilter:Ue(l,{maxWait:n})})}const Fe={class:"explanation-content"},it=$({__name:"ExplanationError",props:{open:{type:Boolean},errorMessage:{}},emits:["update:open"],setup(e){const a=e,t=h("0 -100vh"),l=h(null);return B((()=>{a.open&&(t.value="0 -100vh",oe((()=>{var e;null==(e=l.value)||e.showModal(),t.value="0 0"})))})),(e,a)=>(p(),y(ie,{to:"body"},[n("dialog",{style:se({translate:t.value}),class:"explanation modal-content content",ref_key:"dialogElement",ref:l,onClose:a[0]||(a[0]=a=>e.$emit("update:open",!1))},[a[1]||(a[1]=n("h2",{class:"explanation-heading"},"Datos faltantes/incorrectos",-1)),n("div",Fe,S(e.errorMessage),1),a[2]||(a[2]=n("form",{method:"dialog"},[n("button",{class:"button",type:"submit",autofocus:""}," Cerrar ")],-1))],36)]))}}),He={},qe={id:"input",class:"column is-full-mobile"};function We(e,a){return p(),g("div",qe,[x(e.$slots,"default")])}const rt=A(He,[["render",We]]),Oe={},je={id:"output",class:"column is-full-mobile"};function ze(e,a){return p(),g("div",je,[x(e.$slots,"default")])}const ut=A(Oe,[["render",ze]]);export{H as E,rt as I,ut as O,$e as S,et as _,T as a,ot as b,nt as c,at as d,tt as e,lt as f,Ye as g,it as h,st as w};
