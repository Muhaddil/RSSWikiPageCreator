import{_ as q}from"./PageCreator.vue_vue_type_script_setup_true_lang-DWQFBd2r.js";import{d as x,u as R,s as h,a as N,o as b,t as z,h as m,p as $,r as B,y as S,z as A,b as s,f as i,A as M,g as u,B as U,k as g,l as V,_ as F,C as G,P as I,x as H,j as L}from"./main-BW6OG3nc.js";import{T as W}from"./TextareaInput-CwhrZeqi.js";import"./index-DheFGZAk.js";const J={class:"formatted-text"},K=x({__name:"baseOutput",setup(e){const a=R(),{censusrenewal:s}=h(a);return(e,a)=>(b(),N("pre",J,z(m(s)),1))}}),Q=$(K,[["__scopeId","data-v-41f504f8"]]),X={class:"code-container"},Z={class:"checkbox-container"},ee=x({__name:"BaseInput",setup(e){const a=R(),{censusrenewal:n,release:l,name:t}=h(a),o=(new Date).getUTCFullYear(),r=l.value,c=B(!1),d=B("");function p(e){let a=function(e){const a=o,s=/censusrenewal\s*=\s*([^\n]*)/,n=e.match(s);if(n&&n[1]){let l=n[1].split(",").map((e=>e.trim()));if(0===l.length)return e.replace(s,`censusrenewal = ${a}`);if(c.value)for(let e=parseInt(l[l.length-1],10)+1;e<=a;e++)l.includes(e.toString())||l.push(e.toString());return l.includes(a.toString())||l.push(a.toString()),e.replace(s,`censusrenewal = ${l.join(", ")}`)}return e.trimEnd()+`\ncensusrenewal = ${a}`}(e);return a=function(e){let a=e.replace(/{{Version\|([^\n]*)}}/,`{{Version|${r}}}`);return a=a.replace(/\| release =\s*([^\n]*)/,`| release = ${r}`),a}(a),a}function f(){if(n.value){const e=p(n.value);a.censusrenewal=e,d.value=function(e){const a=e.match(/\| name =\s*([^\n]*)/);return a&&a[1]?a[1].trim():""}(n.value),a.name=d.value}}S(c,(()=>{f()})),S(n,(()=>{f()}));const v=A();function _(e){v.error(e,{position:I.BOTTOM_RIGHT})}function w(){const e=[{field:a.name,message:"¡Pon el nombre de tu base!"}];for(const{field:a,message:s}of e)if(!a)return void _(s);v.success("¡Creada!",{position:I.BOTTOM_RIGHT}),window.open(`https://nomanssky.fandom.com/wiki/${a.name}?action=edit#editform`,"_blank")}return(e,a)=>(b(),N("div",X,[a[6]||(a[6]=s("h2",{class:"title"},"Actualización del Censo RSS",-1)),a[7]||(a[7]=s("p",{class:"description"}," Pega aquí el código que deseas actualizar. Los valores se actualizarán automáticamente con el año actual y la versión más reciente. ",-1)),s("div",Z,[s("label",null,[M(s("input",{type:"checkbox","onUpdate:modelValue":a[0]||(a[0]=e=>c.value=e)},null,512),[[U,c.value]]),a[3]||(a[3]=u(" Añadir todos los años desde el último registrado. "))]),a[4]||(a[4]=s("div",{class:"note"},[s("p",null,[s("strong",null,"Nota:"),u(" Selecciona esto antes de ingresar tu código o puede haber errores.")])],-1))]),i(F,{modelValue:m(t),"onUpdate:modelValue":a[1]||(a[1]=e=>V(t)?t.value=e:null),"help-img":"base/baseName","help-title":"Nombre de la Base:",label:"Nombre de la Base",tooltip:"Escribe exactamente como se ve en el juego. Cuidado con 0 (cero) y O (o)."},{default:g((()=>a[5]||(a[5]=[u(" Escribe exactamente como se ve en el juego. Cuidado con 0 (cero) y O (o). ")]))),_:1},8,["modelValue"]),i(m(G),{as:"a",label:"Ir a la base",severity:"warn",onClick:w}),a[8]||(a[8]=s("br",null,null,-1)),a[9]||(a[9]=s("br",null,null,-1)),i(W,{modelValue:m(n),"onUpdate:modelValue":a[2]||(a[2]=e=>V(n)?n.value=e:null),label:"Pega tu código aquí",placeholder:"Ejemplo de código a pegar",class:"textarea-input"},null,8,["modelValue"]),a[10]||(a[10]=s("div",{class:"note"},[s("p",null,[s("strong",null,"Nota:"),u(" Si no tienes ningún año en el campo de "),s("code",null,"censusrenewal"),u(", el sistema fallará. ")])],-1))]))}}),ae=$(ee,[["__scopeId","data-v-e5f42bf8"]]),le=x({__name:"BaseRenewal",setup:e=>(H((()=>{window.location.href="/RSSWikiPageCreator/indextest.html"})),(e,a)=>(b(),L(q,null,{input:g((()=>[i(ae)])),output:g((()=>[i(Q)])),_:1})))});export{le as default};
