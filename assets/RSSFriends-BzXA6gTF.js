import{l as I,r as j,s as A,b as D,p as N}from"./primevue-B8OBORDc.js";import{_ as L}from"./FileUploadNotice.vue_vue_type_script_setup_true_lang-CSw-icwr.js";import{_ as R,d as $,b as T}from"./main-B1XpOGx1.js";import{h as B}from"./html2canvas-pro-CfHe_fRF.js";import{r as M}from"./inputValidation-BfiqxGfe.js";import{d as G}from"./debounce-B7UkYTDg.js";import{Y as K,r as o,o as J,_ as O,v as Z,c as y,b as d,J as V,L as m,K as p,d as a,O as n,x as u,M as h,F as b,E as q,Q}from"./@vue-a971EMsi.js";import{w as Y}from"./@vueuse-WjXJKVhx.js";import"./@primevue-DHo6Bl5a.js";import"./@primeuix-DcC4a19q.js";import"./pinia-DP1x6KiP.js";import"./parse-mediawiki-template-BV5n0XSg.js";import"./vue-toastification-BPeKAQMF.js";const H="/RSSWikiPageCreator/assets/images/friends/marco.png",X={class:"upload-section"},ee={class:"columns is-mobile mb-0"},ae={class:"column is-flex"},le={class:"columns is-mobile mb-0"},se={class:"column is-flex"},oe={class:"rss-card-wrapper"},te=["src"],ne={class:"card-image-container"},ie=["src"],re={class:"card-race-icon-field"},de=["src"],ue={class:"download-section"},ce=K({__name:"RSSFriends",setup(e){const l=o(""),s=o(""),i=o(""),t=o(""),r=o(""),c=o(""),v=o(1),g=o(!1),f=o([{label:"Korvax",value:"Korvax",icon:"/RSSWikiPageCreator/assets/images/friends/holo-korvax.png"},{label:"Gek",value:"Gek",icon:"/RSSWikiPageCreator/assets/images/friends/holo-gek.png"},{label:"Vy'keen",value:"Vy'keen",icon:"/RSSWikiPageCreator/assets/images/friends/holo-vykeen.png"},{label:"Anomalía",value:"Anomalía",icon:"/RSSWikiPageCreator/assets/images/friends/holo-anomalia.png"},{label:"Autofago",value:"Autofago",icon:"/RSSWikiPageCreator/assets/images/friends/holo-autofago.png"},{label:"Viajero",value:"Viajero",icon:"/RSSWikiPageCreator/assets/images/friends/holo-viajero.png"}]),x=e=>{const a=e.files[0];if(a){const e=new FileReader;e.onload=e=>{var a;r.value=null==(a=e.target)?void 0:a.result},e.readAsDataURL(a)}},k=o(window.innerWidth);let S=null;const w=()=>{const e=window.innerWidth;Math.abs(e-k.value)>50&&(S&&clearTimeout(S),S=setTimeout((()=>{k.value=e}),500))};J((()=>{window.addEventListener("resize",w)})),O((()=>{window.removeEventListener("resize",w)}));const C=()=>{const e=f.value.find((e=>e.value===s.value));i.value=e?e.icon:""},_=async()=>{g.value=!0;const e=document.querySelector(".rss-card-wrapper");if(!e)return;const a=e.getBoundingClientRect(),l=Number(v.value)||1,s=(await B(e,{useCORS:!0,backgroundColor:null,width:a.width,height:a.height,scale:l})).toDataURL("image/png"),o=document.createElement("a");o.href=s,o.download="tarjeta.png",document.body.appendChild(o),o.click(),document.body.removeChild(o),g.value=!1};Z((()=>t.value=t.value.toUpperCase()));const P=o(!0);return Y(t,(e=>{const a=new RegExp(/(?:[0-9A-Za-z]{4}-){2}[0-9A-Za-z]{5}/),l=M(e,a);P.value=!e||l}),{debounce:G}),(e,o)=>(d(),y(Q,null,[k.value>768?(d(),V(u(N),{key:0,class:"rss-card-container"},{content:p((()=>[a("div",X,[a("div",ee,[o[5]||(o[5]=a("div",{class:"column is-flex is-align-items-center"},[a("label",null,"¿En blanco?")],-1)),a("div",ae,[n(u(I),{modelValue:c.value,"onUpdate:modelValue":o[0]||(o[0]=e=>c.value=e),"true-value":"true","false-value":"",class:"input-text",style:{width:"185px",left:"-12px"},binary:""},null,8,["modelValue"])])]),n(R,{"model-value":v.value.toString(),"onUpdate:modelValue":o[1]||(o[1]=e=>v.value=Math.min(Number(e)||1,10)),placeholder:"Número",class:"input-text",label:"Escala de salida de la foto",tooltip:"La escala máxima es 10"},null,8,["model-value"]),n(R,{modelValue:l.value,"onUpdate:modelValue":o[2]||(o[2]=e=>l.value=e),placeholder:"Nombre",class:"input-text",label:"Nombre del jugador"},null,8,["modelValue"]),a("div",le,[o[6]||(o[6]=a("div",{class:"column is-flex is-align-items-center"},[a("label",null,"Raza del Jugador")],-1)),a("div",se,[n($,{modelValue:s.value,"onUpdate:modelValue":[o[3]||(o[3]=e=>s.value=e),C],options:f.value.map((e=>e.value)),class:"input-text",style:{width:"185px",left:"-12px"}},null,8,["modelValue","options"])])]),n(R,{modelValue:t.value,"onUpdate:modelValue":o[4]||(o[4]=e=>t.value=e),placeholder:"Código de amigo",class:"input-text",label:"Código de amigo",invalid:!P.value,"error-message":"Formato de código de amigo incorrecto"},null,8,["modelValue","invalid"]),o[7]||(o[7]=a("br",null,null,-1)),n(u(j),{mode:"basic",name:"navImage",auto:!0,customUpload:!0,onUploader:x,accept:"image/*",chooseLabel:"Subir imagen"},{content:p((()=>[n(L)])),_:1})]),o[11]||(o[11]=a("br",null,null,-1)),a("div",oe,[a("img",{class:"rss-card-background",src:c.value?"/RSSWikiPageCreator/assets/images/friends/friend-white.png":"/RSSWikiPageCreator/assets/images/friends/friend.png",alt:"Tarjeta RSS"},null,8,te),a("div",ne,[r.value?(d(),y("img",{key:0,src:r.value,alt:"Imagen subida",class:"uploaded-image"},null,8,ie)):m("",!0)]),o[8]||(o[8]=a("div",{class:"card-name-title"}," Nombre ",-1)),o[9]||(o[9]=a("div",{class:"card-race-title"}," Raza ",-1)),o[10]||(o[10]=a("img",{class:"card-image-marco",src:H,alt:"Tarjeta RSS"},null,-1)),a("div",{class:h(["card-name-field",{"text-black":c.value,"text-white":!c.value}])},b(l.value),3),a("div",{class:h(["card-race-field",{"text-black":c.value,"text-white":!c.value}])},b(s.value),3),a("div",{class:h(["card-friend-code-field",{"text-black":c.value,"text-white":!c.value}])},b(t.value),3),a("div",re,[i.value?(d(),y("img",{key:0,src:i.value,alt:"Icono de raza",class:"race-icon"},null,8,de)):m("",!0)])]),o[12]||(o[12]=a("br",null,null,-1)),a("div",ue,[n(u(A),{onClick:_,class:"download-button",disabled:g.value,loading:g.value,style:{color:"white"}},{icon:p((()=>[g.value?(d(),V(u(D),{key:0,class:"pi pi-spin pi-spinner"})):m("",!0)])),default:p((()=>[q(" "+b(g.value?"Generando imagen...":"Descargar Carta"),1)])),_:1},8,["disabled","loading"])]),o[13]||(o[13]=a("br",null,null,-1)),o[14]||(o[14]=a("br",null,null,-1)),o[15]||(o[15]=a("br",null,null,-1)),o[16]||(o[16]=a("h2",null,[a("i",null,"Imágenes creadas por paux1926.")],-1))])),_:1})):m("",!0),k.value<=768?(d(),V(u(N),{key:1,class:"rss-card-container"},{content:p((()=>o[17]||(o[17]=[a("h1",null,"Esta página solo está disponible en pantallas de escritorio.",-1)]))),_:1})):m("",!0)],64))}}),_e=T(ce,[["__scopeId","data-v-9014a47d"]]);export{_e as default};
