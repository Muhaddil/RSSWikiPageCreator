import{d as A,r as u,c as L,x as N,y as F,a as i,o as t,f as n,k as v,b as e,j as x,e as m,g as r,h as l,U as O,Z as Y,t as d,B as Z,F as $,H,a9 as J,p as q}from"./main-B6p-vdzd.js";import{_ as G}from"./logo-white-CwkOOWqZ.js";import{s as R}from"./index-BWzmTX62.js";import{s as y}from"./index-J0pzViuh.js";import{s as I}from"./index-B4YVmC16.js";import{s as K}from"./index-DR2NA7E6.js";import{s as T}from"./index-DmTdHBa2.js";import{f as Q,a as X}from"./api-Bbdr4r4D.js";import"./index-DWFeWuc4.js";import"./index-Cb25hxL1.js";const ee={class:"space-page-container"},ae={class:"filter-container mb-6"},se={class:"filter-row"},le={class:"year-filter"},te={class:"input-group"},oe={class:"pagination-filter"},ne={key:0,class:"rows-filter"},ie={key:0,class:"filter-info"},re={class:"info-text"},ue={key:0,class:"info-text"},de={class:"panel-content"},ce={class:"security-level mt-2"},pe={class:"update-info"},ve={key:1,class:"loading-message"},me={key:2,class:"error-message p-error"},ge={class:"p-4 base-content"},fe={class:"flex flex-column gap-3"},ye={class:"flex align-items-center gap-2"},we={class:"base-title"},_e={class:"base-details"},be={class:"detail-item"},ke={class:"detail-value"},he={class:"detail-item"},Ce={class:"detail-value"},xe={class:"flex gap-2"},Se={class:"panel-content-with-image"},Ve=["href"],Be=["src","onClick"],Le="Royal Space Society",Ne=A({__name:"CensusTable",setup($e){const o=u([]),w=u(!0),_=u(null),h=u(window.innerWidth),b=u(""),g=u(!0),f=u(0),c=u(12),S=u(!1),E=[{label:"6 por página",value:6},{label:"12 por página",value:12},{label:"27 por página",value:27},{label:"48 por página",value:48}],U=L(()=>g.value?o.value.slice(f.value,f.value+c.value):o.value),P=[{label:"Sí, usar paginación",value:!0},{label:"No, mostrar todo",value:!1}],M=L(()=>h.value<768?1:h.value<1200?2:3),C=async(p=0,a)=>{try{const s=await Q(Le,p,a);await Promise.all(s.map(async k=>{k.imageUrl=await X(k._pageName)})),o.value=[...o.value,...s],s.length===500&&await C(p+500,a)}catch(s){_.value="Error al cargar las bases",console.error(s)}finally{w.value=!1}},D=async()=>{o.value=[],w.value=!0,_.value=null,await C(0,b.value)};N(async()=>{window.addEventListener("resize",()=>h.value=window.innerWidth),await C(0,b.value)});const V=p=>p.trim().replace(/\s+/g,"_").replace(/\//g,"_"),W=p=>{window.open(p,"_blank")},j=()=>{f.value=0},B=()=>{S.value=window.scrollY>300},z=()=>{window.scrollTo({top:0,behavior:"smooth"})};return N(()=>{window.addEventListener("scroll",B)}),F(()=>{window.removeEventListener("scroll",B)}),(p,a)=>(t(),i($,null,[n(l(R),{class:"p-0 galactic-card"},{content:v(()=>[e("div",ee,[a[18]||(a[18]=e("div",{class:"flex items-start justify-between mb-6 header-container"},[e("div",{class:"flex flex-col"},[e("a",{href:"https://nomanssky.fandom.com/es/wiki/Royal_Space_Society",target:"_blank"},[e("div",{class:"rss-logo"},[e("img",{src:G,class:"logo-image",alt:"RSS Logo"})])]),e("div",{class:"header-container"},[e("div",{class:"title-theme-container"},[e("h1",{class:"galactic-title"},[e("span",{class:"title-text"},"Censo de Bases - Royal Space Society")])])]),e("p",{class:"text-stellar-gray mt-2"},"Explora las bases espaciales de la Royal Space Society")])],-1)),e("div",ae,[e("div",se,[e("div",le,[a[4]||(a[4]=e("label",{for:"yearInput",class:"filter-label"},[e("i",{class:"pi pi-calendar mr-2"}),r(" Año del censo: ")],-1)),e("div",te,[n(l(O),{id:"yearInput",type:"number",modelValue:b.value,"onUpdate:modelValue":a[0]||(a[0]=s=>b.value=s),placeholder:"Ej. 2023",class:"year-input"},null,8,["modelValue"]),n(l(Y),{onClick:D,icon:"pi pi-search",label:"Filtrar",class:"filter-btn",loading:w.value},null,8,["loading"])])]),e("div",oe,[a[5]||(a[5]=e("label",{class:"filter-label"},[e("i",{class:"pi pi-list mr-2"}),r(" Paginación: ")],-1)),n(l(T),{modelValue:g.value,"onUpdate:modelValue":a[1]||(a[1]=s=>g.value=s),options:P,optionLabel:"label",optionValue:"value",class:"pagination-dropdown"},null,8,["modelValue"])]),g.value?(t(),i("div",ne,[a[6]||(a[6]=e("label",{class:"filter-label"},[e("i",{class:"pi pi-th-large mr-2"}),r(" Elementos: ")],-1)),n(l(T),{modelValue:c.value,"onUpdate:modelValue":a[2]||(a[2]=s=>c.value=s),options:E,optionLabel:"label",optionValue:"value",class:"rows-dropdown",onChange:j},null,8,["modelValue"])])):m("",!0)]),o.value.length>0?(t(),i("div",ie,[e("span",re,[a[7]||(a[7]=e("i",{class:"pi pi-database mr-1"},null,-1)),r(" Total: "+d(o.value.length)+" bases ",1)]),g.value?(t(),i("span",ue,[a[8]||(a[8]=e("i",{class:"pi pi-eye mr-1"},null,-1)),r(" Mostrando: "+d(Math.min(f.value+c.value,o.value.length))+" de "+d(o.value.length),1)])):m("",!0)])):m("",!0)]),g.value&&o.value.length>c.value?(t(),x(l(K),{key:0,first:f.value,rows:c.value,totalRecords:o.value.length,onPage:a[3]||(a[3]=s=>{f.value=s.first,c.value=s.rows}),class:"mb-4"},null,8,["first","rows","totalRecords"])):m("",!0),n(l(I),{class:"galactic-panel mt-6"},{header:v(()=>[...a[9]||(a[9]=[e("h2",{class:"panel-title"},"Información del Censo",-1)])]),default:v(()=>[e("div",de,[e("p",null,[a[10]||(a[10]=r(" Total de bases registradas: ",-1)),e("strong",null,d(o.value.length),1)]),e("p",ce,[a[11]||(a[11]=r(" Nivel de seguridad: ",-1)),n(l(y),{value:"Clasificado RSS",severity:"info",class:"category-tag"})]),e("p",pe,"Última actualización: "+d(new Date().toLocaleDateString()),1)])]),_:1}),a[19]||(a[19]=e("br",null,null,-1)),w.value?(t(),i("div",ve,[...a[12]||(a[12]=[e("i",{class:"pi pi-spinner pi-spin"},null,-1),r(" Cargando bases espaciales... ",-1)])])):_.value?(t(),i("div",me,[a[13]||(a[13]=e("i",{class:"pi pi-exclamation-triangle"},null,-1)),r(" "+d(_.value),1)])):(t(),i("div",{key:3,class:"grid gap-4",style:Z(`grid-template-columns: repeat(${M.value}, 1fr)`)},[(t(!0),i($,null,H(U.value,(s,k)=>(t(),x(l(R),{key:k,class:"link-card"},{content:v(()=>[e("div",ge,[e("div",fe,[e("div",ye,[e("h3",we,d(s.Name),1),n(l(y),{value:s.Platform,severity:"info",class:"category-tag"},null,8,["value"])]),e("div",_e,[e("div",be,[a[14]||(a[14]=e("span",{class:"detail-label"},"Jugador:",-1)),e("span",ke,d(s.CensusPlayer),1)]),e("div",he,[a[15]||(a[15]=e("span",{class:"detail-label"},"Sistema:",-1)),e("span",Ce,d(s.System),1)]),e("div",xe,[n(l(y),{value:s.Mode,severity:"success",class:"category-tag"},null,8,["value"]),n(l(y),{value:`Llegada: ${s.CensusArrival}`,severity:"warning",class:"category-tag"},null,8,["value"]),n(l(y),{value:`Renovación: ${s.CensusRenewal}`,severity:"danger",class:"category-tag"},null,8,["value"])])]),s.Name?(t(),x(l(I),{key:0,class:"builder-panel mt-3"},{header:v(()=>[...a[16]||(a[16]=[e("span",{class:"builder-link-header"},"Enlaces de la Base",-1)])]),default:v(()=>[e("div",Se,[e("a",{href:`https://nomanssky.fandom.com/wiki/${V(s._pageName)}`,target:"_blank",class:"builder-link"},[...a[17]||(a[17]=[e("i",{class:"pi pi-external-link"},null,-1),r(" Ver detalles de construcción ",-1)])],8,Ve),s.imageUrl?(t(),i("img",{key:0,src:s.imageUrl.panel,alt:"Imagen de la base",class:"panel-base-image",onClick:Re=>W(`https://nomanssky.fandom.com/wiki/${V(s._pageName)}`)},null,8,Be)):m("",!0)])]),_:2},1024)):m("",!0)])])]),_:2},1024))),128))],4))])]),_:1}),n(J,{name:"fade"},{default:v(()=>[S.value?(t(),i("button",{key:0,onClick:z,class:"scroll-top-button"},[...a[20]||(a[20]=[e("i",{class:"pi pi-arrow-up"},null,-1)])])):m("",!0)]),_:1})],64))}}),Ae=q(Ne,[["__scopeId","data-v-b43a64c5"]]);export{Ae as default};
