import{v as X,m as Y,n as M}from"./runtime-dom.esm-bundler-C7FQoPvl.js";import{ar as $,cN as U,cM as C,b$ as B,bh as d,ag as b,ah as n,c5 as E,bQ as _,aT as D,an as g,Z as w,cL as P,bp as y,bn as z,ad as L,bH as S,b0 as N,cA as K,cK as ee,cg as te,ao as k,ae as h,af as I,c3 as u,bv as q,bs as x,bt as ae,br as ne,al as le,a$ as oe,b2 as se,a2 as ie,b_ as re}from"./links-DPobPadd.js";import{_ as A}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{b as Q,u as ue}from"./main-SJKTdnjE.js";import{_ as F}from"./Explanation.vue_vue_type_script_setup_true_lang-0DKQTuP-.js";const pe={class:"debug-skip-label is-flex"},de=$({__name:"DebugActions",setup(e){const a=U(),{debug:t}=C(a),l=()=>localStorage.clear();return B((()=>document.documentElement.dataset.debug=t.value.toString())),(e,a)=>(d(),b(w,null,[n("label",pe,[E(n("input",{"onUpdate:modelValue":a[0]||(a[0]=e=>D(t)?t.value=e:null),class:"checkbox",type:"checkbox",id:"skipCheck"},null,512),[[X,_(t)]]),a[1]||(a[1]=g("Habilitar depuración (sin controles, sin ventanas emergentes)"))]),n("button",{class:"button is-danger is-small mx-4",id:"clearCache",onClick:l}," Borrar almacenamiento local ")],64))}}),ce=A(de,[["__scopeId","data-v-f6602541"]]),me=["href"],fe=$({__name:"CreatePageButton",setup(e){const a=P(),{pageName:t}=C(a),l=U(),{debug:n}=C(l),o=y(),s=y(!0),u=z({fail:"",idle:"Crear página"}),i=y(u.idle);function r(){const{isValidData:e,message:a}=Q(!1,n.value);o.value=e.value?K+"Special:EditPage/"+t.value:void 0,!e.value&&(u.fail=a.value,i.value=u.fail,s.value=e.value,setTimeout((()=>{i.value=u.idle,s.value=!0}),1500))}const c=L((()=>s.value?"is-outlined is-primary":"is-danger no-interaction"));return(e,a)=>(d(),b("a",{class:N([c.value,"button"]),href:o.value,id:"create",rel:"noopener noreferrer",target:"_blank",onClick:r},S(i.value),11,me))}});function Z(e){var a;const t=null==(a=e.value)?void 0:a.innerText.replace(/\n{3,}/g,"\n\n").trim();return{articleText:y(t)}}const ge=$({__name:"CopyArticleButton",setup(e){const a=ue(),{text:t,copy:l}=C(a),n=U(),{fullArticleElement:o,debug:s}=C(n),u=y(!0),i=y(!1),r=z({fail:"",idle:"Copiar código",success:"¡Copiado!"}),c=y(r.idle);function p(){t.value=ee(),l.value=!0;const{isValidData:e,message:a}=Q(s.value),{articleText:n}=Z(o);navigator.clipboard.writeText(n.value??""),l.value=!0,r.fail=a.value,c.value=e.value?r.success:r.fail,i.value=!0,u.value=e.value,setTimeout((()=>{c.value=r.idle,u.value=!0,i.value=!1}),1500)}const m=L((()=>{const e=i.value?"no-interaction":"";return`${u.value?"is-outlined is-primary":"is-danger"} ${e}`}));return(e,a)=>(d(),b("button",{class:N([m.value,"button"]),id:"copy",type:"button",onClick:p},S(c.value),3))}}),ve=["href"],R=$({__name:"WikiLink",props:{link:{},text:{}},setup(e){const a=e,t=L((()=>K+a.link));return(e,a)=>(d(),b("a",{href:t.value,rel:"noopener noreferrer",target:"_blank"},S(e.text),9,ve))}}),be={class:"buttons"},_e=["download","href"],et=$({__name:"Actions",setup(e){const a=P(),{name:t,pageName:l}=C(a),o=U(),{fullArticleElement:s}=C(o),u=L((()=>te(t.value)));B((()=>l.value=u.value));const i=L((()=>l.value+".txt")),r=y();function c(){const{articleText:e}=Z(s);r.value=e.value?"data:text/plain,"+encodeURIComponent(e.value):void 0}return(e,t)=>(d(),b(w,null,[t[1]||(t[1]=n("p",{class:"has-text-centered"},[g(" Primero debes copiar el código y luego pegarlo en la página wiki."),n("br"),g("Además, no olvides cargar las imágenes que hayas puesto aquí. ")],-1)),n("div",be,[k(ge),n("a",{download:i.value,href:r.value,class:"button is-outlined is-primary",id:"download",onClick:c},"Descargar codigo",8,_e),k(R,{class:"button is-outlined is-primary",link:"Special:Upload?multiple=true",text:"Subir Archivos"}),k(fe),n("button",{class:"button is-warning",id:"reset",type:"reset",onClick:t[0]||(t[0]=e=>_(a).$reset())}," Restablecer entradas "),_(false)?(d(),h(ce,{key:0})):I("",!0)])],64))}}),tt=$({__name:"WikiTemplate",props:{templateName:{},isSingleLine:{type:Boolean,default:!0}},setup(e){const a=e.isSingleLine?"span":"div";return(e,t)=>(d(),b(w,null,[(d(),h(q(_(a)),null,{default:u((()=>[t[0]||(t[0]=n("span",null,"{{",-1)),n("span",null,S(e.templateName)+S(e.isSingleLine?"|":""),1)])),_:1})),n("span",null,[x(e.$slots,"default")]),(d(),h(q(_(a)),null,{default:u((()=>t[1]||(t[1]=[n("span",null,"}}",-1)]))),_:1}))],64))}}),ye={},he={class:"table"};function $e(e,a){return d(),b("div",he,[x(e.$slots,"default")])}const ke=A(ye,[["render",$e]]),xe={class:"table-cell text"},Ce={class:"table-cell data"},Se={key:1,class:"table-cell"},T=$({__name:"InputRow",setup:e=>(e,a)=>(d(),h(ke,null,{default:u((()=>[e.$slots.label&&e.$slots.input?(d(),b(w,{key:0},[n("div",xe,[x(e.$slots,"label")]),n("div",Ce,[x(e.$slots,"input")])],64)):(d(),b("div",Se,[x(e.$slots,"default")]))])),_:3}))}),we={for:"discoveredlinkInput"},Te={for:"discoveredInput"},at=$({__name:"DiscovererInputs",props:{type:{default:"Descubridor"}},setup(e){const a=P(),{discovered:t,discoveredlink:l,mode:o}=C(a);return(e,a)=>{const s=ae("Explanation");return d(),b(w,null,[k(T,null,{label:u((()=>[a[6]||(a[6]=n("label",{for:"mode"},"Modo de juego:",-1)),k(s,{img:"creature/creatureEcosystem"},{heading:u((()=>a[3]||(a[3]=[g("Ecosistema")]))),content:u((()=>a[4]||(a[4]=[g(" Seleccione un ecosistema para filtrar los géneros. ")]))),default:u((()=>[a[5]||(a[5]=g(" Seleccione un ecosistema para filtrar los géneros de criaturas. "))])),_:1})])),input:u((()=>[E(n("select",{"onUpdate:modelValue":a[0]||(a[0]=e=>D(o)?o.value=e:null),id:"mode"},a[7]||(a[7]=[n("option",{value:"Normal"},"Normal",-1),n("option",{value:"Relaxed"},"Relajado",-1),n("option",{value:"Survival"},"Survival",-1),n("option",{value:"Permadeath"},"Muerte permanente",-1),n("option",{value:"Creative"},"Creativo",-1),n("option",{value:"Custom"},"Personalizada",-1)]),512),[[Y,_(o)]])])),_:1}),_(t)?I("",!0):(d(),h(T,{key:0},{label:u((()=>[n("label",we,"Nombre del "+S(e.type)+" en la wiki:",1)])),input:u((()=>[E(n("input",{"onUpdate:modelValue":a[1]||(a[1]=e=>D(l)?l.value=e:null),type:"text",id:"discoveredlinkInput"},null,512),[[M,_(l)]])])),_:1})),_(l)?I("",!0):(d(),h(T,{key:1},{label:u((()=>[n("label",Te,"Alias del "+S(e.type)+" si no tiene wiki:",1)])),input:u((()=>[E(n("input",{"onUpdate:modelValue":a[2]||(a[2]=e=>D(t)?t.value=e:null),type:"text",id:"discoveredInput"},null,512),[[M,_(t)]])])),_:1}))],64)}}}),Ee={},De={class:"error"};function Ie(e,a){return d(),b("p",De,[x(e.$slots,"default")])}const H=A(Ee,[["render",Ie]]),Ve={id:"portalglyphButtons"},Le=["id","value"],Pe={class:"glyph icon is-small"},Me={name:"portalglyphs",id:"portalglyphsPreview",class:"glyph"},W=12,nt=$({__name:"GlyphInput",setup(e){const a=/[0-9A-F]/,t=P(),{glyphs:l,isValidGlyphs:o}=C(t);function s(e){if(!e.target||!(e.target instanceof HTMLButtonElement||e.target instanceof HTMLElement&&e.target.parentElement instanceof HTMLButtonElement))return;const a=e.target instanceof HTMLButtonElement?e.target:e.target.parentElement;a instanceof HTMLButtonElement&&l.value.length<W&&(l.value+=a.value)}function i(){l.value=l.value.slice(0,-1)}function r(){l.value=l.value.toUpperCase().split("").filter((e=>a.test(e))).join("")}const c=e=>e.toString(16).toUpperCase(),p=L((()=>l.value.length===W&&!o.value));return(e,a)=>(d(),b(w,null,[k(T,null,{label:u((()=>[n("div",{class:"label-combo"},[a[1]||(a[1]=n("label",{for:"portalglyphsInput"},"Glifos:",-1)),n("button",{class:"button is-small is-danger",type:"button",id:"glyphDeleteButton",onClick:i}," ← Borrar ")]),k(F,{img:"shared/glyphs"},{heading:u((()=>a[2]||(a[2]=[g("Glifos del portal")]))),content:u((()=>a[3]||(a[3]=[g(" Encontrado en modo foto. Los glifos son específicos de cada planeta. "),n("iframe",{src:"https://nmspar.vercel.app/",sandbox:"allow-scripts allow-same-origin",title:"Glyph Reader",class:"explanation-embed",width:"450",height:"300"},"Lector de glifos",-1)]))),default:u((()=>[a[4]||(a[4]=g(" Encontrado en modo foto. Los glifos son específicos de cada planeta. "))])),_:1})])),input:u((()=>[E(n("input",{class:N([{"error-input":p.value},"glyphs-input"]),id:"portalglyphsInput",type:"text",maxlength:"12","onUpdate:modelValue":a[0]||(a[0]=e=>D(l)?l.value=e:null),onInput:r},null,34),[[M,_(l)]]),p.value?(d(),h(H,{key:0,class:"error"},{default:u((()=>[a[5]||(a[5]=g("No es una región valida de la RSS, por favor mira las ")),k(R,{link:"Regions_RSS",text:"regiones de la RSS"}),a[6]||(a[6]=g(" para obtener una lista de regiones validas."))])),_:1})):I("",!0)])),_:1}),k(T,null,{default:u((()=>[n("div",Ve,[(d(),b(w,null,ne(16,(e=>n("button",{class:"button",type:"button",id:"glyphButton"+e,value:c(e-1),onClick:s},[n("span",Pe,S(c(e-1)),1)],8,Le))),64))]),n("output",Me,S(_(l)),1)])),_:1})],64))}}),Be=1e7,lt=$({__name:"InfoboxImageInput",setup(e){const a=P(),{image:t}=C(a),l=y(!1),o=y(!1),s=y(!1),i=y(!1);function r(e){var a;if(!(e.target&&e.target instanceof HTMLInputElement))return;const n=null==(a=e.target.files)?void 0:a[0];t.value=(null==n?void 0:n.name)??"",i.value=!!(n&&n.size>Be),!s.value&&!i.value&&(l.value=!0,o.value=!0,s.value=!0)}return B((()=>{o.value&&!l.value&&(o.value=!1)})),B((()=>{!s.value&&l.value&&(s.value=!0)})),(e,a)=>(d(),h(T,null,{label:u((()=>[a[10]||(a[10]=n("label",{for:"picInput"},"Nombre de la imagen principal, incluida la extensión del archivo:",-1)),k(F,{open:l.value,"onUpdate:open":a[0]||(a[0]=e=>l.value=e)},{heading:u((()=>a[2]||(a[2]=[g("Subir archivo")]))),content:u((()=>[o.value?(d(),b(w,{key:1},[n("span",null,[a[6]||(a[6]=g(" No olvides subir tu foto a la wiki en ")),k(R,{link:"Special:Upload?multiple=true",text:"Subir Archivos"}),a[7]||(a[7]=g(". El botón de carga solo completa automáticamente el nombre de la imagen en el código, no se carga automáticamente en la wiki. "))]),a[8]||(a[8]=n("div",{class:"mt-3"},[n("span",{class:"has-text-weight-bold"},"NOTA"),g(': Puede acceder a esta ventana emergente en cualquier momento haciendo clic en "?" junto al botón de carga de la imagen principal. ')],-1))],64)):(d(),b(w,{key:0},[a[3]||(a[3]=g(" Cualquier imagen que cargue aquí no se cargará en la wiki. Esto es sólo para autocompletar el nombre de la imagen. El tamaño máximo del archivo es 10 MB. Puedes subir tus fotos a la wiki en ")),k(R,{link:"Special:Upload?multiple=true",text:"Subir Archivos"}),a[4]||(a[4]=g(". ")),a[5]||(a[5]=n("iframe",{src:"https://nmscd.com/Image-Compressor/",title:"Compresor de imagen",class:"explanation-embed",width:"450",height:"300"},"Compresor de imagen",-1))],64))])),default:u((()=>[a[9]||(a[9]=g(" La imagen no se cargará en la wiki. Esto es sólo para autocompletar el nombre de la imagen. "))])),_:1},8,["open"])])),input:u((()=>[E(n("input",{"onUpdate:modelValue":a[1]||(a[1]=e=>D(t)?t.value=e:null),type:"text",id:"picInput"},null,512),[[M,_(t)]]),n("input",{class:N({"error-input":i.value}),type:"file",onChange:r},null,34),i.value?(d(),h(H,{key:0},{default:u((()=>a[11]||(a[11]=[g("Este archivo es demasiado grande para cargarlo en la wiki. El tamaño máximo del archivo es 10 MB. Comprime tu archivo aquí: "),n("a",{href:"https://nmscd.com/Image-Compressor/",target:"_blank",rel:"noopener noreferrer"},"Compresor de imagen",-1)]))),_:1})):I("",!0)])),_:1}))}}),ot=$({__name:"ResearchteamInput",setup(e){const a=P(),{researchteam:t}=C(a);return(e,a)=>(d(),h(T,null,{label:u((()=>a[1]||(a[1]=[n("label",null,"¿Perteneces a un gremio?",-1)]))),input:u((()=>[E(n("input",{"onUpdate:modelValue":a[0]||(a[0]=e=>D(t)?t.value=e:null),type:"text",id:"researchTeam",placeholder:"Si es que si, di a cual"},null,512),[[M,_(t)]])])),_:1}))}}),Ne=["for"],Ae=["list","value","id","maxlength"],st=$({__name:"SimpleInput",props:{label:{},identifier:{},list:{},img:{},modelValue:{},error:{},maxlength:{}},emits:["update:modelValue","change"],setup(e,{emit:a}){const t=a;function l(e){if(!(e.target instanceof HTMLInputElement))return;const a=e.target.value;t("update:modelValue",a)}return(e,a)=>(d(),h(T,null,{label:u((()=>[n("label",{for:e.identifier},S(e.label),9,Ne),e.$slots.default?(d(),h(F,{key:0,img:e.img},le({default:u((()=>[x(e.$slots,"default")])),_:2},[e.$slots.heading?{name:"heading",fn:u((()=>[x(e.$slots,"heading")])),key:"0"}:void 0,e.$slots.content?{name:"content",fn:u((()=>[x(e.$slots,"content")])),key:"1"}:void 0]),1032,["img"])):I("",!0)])),input:u((()=>[n("input",{class:N({"error-input":e.error}),list:e.list,value:e.modelValue,id:e.identifier,maxlength:e.maxlength,type:"text",onInput:l,onChange:a[0]||(a[0]=a=>e.$emit("change",a))},null,42,Ae),e.error?(d(),h(H,{key:0,innerHTML:e.error},null,8,["innerHTML"])):I("",!0)])),_:3}))}}),Re={class:"explanation-content"},it=$({__name:"ExplanationError",props:{open:{type:Boolean},errorMessage:{}},emits:["update:open"],setup(e){const a=e,t=y("0 -100vh"),l=y(null);return B((()=>{a.open&&(t.value="0 -100vh",oe((()=>{var e;null==(e=l.value)||e.showModal(),t.value="0 0"})))})),(e,a)=>(d(),h(ie,{to:"body"},[n("dialog",{style:se({translate:t.value}),class:"explanation modal-content content",ref_key:"dialogElement",ref:l,onClose:a[0]||(a[0]=a=>e.$emit("update:open",!1))},[a[1]||(a[1]=n("h2",{class:"explanation-heading"},"Datos faltantes/incorrectos",-1)),n("div",Re,S(e.errorMessage),1),a[2]||(a[2]=n("form",{method:"dialog"},[n("button",{class:"button",type:"submit",autofocus:""}," Cerrar ")],-1))],36)]))}}),Ue={},Ge={id:"input",class:"column is-full-mobile"};function Fe(e,a){return d(),b("div",Ge,[x(e.$slots,"default")])}const rt=A(Ue,[["render",Fe]]),He={},qe={id:"output",class:"column is-full-mobile"};function We(e,a){return d(),b("div",qe,[x(e.$slots,"default")])}const ut=A(He,[["render",We]]);function O(e){return"function"==typeof e?e():_(e)}typeof WorkerGlobalScope<"u"&&(globalThis,WorkerGlobalScope);const j=()=>{};function Oe(e,a){return function(...t){return new Promise(((l,n)=>{Promise.resolve(e((()=>a.apply(this,t)),{fn:a,thisArg:this,args:t})).then(l).catch(n)}))}}const je=e=>e();function ze(e,a={}){let t,l,n=j;const o=e=>{clearTimeout(e),n(),n=j};return s=>{const u=O(e),i=O(a.maxWait);return t&&o(t),u<=0||void 0!==i&&i<=0?(l&&(o(l),l=null),Promise.resolve(s())):new Promise(((e,r)=>{n=a.rejectOnCancel?r:e,i&&!l&&(l=setTimeout((()=>{t&&o(t),l=null,e(s())}),i)),t=setTimeout((()=>{l&&o(l),l=null,e(s())}),u)}))}}function Ke(e,a,t={}){const{eventFilter:l=je,...n}=t;return re(e,Oe(l,a),n)}function pt(e,a,t={}){const{debounce:l=0,maxWait:n,...o}=t;return Ke(e,a,{...o,eventFilter:ze(l,{maxWait:n})})}export{H as E,rt as I,ut as O,ke as S,tt as _,T as a,st as b,lt as c,nt as d,at as e,ot as f,et as g,it as h,pt as w};
