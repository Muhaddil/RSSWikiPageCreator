import{F as e,J as t,S as n,W as r,at as i,b as a,dt as o,et as s,g as c,ht as l,i as u,m as d,p as f,q as p,y as m}from"./runtime-dom.esm-bundler-qDVwTlDV.js";import{t as h}from"./button-D7Lf3U4Q.js";import{f as g,s as _,t as v}from"./SanitisedTextInput-jhMLSFBX.js";import"./baseinput-ChXkcOAs.js";import{t as y}from"./_plugin-vue_export-helper-B-x99n_9.js";import{r as b,t as x}from"./dist-B-5ZngZ8.js";import{t as S}from"./PageCreator-BXC9cmjq.js";import{t as C}from"./TextareaInput-Cl6Qb5Ra.js";var w={class:`formatted-text`},T=y(n({__name:`baseOutput`,setup(t){let{censusrenewal:n}=g(_());return(t,r)=>(e(),c(`pre`,w,l(o(n)),1))}}),[[`__scopeId`,`data-v-00c30dfe`]]),E={class:`code-container`},D={class:`checkbox-container`},O=y(n({__name:`BaseInput`,setup(n){let l=_(),{censusrenewal:d,release:y,name:S}=g(l),w=new Date().getUTCFullYear(),T=y.value,O=i(!1),k=i(``);function A(e){let t=w,n=/censusrenewal\s*=\s*([^\n]*)/,r=e.match(n);if(r&&r[1]){let i=r[1].split(`,`).map(e=>e.trim());if(i.length===0)return e.replace(n,`censusrenewal = ${t}`);if(O.value){let e=parseInt(i[i.length-1],10);for(let n=e+1;n<=t;n++)i.includes(n.toString())||i.push(n.toString())}return i.includes(t.toString())||i.push(t.toString()),e.replace(n,`censusrenewal = ${i.join(`, `)}`)}else return e.trimEnd()+`\ncensusrenewal = ${t}`}function j(e){let t=/{{Version\|([^\n]*)}}/,n=/\| release =\s*([^\n]*)/,r=e.replace(t,`{{Version|${T}}}`);return r=r.replace(n,`| release = ${T}`),r}function M(e){let t=A(e);return t=j(t),t}function N(e){let t=e.match(/\| name =\s*([^\n]*)/);return t&&t[1]?t[1].trim():``}function P(){d.value&&(l.censusrenewal=M(d.value),k.value=N(d.value),l.name=k.value)}r(O,()=>{P()}),r(d,()=>{P()});let F=b();function I(e){F.error(e,{position:x.BOTTOM_RIGHT})}function L(){let e=[{field:l.name,message:`¡Pon el nombre de tu base!`}];for(let{field:t,message:n}of e)if(!t){I(n);return}F.success(`¡Creada!`,{position:x.BOTTOM_RIGHT}),window.open(`https://nomanssky.fandom.com/wiki/${l.name}?action=edit#editform`,`_blank`)}return(n,r)=>(e(),c(`div`,E,[r[6]||=f(`h2`,{class:`title`},`Actualización del Censo RSS`,-1),r[7]||=f(`p`,{class:`description`},` Pega aquí el código que deseas actualizar. Los valores se actualizarán automáticamente con el año actual y la versión más reciente. `,-1),f(`div`,D,[f(`label`,null,[t(f(`input`,{type:`checkbox`,"onUpdate:modelValue":r[0]||=e=>O.value=e},null,512),[[u,O.value]]),r[3]||=m(` Añadir todos los años desde el último registrado. `,-1)]),r[4]||=f(`div`,{class:`note`},[f(`p`,null,[f(`strong`,null,`Nota:`),m(` Selecciona esto antes de ingresar tu código o puede haber errores.`)])],-1)]),a(v,{modelValue:o(S),"onUpdate:modelValue":r[1]||=e=>s(S)?S.value=e:null,"help-img":`base/baseName`,"help-title":`Nombre de la Base:`,label:`Nombre de la Base`,tooltip:`Escribe exactamente como se ve en el juego. Cuidado con 0 (cero) y O (o).`},{default:p(()=>[...r[5]||=[m(` Escribe exactamente como se ve en el juego. Cuidado con 0 (cero) y O (o). `,-1)]]),_:1},8,[`modelValue`]),a(o(h),{as:`a`,label:`Ir a la base`,severity:`warn`,onClick:L}),r[8]||=f(`br`,null,null,-1),r[9]||=f(`br`,null,null,-1),a(C,{modelValue:o(d),"onUpdate:modelValue":r[2]||=e=>s(d)?d.value=e:null,label:`Pega tu código aquí`,placeholder:`Ejemplo de código a pegar`,class:`textarea-input`},null,8,[`modelValue`]),r[10]||=f(`div`,{class:`note`},[f(`p`,null,[f(`strong`,null,`Nota:`),m(` Si no tienes ningún año en el campo de `),f(`code`,null,`censusrenewal`),m(`, el sistema fallará. `)])],-1)]))}}),[[`__scopeId`,`data-v-39f0f925`]]),k=n({__name:`BaseRenewal`,setup(t){return(t,n)=>(e(),d(S,null,{input:p(()=>[a(O)]),output:p(()=>[a(T)]),_:1}))}});export{k as default};