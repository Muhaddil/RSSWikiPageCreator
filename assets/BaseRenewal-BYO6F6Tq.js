import{B as e,U as t,W as n,X as r,dt as i,f as a,h as o,i as s,j as c,p as l,st as u,tt as d,v as f,x as p,y as m}from"./runtime-dom.esm-bundler-DVzMal_p.js";import{t as h}from"./button-CVz193gd.js";import{f as g,s as _,t as v}from"./SanitisedTextInput-BIviWMSb.js";import"./baseinput--BA165k7.js";import{t as y}from"./_plugin-vue_export-helper-D6098ZHW.js";import{r as b,t as x}from"./dist-C4cd-sdX.js";import{t as S}from"./PageCreator-uTP92VsO.js";import{t as C}from"./TextareaInput-UVCe2enE.js";var w={class:`formatted-text`},T=y(p({__name:`baseOutput`,setup(e){let{censusrenewal:t}=g(_());return(e,n)=>(c(),o(`pre`,w,i(u(t)),1))}}),[[`__scopeId`,`data-v-00c30dfe`]]),E={class:`code-container`},D={class:`checkbox-container`},O=y(p({__name:`BaseInput`,setup(i){let l=_(),{censusrenewal:p,release:y,name:S}=g(l),w=new Date().getUTCFullYear(),T=y.value,O=d(!1),k=d(``);function A(e){let t=w,n=/censusrenewal\s*=\s*([^\n]*)/,r=e.match(n);if(r&&r[1]){let i=r[1].split(`,`).map(e=>e.trim());if(i.length===0)return e.replace(n,`censusrenewal = ${t}`);if(O.value){let e=parseInt(i[i.length-1],10);for(let n=e+1;n<=t;n++)i.includes(n.toString())||i.push(n.toString())}return i.includes(t.toString())||i.push(t.toString()),e.replace(n,`censusrenewal = ${i.join(`, `)}`)}else return e.trimEnd()+`\ncensusrenewal = ${t}`}function j(e){let t=/{{Version\|([^\n]*)}}/,n=/\| release =\s*([^\n]*)/,r=e.replace(t,`{{Version|${T}}}`);return r=r.replace(n,`| release = ${T}`),r}function M(e){let t=A(e);return t=j(t),t}function N(e){let t=e.match(/\| name =\s*([^\n]*)/);return t&&t[1]?t[1].trim():``}function P(){p.value&&(l.censusrenewal=M(p.value),k.value=N(p.value),l.name=k.value)}e(O,()=>{P()}),e(p,()=>{P()});let F=b();function I(e){F.error(e,{position:x.BOTTOM_RIGHT})}function L(){let e=[{field:l.name,message:`¡Pon el nombre de tu base!`}];for(let{field:t,message:n}of e)if(!t){I(n);return}F.success(`¡Creada!`,{position:x.BOTTOM_RIGHT}),window.open(`https://nomanssky.fandom.com/wiki/${l.name}?action=edit#editform`,`_blank`)}return(e,i)=>(c(),o(`div`,E,[i[6]||=a(`h2`,{class:`title`},`Actualización del Censo RSS`,-1),i[7]||=a(`p`,{class:`description`},` Pega aquí el código que deseas actualizar. Los valores se actualizarán automáticamente con el año actual y la versión más reciente. `,-1),a(`div`,D,[a(`label`,null,[n(a(`input`,{type:`checkbox`,"onUpdate:modelValue":i[0]||=e=>O.value=e},null,512),[[s,O.value]]),i[3]||=f(` Añadir todos los años desde el último registrado. `,-1)]),i[4]||=a(`div`,{class:`note`},[a(`p`,null,[a(`strong`,null,`Nota:`),f(` Selecciona esto antes de ingresar tu código o puede haber errores.`)])],-1)]),m(v,{modelValue:u(S),"onUpdate:modelValue":i[1]||=e=>r(S)?S.value=e:null,"help-img":`base/baseName`,"help-title":`Nombre de la Base:`,label:`Nombre de la Base`,tooltip:`Escribe exactamente como se ve en el juego. Cuidado con 0 (cero) y O (o).`},{default:t(()=>[...i[5]||=[f(` Escribe exactamente como se ve en el juego. Cuidado con 0 (cero) y O (o). `,-1)]]),_:1},8,[`modelValue`]),m(u(h),{as:`a`,label:`Ir a la base`,severity:`warn`,onClick:L}),i[8]||=a(`br`,null,null,-1),i[9]||=a(`br`,null,null,-1),m(C,{modelValue:u(p),"onUpdate:modelValue":i[2]||=e=>r(p)?p.value=e:null,label:`Pega tu código aquí`,placeholder:`Ejemplo de código a pegar`,class:`textarea-input`},null,8,[`modelValue`]),i[10]||=a(`div`,{class:`note`},[a(`p`,null,[a(`strong`,null,`Nota:`),f(` Si no tienes ningún año en el campo de `),a(`code`,null,`censusrenewal`),f(`, el sistema fallará. `)])],-1)]))}}),[[`__scopeId`,`data-v-39f0f925`]]),k=p({__name:`BaseRenewal`,setup(e){return(e,n)=>(c(),l(S,null,{input:t(()=>[m(O)]),output:t(()=>[m(T)]),_:1}))}});export{k as default};