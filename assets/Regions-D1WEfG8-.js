import{F as e,M as t,O as n,P as r,at as i,d as a,dt as o,f as s,h as c,ht as l,l as u,m as d,mt as f,p,q as m,v as h,x as ee,y as g}from"./runtime-dom.esm-bundler-DokFv1WN.js";import"./button-eiEoyAAE.js";import"./baseinput-BFbMRtx5.js";import{t as _}from"./_plugin-vue_export-helper-D6098ZHW.js";import{t as v}from"./card-3k4y6b13.js";import{t as te}from"./progressbar-CcoAA27X.js";import{t as ne}from"./checkbox-CzGA5fq6.js";import{t as y}from"./panel-BzcgKV24.js";import{t as b}from"./logo-white-CAp0XnaH.js";import{t as x}from"./tag-BgcZK6xm.js";import{a as re,i as ie,r as ae}from"./api-DnarUB0H.js";var oe={class:`space-page-container`},se={class:`flex items-start justify-between mb-6 header-container`},ce={class:`flex flex-col`},le={class:`flex items-center gap-2 mt-2`},ue={class:`panel-content`},de={class:`loading-status`},fe={class:`loading-stats mt-3`},pe={key:0},me={key:0,class:`text-sm text-stellar-gray`},he={class:`panel-content`},S={class:`security-level mt-2`},C={class:`update-info`},w={key:2,class:`galaxy-container`},T={class:`galaxy-header`},E=[`src`],D={class:`galaxy-title`},O={class:`quadrants-grid`},k={class:`quadrant-title`},A={class:`p-4 base-content`},j={class:`flex flex-column gap-3`},M={class:`flex align-items-center gap-2`},N={class:`base-title`},P={class:`base-details`},F={class:`detail-item`},I={class:`detail-value`},L={class:`detail-item`},R={class:`detail-value`},ge={class:`detail-item`},_e={class:`glyph-value`},ve={class:`panel-content-with-image`},z=[`href`],ye=[`src`,`onClick`],be=`Royal Space Society`,B=4,xe=10080*60*1e3,V=_(ee({__name:`Regions`,setup(ee){let _=i([]),b=i(!0),V=i(null),H=i(window.innerWidth),U=i(!1),W=i({current:0,total:0,status:`Iniciando...`,percentage:0,estimatedMinutes:0}),G=[],K=!1,q=60*1e3/B,J=new Set,Y=new Map,Se=[`Uekenbe Shallows`,`Uklots Shallows`,`Eighba Fringe`,`Xecroften`,`Areyas`,`Sea of Ticrops`,`Udrupi Shallows`,`Jiessl Shallows`,`Becheeth Sector`,`Juhalbe Cluster`,`Larinar Boundary`,`Qudsor Void`,`Uhcheimri Void`,`Skitco`,`Emcalh Nebula`,`Gumita Nebula`,`Jajaja Cluster`],Ce={"Uekenbe Shallows":`Bajíos de Uekenbe`,"Uklots Shallows":`Bajíos de Uklots`,"Eighba Fringe":`Frontera de Eighba`,Xecroften:`Xecroften`,Areyas:`Areyas`,"Sea of Ticrops":`Mar de Ticrops`,"Udrupi Shallows":`Bajíos de Udrupi`,"Jiessl Shallows":`Bajíos de Jiessl`,"Becheeth Sector":`Sector Becheeth`,"Juhalbe Cluster":`Cúmulo de Juhalbe`,"Larinar Boundary":`Frontera de Larinar`,"Qudsor Void":`Vacío de Qudsor`,"Uhcheimri Void":`Vacío de Uhcheimri`,Skitco:`Skitco`,"Emcalh Nebula":`Nebulosa de Emcalh`,"Gumita Nebula":`Nebulosa de Gumita`,"Jajaja Cluster":`Cúmulo de Jajaja`},we={"Uekenbe Shallows":`2141F7EC0D24`,"Uklots Shallows":`01B8032FE9B0`,Xecroften:`01B8F7EC0D25`,Areyas:`0080F8EBDD24`,"Udrupi Shallows":`10BCF7EBFD24`,"Jiessl Shallows":`01A7F7EBFD25`,"Becheeth Sector":`00E6F7EC1D24`,"Juhalbe Cluster":`01B6F6EC0D23`,"Sea of Ticrops":`007A0EEC7D10`,"Larinar Boundary":`010F0AAEBB96`,"Eighba Fringe":`0133FEA34C10`,"Emcalh Nebula":`0041F9F846D8`,"Qudsor Void":`007CFF9B4CB0`,"Uhcheimri Void":`00EAFBF21696`,Skitco:`00F30266CF95`,"Gumita Nebula":`140FF7EBFD23`},Te={Cross:`Cruzado`,"Star systems":`Sistemas`,Planets:`Planetas`,Starships:`Naves`,"Multi-Tools":`Multiherramientas`,Euclid:`Euclides`,"Hilbert Dimension":`Dimensión de Hilbert`},Ee=a(()=>H.value<768?1:H.value<1200?2:3),X=async()=>{if(!(K||G.length===0)){for(K=!0;G.length>0&&J.size<B;){let e=G.shift();if(!e)break;if(J.has(e.id)){G.push({...e,priority:(e.priority||0)-1});continue}J.add(e.id);try{let t=await e.execute();e.resolve(t)}catch(t){e.reject(t)}finally{J.delete(e.id),G.length>0&&await new Promise(e=>setTimeout(e,q))}}K=!1,G.length>0&&setTimeout(()=>X(),q)}},De=(e,t,n=0)=>new Promise((r,i)=>{let a=`query-${e}`,o=Y.get(a);if(o&&Date.now()-o.timestamp<xe){r(o.data);return}let s={id:e,execute:async()=>{let e=await t();return Y.set(a,{data:e,timestamp:Date.now()}),e},resolve:r,reject:i,priority:n},c=G.findIndex(e=>(e.priority||0)<n);c===-1?G.push(s):G.splice(c,0,s),K||X()}),Oe=async e=>De(`image-${e}`,async()=>{let t=await ie(e);return t?await re(t):null},1),Z=async e=>{try{let t={regions:e.map(e=>({...e,statsLoading:!1})),timestamp:Date.now(),version:`1.1`};localStorage.setItem(`rss-regions-cache`,JSON.stringify(t))}catch(e){console.error(`Error guardando caché:`,e)}},ke=async()=>{try{let e=localStorage.getItem(`rss-regions-cache`);if(e){let t=JSON.parse(e);if(Date.now()-t.timestamp<1440*60*1e3*7&&t.version===`1.1`)return console.log(`✅ Datos cargados desde caché`),t.regions;console.log(`⚠️ Caché expirada o versión antigua, recargando...`)}}catch{console.log(`ℹ️ No hay caché disponible`)}return null},Q=(e,t,n)=>{let r=t>0?Math.round(e/t*100):0,i=t-e;W.value={current:e,total:t,status:n,percentage:r,estimatedMinutes:Math.ceil(i*q/(60*1e3))}},Ae=async()=>{try{let e=await ke();if(e&&e.length>0){_.value=e,Q(e.length,e.length,`Datos cargados desde caché`),b.value=!1;return}Q(0,0,`Obteniendo lista de regiones...`);let t=(await ae(be,0)).filter(e=>Se.some(t=>e.Region.includes(t))),r=t.length;Q(0,r,`Cargando imágenes de regiones...`);let i=[];for(let e=0;e<t.length;e++){let a=t[e];try{Q(e+1,r,`Cargando imagen de ${a.Region}...`),a.imageUrl=await Oe(a.Region),a.stats=null,a.statsLoaded=!1,a.statsLoading=!1,i.push(a),_.value=[...i],await n(),(e+1)%2==0&&await Z(i)}catch(e){console.error(`Error procesando región ${a.Region}:`,e),a.imageUrl=null,a.stats=null,a.statsLoaded=!1,a.statsLoading=!1,i.push(a)}}await Z(i),Q(r,r,`¡Imágenes cargadas! Las estadísticas se cargarán bajo demanda.`),b.value=!1}catch(e){V.value=`Error al cargar las regiones`,console.error(e),b.value=!1}};t(async()=>{window.addEventListener(`resize`,()=>H.value=window.innerWidth),await Ae()});let $=e=>e.trim().replace(/\s+/g,`_`).replace(/\//g,`_`),je=e=>{window.open(e,`_blank`)};function Me(e){let t=e.split(`:`);if(t.length!==4)return``;let[n,r,i]=t,a=parseInt(n,16),o=parseInt(r,16),s=parseInt(i,16),c=2049,l=2047,u=a<=2046?a+c:a-l,d=s<=2046?s+c:s-l,f=o<=126?o+129:o-127,p=u.toString(16).toUpperCase().padStart(3,`0`),m=f.toString(16).toUpperCase().padStart(2,`0`),h=d.toString(16).toUpperCase().padStart(3,`0`);return`0000`+m+h+p}function Ne(e,t){return we[e]||Me(t)}function Pe(e){let t=e.toString();return Te[t]||t}let Fe=a(()=>{let e=new Map;return _.value.forEach(t=>{e.has(t.Galaxy)||e.set(t.Galaxy,{name:t.Galaxy,quadrants:[],image:t.imageUrl?.modal});let n=e.get(t.Galaxy),r=n.quadrants.find(e=>e.name===t.Quadrant);r||(r={name:t.Quadrant,regions:[]},n.quadrants.push(r)),r.regions.push(t)}),Array.from(e.values())});function Ie(e){return U.value?e:Ce[e]||e}return(t,n)=>(r(),p(o(v),{class:`p-0 galactic-card`},{content:m(()=>[s(`div`,oe,[s(`div`,se,[s(`div`,ce,[n[2]||=s(`div`,{class:`header-container`},[s(`a`,{href:`https://nomanssky.fandom.com/es/wiki/Royal_Space_Society`,target:`_blank`},[s(`div`,{class:`rss-logo`},[s(`img`,{src:`/RSSWikiPageCreator/assets/images/shared/logo-white.png`,class:`logo-image`,alt:`RSS Logo`})])]),s(`div`,{class:`title-theme-container`},[s(`h1`,{class:`galactic-title`},[s(`span`,{class:`title-text`},`Regiones - Royal Space Society`)])])],-1),n[3]||=s(`p`,{class:`text-stellar-gray mt-2`},`Explora las regiones de la Royal Space Society`,-1),s(`div`,le,[g(o(ne),{modelValue:U.value,"onUpdate:modelValue":n[0]||=e=>U.value=e,binary:!0,inputId:`toggle-language`},null,8,[`modelValue`]),n[1]||=s(`label`,{for:`toggle-language`,class:`cursor-pointer select-none`},` Mostrar nombres de las regiones en inglés `,-1)])])]),b.value?(r(),p(o(y),{key:0,class:`galactic-panel mt-6 loading-panel`},{header:m(()=>[...n[4]||=[s(`h2`,{class:`panel-title`},[s(`i`,{class:`pi pi-spin pi-spinner`}),h(` Cargando datos...`)],-1)]]),default:m(()=>[s(`div`,ue,[s(`p`,de,l(W.value.status),1),g(o(te),{value:W.value.percentage,class:`mt-3`},null,8,[`value`]),s(`div`,fe,[s(`p`,null,[n[5]||=h(` Progreso: `,-1),s(`strong`,null,l(W.value.current),1),n[6]||=h(` de `,-1),s(`strong`,null,l(W.value.total),1),n[7]||=h(` consultas completadas `,-1),W.value.percentage>0?(r(),c(`span`,pe,` (`+l(W.value.percentage)+`%) `,1)):d(``,!0)]),W.value.estimatedMinutes>0?(r(),c(`p`,me,` Tiempo estimado restante: ~`+l(W.value.estimatedMinutes)+` minuto`+l(W.value.estimatedMinutes===1?``:`s`),1)):d(``,!0)])])]),_:1})):d(``,!0),b.value?d(``,!0):(r(),p(o(y),{key:1,class:`galactic-panel mt-6`},{header:m(()=>[...n[8]||=[s(`h2`,{class:`panel-title`},`Información de las regiones`,-1)]]),default:m(()=>[s(`div`,he,[s(`p`,null,[n[9]||=h(` Total de regiones registradas: `,-1),s(`strong`,null,l(_.value.length),1)]),s(`p`,S,[n[10]||=h(` Nivel de seguridad: `,-1),g(o(x),{value:`Clasificado RSS`,severity:`info`,class:`category-tag`})]),s(`p`,C,`Última actualización: `+l(new Date().toLocaleDateString()),1)])]),_:1})),n[17]||=s(`br`,null,null,-1),!b.value&&!V.value?(r(),c(`div`,w,[(r(!0),c(u,null,e(Fe.value,(t,i)=>(r(),p(o(y),{key:i,class:`galaxy-panel`,toggleable:``,collapsed:``},{header:m(()=>[s(`div`,T,[t.image?(r(),c(`img`,{key:0,src:t.image,class:`galaxy-image`},null,8,E)):d(``,!0),s(`h2`,D,l(Pe(t.name)),1),g(o(x),{value:`${t.quadrants.length} ${t.quadrants.length===1?`Cuadrante`:`Cuadrantes`}`,severity:`info`},null,8,[`value`])])]),default:m(()=>[s(`div`,O,[(r(!0),c(u,null,e(t.quadrants,(t,i)=>(r(),p(o(y),{key:i,class:`quadrant-panel`,toggleable:``,collapsed:``},{header:m(()=>[s(`h3`,k,[n[11]||=s(`i`,{class:`pi pi-th-large`},null,-1),h(` `+l(t.name)+` `,1),g(o(x),{value:`${t.regions.length} ${t.regions.length===1?`Región`:`Regiones`}`,severity:`info`},null,8,[`value`])])]),default:m(()=>[s(`div`,{class:`regions-grid`,style:f(`grid-template-columns: repeat(${Ee.value}, 3fr)`)},[(r(!0),c(u,null,e(t.regions,(e,t)=>(r(),p(o(v),{key:t,class:`region-card`},{content:m(()=>[s(`div`,A,[s(`div`,j,[s(`div`,M,[s(`h3`,N,l(Ie(e.Region)),1),g(o(x),{value:e.Galaxy,severity:`info`,class:`category-tag`},null,8,[`value`])]),s(`div`,P,[s(`div`,F,[n[12]||=s(`span`,{class:`detail-label`},`Cuadrante:`,-1),s(`span`,I,l(e.Quadrant),1)]),s(`div`,L,[n[13]||=s(`span`,{class:`detail-label`},`Coordenadas:`,-1),s(`span`,R,l(e.Coordinates),1)]),s(`div`,ge,[n[14]||=s(`span`,{class:`detail-label`},`Glifos:`,-1),s(`span`,_e,l(Ne(e.Region,e.Coordinates)),1)])]),e.Region?(r(),p(o(y),{key:0,class:`builder-panel mt-3`},{header:m(()=>[...n[15]||=[s(`span`,{class:`builder-link-header`},`Enlaces de la Región`,-1)]]),default:m(()=>[s(`div`,ve,[s(`a`,{href:`https://nomanssky.fandom.com/wiki/${$(e.Region)}`,target:`_blank`,class:`builder-link`},[...n[16]||=[s(`i`,{class:`pi pi-external-link`},null,-1),h(` Ver detalles de la región `,-1)]],8,z),e.imageUrl?(r(),c(`img`,{key:0,src:e.imageUrl.modal,alt:`Imagen de la base`,class:`panel-base-image`,onClick:t=>je(`https://nomanssky.fandom.com/wiki/${$(e.Region)}`)},null,8,ye)):d(``,!0)])]),_:2},1024)):d(``,!0)])])]),_:2},1024))),128))],4)]),_:2},1024))),128))])]),_:2},1024))),128))])):d(``,!0)])]),_:1}))}}),[[`__scopeId`,`data-v-873d1f1f`]]);export{V as default};