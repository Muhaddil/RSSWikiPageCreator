import{u as L,e as Q,I as Y,f as X,E as j,g as ee,b as q,S as le,h as se}from"./main-_uJfzo5M.js";import{s as U}from"./pinia-DP1x6KiP.js";import{Y as D,c,b as o,Q as k,d as a,R as C,F as w,x as s,a3 as te,a4 as ae,r as S,q as M,O as m,K as y,U as ie,E as b,J as $,N as oe,M as O,L as z,D as ne,I as B,V as N,i as re}from"./@vue-a971EMsi.js";import{q as ue,e as Z,r as T,k as H,s as R}from"./primevue-DWrlVcq3.js";import{e as de,w as pe,g as J,d as W}from"./@vueuse-WjXJKVhx.js";import{d as me}from"./debounce-B7UkYTDg.js";import{l as ce}from"./vue-draggable-plus-DM2Lmg2D.js";const Te="Royal Space Society",je=D({__name:"GalleryOutput",props:{fileList:{}},setup(e){const l=L(),{galleryFiles:i}=U(l);return(e,l)=>(o(),c(k,null,[l[0]||(l[0]=a("div",null,"<gallery>",-1)),(o(!0),c(k,null,C(e.fileList??s(i),(e=>(o(),c("div",{key:e.id},w(e.file.name)+w(e.desc?"|":"")+w(e.desc),1)))),128)),l[1]||(l[1]=a("div",null,"</gallery>",-1))],64))}}),V=1e7,fe={class:"is-flex is-justify-content-space-between is-align-items-center full-width"},ve=["for"],ge=200,ye=D({__name:"SingleFileUpload",props:te({label:{},tooltip:{},helpImg:{},helpTitle:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(e){const l=ae(e,"modelValue"),i=S(!1),t=S(!0),n=M((()=>i.value||!t.value));function r(e){const l=e.files[0];l instanceof File&&u([l])}function u(e){const a=null==e?void 0:e[0];if(!a)return;const s=a.size>V;if(i.value=s,s)return;const o=a.name;l.value=o}de(document,"reset",(()=>i.value=!1)),pe(l,(e=>t.value=!e||e.includes(".")),{debounce:me});const d=Q("file-upload-"),p=S(null),f=S(null),v=S(),{isOverDropZone:g}=J(p,{onDrop:u,dataTypes:e=>e.every((e=>e.startsWith("image/"))),multiple:!1,preventDefaultForUnhandled:!0}),{height:h}=W(v),k=M((()=>h.value/2)),{width:x}=W(f),_=M((()=>x.value<=ge));return(e,u)=>(o(),c("div",{ref_key:"dropzone",ref:p},[m(Y,null,{label:y((()=>[a("div",fe,[a("label",{for:s(d)},w(e.label),9,ve),e.tooltip?(o(),$(ee,{key:0,"help-img":e.helpImg,"help-title":e.helpTitle,tooltip:e.tooltip},{default:y((()=>[ne(e.$slots,"default",{},void 0,!0)])),_:3},8,["help-img","help-title","tooltip"])):z("",!0)])])),input:y((()=>[a("div",{ref_key:"inputWrapper",ref:f},[m(X,{invalid:n.value,top:`${k.value}px`,"move-left":_.value?void 0:"5.5rem"},ie({default:y((()=>[(o(),$(oe(_.value?"div":s(ue)),{class:O({"is-flex is-flex-direction-column is-gap-1":_.value})},{default:y((()=>[m(s(Z),{modelValue:l.value,"onUpdate:modelValue":u[0]||(u[0]=e=>l.value=e),id:s(d),invalid:n.value,ref_key:"textInput",ref:v,size:"small"},null,8,["modelValue","id","invalid"]),m(s(T),{class:O([{"p-button-outlined":!s(g)},"p-button-sm upload-button"]),accept:"image/*",mode:"basic",auto:"","custom-upload":"",chooseLabel:"Elegir",onSelect:r},null,8,["class"])])),_:1},8,["class"]))])),_:2},[i.value?{name:"errorMessage",fn:y((()=>[u[1]||(u[1]=b(" Este archivo es demasiado grande para subirlo a la wiki. El tamaño máximo es de 10 MB. Comprime tu archivo aquí: ")),m(j,{link:"https://nmscd.com/Image-Compressor/",text:"Compresor de imágenes"})])),key:"0"}:t.value?void 0:{name:"errorMessage",fn:y((()=>[u[2]||(u[2]=b("¡El archivo no tiene extensión de archivo (es decir, .jpg, .png)!"))])),key:"1"}]),1032,["invalid","top","move-left"])],512)])),_:3})],512))}}),qe=q(ye,[["__scopeId","data-v-b2249a86"]]),he={class:"gallery-wrapper is-flex full-width"},be=["href"],xe=["alt","src"],ke={class:"input-section is-flex is-flex-direction-column is-flex-grow-1 is-gap-1 p-2"},_e={style:{"word-break":"break-all"}},Se={class:"is-flex is-flex-direction-column is-justify-content-space-between is-align-items-center is-gap-1 p-2 ml-auto"},Fe={class:"handle pi pi-arrows-v",title:"Mover la imagen hacia arriba o hacia abajo",draggable:"true"},we={class:"button-wrapper is-flex-direction-column is-gap-1"},Ie=D({__name:"GalleryItem",props:{fileItem:{},isLocationFile:{type:Boolean}},setup(e){const l=e,i=L(),{galleryFiles:t,locationFiles:n,galleryDescriptions:r}=U(i),u=URL.createObjectURL(l.fileItem.file);const d=["up","down"];return(e,l)=>(o(),$(s(H),{class:"gallery-item"},{default:y((()=>[a("div",he,[a("a",{class:"gallery-media is-flex is-unselectable is-justify-content-center",href:s(u),target:"_blank",rel:"noopener noreferrer"},[a("img",{alt:e.fileItem.file.name,src:s(u),class:"mx-auto"},null,8,xe)],8,be),a("div",ke,[a("p",_e,[l[3]||(l[3]=a("span",{class:"has-text-weight-bold"},"Nombre: ",-1)),b(w(e.fileItem.file.name),1)]),B(a("div",null,[m(le,{modelValue:e.fileItem.desc,"onUpdate:modelValue":l[0]||(l[0]=l=>e.fileItem.desc=l),options:s(r)},null,8,["modelValue","options"])],512),[[N,s(r).length]]),a("div",null,[m(s(Z),{modelValue:e.fileItem.desc,"onUpdate:modelValue":l[1]||(l[1]=l=>e.fileItem.desc=l),placeholder:"Descripción",size:"small"},null,8,["modelValue"])])]),a("div",Se,[m(s(R),{class:"delete-icon is-clickable",severity:"danger",title:"Eliminar imagen de la galería",onClick:l[2]||(l[2]=l=>function(e){t.value=t.value.filter((l=>l!==e)),n.value=n.value.filter((l=>l!==e))}(e.fileItem))},{default:y((()=>l[4]||(l[4]=[b(" ❌ ")]))),_:1}),B(a("span",Fe,null,512),[[N,!e.isLocationFile]]),a("div",we,[(o(),c(k,null,C(d,(l=>B(m(s(R),{icon:`pi pi-sort-${l}-fill`,title:`Mover ${l}`,severity:"secondary",outlined:"",onClick:a=>function(e,l){const a=t.value.indexOf(e),s=n.value.indexOf(e),i=(()=>{if(-1!==a)return t;if(-1!==s)return n;throw new Error("Couldn't find item!")})(),o=i.value.indexOf(e);if("up"===l&&o)i.value.splice(o-1,0,e),i.value.splice(o+1,1);else if("down"===l&&o!==i.value.length-1){const l=i.value.filter((l=>l!==e));l.splice(o+1,0,e),i.value=l}}(e.fileItem,l)},null,8,["icon","title","onClick"]),[[N,!e.isLocationFile]]))),64))])])])])),_:1}))}}),A=q(Ie,[["__scopeId","data-v-3654535c"]]),$e={key:0,class:"is-flex is-flex-direction-column is-gap-1"},De=D({__name:"GalleryPreview",setup(e){const l=L(),{galleryFiles:i,locationFiles:t}=U(l),n=S(!1);return(e,l)=>s(i).length?(o(),$(s(H),{key:0,collapsed:n.value,"onUpdate:collapsed":l[1]||(l[1]=e=>n.value=e),header:"Vistra Previa",toggleable:""},{default:y((()=>[m(s(ce),{modelValue:s(i),"onUpdate:modelValue":l[0]||(l[0]=e=>re(i)?i.value=e:null),animation:250,class:"is-flex is-flex-direction-column is-gap-1",handle:".handle"},{default:y((()=>[(o(!0),c(k,null,C(s(i),(e=>(o(),$(A,{"file-item":e,key:e.id,"is-location-file":!1},null,8,["file-item"])))),128))])),_:1},8,["modelValue"]),s(t).length?(o(),c("div",$e,[l[2]||(l[2]=a("p",{class:"has-text-weight-bold is-block mb-1"},"Location Files",-1)),(o(!0),c(k,null,C(s(t),(e=>(o(),$(A,{"file-item":e,key:e.id,"is-location-file":!0},null,8,["file-item"])))),128))])):z("",!0)])),_:1},8,["collapsed"])):z("",!0)}}),Ve={class:"is-flex is-flex-direction-column is-gap-2 mt-5"},Ce={key:0,class:"error-message"},Ee=D({__name:"GalleryInput",setup(e){const l=L(),{galleryFiles:i}=U(l),t=S([]);let n=0;function r(e){const l=e.files;if(!Array.isArray(l))return;t.value=[];const a=l.filter((e=>e instanceof File&&(!(e.size>V)||(t.value.push(e.name),!1)))).map((e=>({file:e,id:n++,desc:""})));a.length&&i.value.unshift(...a)}const u=S(null),{isOverDropZone:d}=J(u,{onDrop:function(e){if(!e)return;t.value=[];const l=e.filter((e=>!(e.size>V)||(t.value.push(e.name),!1))).map((e=>({file:e,id:n++,desc:""})));l.length&&i.value.unshift(...l)},dataTypes:e=>e.every((e=>e.startsWith("image/"))),multiple:!0,preventDefaultForUnhandled:!0});return(e,l)=>(o(),c("div",Ve,[t.value.length?(o(),c("p",Ce,[1===t.value.length?(o(),c(k,{key:0},[l[0]||(l[0]=b(" El archivo ")),a("strong",null,w(t.value[0]),1),l[1]||(l[1]=b(" es demasiado grande para subirlo (máx. 10MB). "))],64)):(o(),c(k,{key:1},[l[2]||(l[2]=b(" Los siguientes archivos son demasiado grandes para subirlos (máx. 10MB): ")),a("ul",null,[(o(!0),c(k,null,C(t.value,(e=>(o(),c("li",{key:e},w(e),1)))),128))])],64)),l[3]||(l[3]=b(" Comprime tu archivo aquí: ")),m(j,{link:"https://nmscd.com/Image-Compressor/",text:"Compresor de imágenes"})])):z("",!0),m(s(T),{maxFileSize:s(V),"show-cancel-button":!1,"show-upload-button":!1,accept:"image/*",auto:"","custom-upload":"",multiple:"",onSelect:r},{header:y((()=>[a("div",{class:"full-width",ref_key:"dropzone",ref:u},[m(s(T),{class:O({"p-button-outlined":!s(d)}),maxFileSize:s(V),accept:"image/*","choose-label":"Añadir archivos",auto:"","custom-upload":"",mode:"basic",multiple:"",onSelect:r},null,8,["class","maxFileSize"])],512)])),empty:y((()=>l[4]||(l[4]=[a("div",{class:"is-flex is-justify-content-center is-align-items-center my-5"},[a("p",null,"Suelte los archivos de la galería aquí")],-1)]))),_:1},8,["maxFileSize"]),m(De)]))}}),Ge=q(Ee,[["__scopeId","data-v-8c57c127"]]),Pe=D({__name:"FileUploadNotice",setup:e=>(e,l)=>(o(),c(k,null,[a("p",null,[l[0]||(l[0]=b(" Las imágenes que cargues aquí no se cargarán en la wiki. Esto es solo para completar automáticamente el nombre de la imagen. El tamaño máximo de archivo es de 10 MB. Puedes cargar tus imágenes en la wiki en ")),m(se,{link:"Special:Upload?multiple=true",text:"Especial:Subir"}),l[1]||(l[1]=b(". "))]),a("p",null,[l[2]||(l[2]=b(" Puedes comprimir tus imágenes con el ")),m(j,{link:"https://nmscd.com/Image-Compressor/",text:"Compresor de imágenes"}),l[3]||(l[3]=b(". "))])],64))});export{Ge as G,qe as S,je as _,Pe as a,Te as c};
