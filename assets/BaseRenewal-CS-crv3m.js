import{_ as q}from"./PageCreator.vue_vue_type_script_setup_true_lang-_i8Pjqs-.js";import{u as O,b as R,_ as U}from"./main-AFFqryE_.js";import{s as S}from"./pinia-DTMVEOtY.js";import{_,c as $,b,F as z,x as p,r as B,w as C,d as s,O as i,I as A,E as u,a8 as F,K as g,i as k,J as M}from"./@vue-AaAR792z.js";import{T as G}from"./TextareaInput-CaAqXjug.js";import{u as H,P as N}from"./vue-toastification-DhlY5ulG.js";import{s as J}from"./primevue-B5xHOMrV.js";/* empty css              */import"./@vueuse-CeyP63Rz.js";import"./parse-mediawiki-template--QNsUU1W.js";/* empty css                   */import"./@primeuix-B3koxSuN.js";import"./@primevue-CoWSFWgT.js";const K={class:"formatted-text"},L=_({__name:"baseOutput",setup(v){const o=O(),{censusrenewal:n}=S(o);return(x,c)=>(b(),$("pre",K,z(p(n)),1))}}),Q=R(L,[["__scopeId","data-v-41f504f8"]]),W={class:"code-container"},X={class:"checkbox-container"},Z=_({__name:"BaseInput",setup(v){const o=O(),{censusrenewal:n,release:x,name:c}=S(o),y=new Date().getUTCFullYear(),w=x.value,d=B(!1),T=B("");function h(a){const e=y,t=/censusrenewal\s*=\s*([^\n]*)/,l=a.match(t);if(l&&l[1]){let r=l[1].split(",").map(f=>f.trim());if(r.length===0)return a.replace(t,`censusrenewal = ${e}`);if(d.value){const f=parseInt(r[r.length-1],10);for(let m=f+1;m<=e;m++)r.includes(m.toString())||r.push(m.toString())}return r.includes(e.toString())||r.push(e.toString()),a.replace(t,`censusrenewal = ${r.join(", ")}`)}else return a.trimEnd()+`
censusrenewal = ${e}`}function E(a){const e=/{{Version\|([^\n]*)}}/,t=/\| release =\s*([^\n]*)/;let l=a.replace(e,`{{Version|${w}}}`);return l=l.replace(t,`| release = ${w}`),l}function P(a){let e=h(a);return e=E(e),e}function D(a){const e=/\| name =\s*([^\n]*)/,t=a.match(e);return t&&t[1]?t[1].trim():""}function I(){if(n.value){const a=P(n.value);o.censusrenewal=a,T.value=D(n.value),o.name=T.value}}C(d,()=>{I()}),C(n,()=>{I()});const V=H();function Y(a){V.error(a,{position:N.BOTTOM_RIGHT})}function j(){const a=[{field:o.name,message:"¡Pon el nombre de tu base!"}];for(const{field:e,message:t}of a)if(!e){Y(t);return}V.success("¡Creada!",{position:N.BOTTOM_RIGHT}),window.open(`https://nomanssky.fandom.com/wiki/${o.name}?action=edit#editform`,"_blank")}return(a,e)=>(b(),$("div",W,[e[6]||(e[6]=s("h2",{class:"title"},"Actualización del Censo RSS",-1)),e[7]||(e[7]=s("p",{class:"description"}," Pega aquí el código que deseas actualizar. Los valores se actualizarán automáticamente con el año actual y la versión más reciente. ",-1)),s("div",X,[s("label",null,[A(s("input",{type:"checkbox","onUpdate:modelValue":e[0]||(e[0]=t=>d.value=t)},null,512),[[F,d.value]]),e[3]||(e[3]=u(" Añadir todos los años desde el último registrado. "))]),e[4]||(e[4]=s("div",{class:"note"},[s("p",null,[s("strong",null,"Nota:"),u(" Selecciona esto antes de ingresar tu código o puede haber errores.")])],-1))]),i(U,{modelValue:p(c),"onUpdate:modelValue":e[1]||(e[1]=t=>k(c)?c.value=t:null),"help-img":"base/baseName","help-title":"Nombre de la Base:",label:"Nombre de la Base",tooltip:"Escribe exactamente como se ve en el juego. Cuidado con 0 (cero) y O (o)."},{default:g(()=>e[5]||(e[5]=[u(" Escribe exactamente como se ve en el juego. Cuidado con 0 (cero) y O (o). ")])),_:1,__:[5]},8,["modelValue"]),i(p(J),{as:"a",label:"Ir a la base",severity:"warn",onClick:j}),e[8]||(e[8]=s("br",null,null,-1)),e[9]||(e[9]=s("br",null,null,-1)),i(G,{modelValue:p(n),"onUpdate:modelValue":e[2]||(e[2]=t=>k(n)?n.value=t:null),label:"Pega tu código aquí",placeholder:"Ejemplo de código a pegar",class:"textarea-input"},null,8,["modelValue"]),e[10]||(e[10]=s("div",{class:"note"},[s("p",null,[s("strong",null,"Nota:"),u(" Si no tienes ningún año en el campo de "),s("code",null,"censusrenewal"),u(", el sistema fallará. ")])],-1))]))}}),ee=R(Z,[["__scopeId","data-v-0637f808"]]),fe=_({__name:"BaseRenewal",setup(v){return(o,n)=>(b(),M(q,null,{input:g(()=>[i(ee)]),output:g(()=>[i(Q)]),_:1}))}});export{fe as default};
