import{d as B,r as n,c as $,x as D,a3 as V,j as S,o as r,k as f,b as s,f as u,a as _,t as o,b0 as M,h as d,V as N,X as R,g as c,aV as T,B as A,F as j,J as F,p as H}from"./main-CUdmV-Wl.js";import{_ as I}from"./logo-white-CwkOOWqZ.js";import{s as E}from"./index-CfaTqabV.js";import{s as q}from"./index-BZeyvkUj.js";import{s as P}from"./index-j2ji1kaQ.js";import{s as J}from"./index-CuHFueRE.js";import"./index-BSGj8d_z.js";const O={class:"space-page-container"},X={class:"flex items-start justify-between mb-6 header-container"},G={class:"flex flex-col"},K={class:"header-container"},Q={class:"title-theme-container"},Y={class:"galactic-title"},Z={class:"title-text"},ss={class:"text-stellar-gray mt-2"},es={class:"text-stellar-gray mt-2"},ts={class:"filter-container mb-6 p-4 bg-space-dark rounded-lg"},as={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},ls={class:"flex"},os={class:"block mb-2"},is={class:"panel-content"},ns={class:"update-info mt-2"},rs={key:0,class:"loading-message"},ds={key:1,class:"error-message p-error"},cs={class:"p-4"},us={class:"flex flex-column gap-3"},ms={class:"flex align-items-center gap-2"},ps={class:"update-title"},vs={class:"update-details"},gs={class:"detail-item"},fs={class:"detail-value"},_s={class:"detail-item"},bs={class:"detail-value"},hs={class:"comment-box mt-3 p-3 bg-space-light rounded"},ks={class:"mt-1"},ws={class:"mt-3"},ys=["href"],xs=["href"],$s=B({__name:"WikiUpdates",setup(a){const e=n([]),l=n(!0),t=n(null),i=n(window.innerWidth),m=n(50),p=n(""),v=n(!1),g=$((()=>i.value<768?1:i.value<1200?2:3)),b=$((()=>v.value?"https://nomanssky.fandom.com/api.php":"https://nomanssky.fandom.com/es/api.php")),h=n([{value:25,label:"25 resultados"},{value:50,label:"50 resultados"},{value:100,label:"100 resultados"},{value:200,label:"200 resultados"},{value:300,label:"300 resultados"},{value:400,label:"400 resultados"},{value:500,label:"500 resultados"}]),k=async()=>{try{l.value=!0,t.value=null;const s=new URLSearchParams({action:"query",list:"recentchanges",rcprop:"title|timestamp|user|comment|ids|flags|loginfo|revid|old_revid",rclimit:m.value.toString(),rcshow:"!bot",rcdir:"older",format:"json",origin:"*",...p.value&&{rcuser:p.value}}),a=await fetch(`${b.value}?${s.toString()}`);if(!a.ok)throw new Error("Error en la API de la wiki");const i=await a.json();if(i.error)throw new Error(i.error.info);e.value=i.query.recentchanges.map((s=>({title:s.title,timestamp:s.timestamp,user:s.user,comment:s.comment||"(sin comentario)",pageid:s.pageid,revid:s.revid,old_revid:s.old_revid})))}catch(s){t.value="Error al cargar actualizaciones",console.error(s)}finally{l.value=!1}};D((async()=>{window.addEventListener("resize",(()=>i.value=window.innerWidth)),await k()})),V(v,(()=>{k()})),V(m,(()=>{k()}));const w=s=>s.trim().replace(/\s+/g,"_").replace(/\//g,"_"),y=s=>{const a=new Date,e=new Date(s),l=a.getTime()-e.getTime(),t=Math.floor(l/6e4);if(t<60)return`Hace ${t} min`;const i=Math.floor(t/60);return i<24?`Hace ${i} h`:`Hace ${Math.floor(i/24)} días`},x=s=>new Date(s).toLocaleString("es-ES",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"});return(a,i)=>(r(),S(d(E),{class:"p-0 galactic-card"},{content:f((()=>[s("div",O,[s("div",X,[s("div",G,[i[3]||(i[3]=s("a",{href:"https://nomanssky.fandom.com/es/wiki/Royal_Space_Society",target:"_blank"},[s("div",{class:"wiki-logo"},[s("img",{src:I,class:"logo-image",alt:"Wiki Logo"})])],-1)),s("div",K,[s("div",Q,[s("h1",Y,[s("span",Z,"Actualizaciones Recientes - Wiki "+o(v.value?"EN":"ES"),1)])])]),s("p",ss," Últimos cambios en la wiki "+o(v.value?"inglesa":"española")+" de No Man's Sky ",1)]),s("p",es,[u(M,{style:{"margin-right":"2rem"}})])]),s("div",ts,[s("div",as,[s("div",null,[i[4]||(i[4]=s("label",{class:"block mb-6 text-stellar-blue font-medium"},"Resultados:",-1)),u(d(J),{modelValue:m.value,"onUpdate:modelValue":i[0]||(i[0]=s=>m.value=s),options:h.value,optionLabel:"label",optionValue:"value",class:"w-full ml-2",pt:{root:{class:"bg-space-light border-space-blue"},input:{class:"text-stellar-light"},trigger:{class:"bg-space-blue"}}},null,8,["modelValue","options"])]),s("div",null,[i[5]||(i[5]=s("label",{class:"block mb-2"},"Filtrar por usuario:",-1)),s("div",ls,[u(d(N),{modelValue:p.value,"onUpdate:modelValue":i[1]||(i[1]=s=>p.value=s),placeholder:"Nombre de usuario",class:"w-full"},null,8,["modelValue"]),s("button",{onClick:k,class:"p-button p-component ml-2"}," Buscar ")])])]),s("div",null,[s("label",os,[R(s("input",{type:"checkbox","onUpdate:modelValue":i[2]||(i[2]=s=>v.value=s),class:"mr-2"},null,512),[[T,v.value]]),i[6]||(i[6]=c(" Consultar wiki en inglés "))])])]),u(d(P),{class:"galactic-panel"},{header:f((()=>i[7]||(i[7]=[s("h2",{class:"panel-title"},"Información de Actualizaciones",-1)]))),default:f((()=>[s("div",is,[s("p",null,[i[8]||(i[8]=c(" Total de cambios recientes: ")),s("strong",null,o(e.value.length),1)]),s("p",ns,"Actualizado: "+o((new Date).toLocaleString("es-ES")),1)])])),_:1}),i[17]||(i[17]=s("br",null,null,-1)),l.value?(r(),_("div",rs,i[9]||(i[9]=[s("i",{class:"pi pi-spinner pi-spin"},null,-1),c(" Cargando actualizaciones... ")]))):t.value?(r(),_("div",ds,[i[10]||(i[10]=s("i",{class:"pi pi-exclamation-triangle"},null,-1)),c(" "+o(t.value),1)])):(r(),_("div",{key:2,class:"grid gap-4",style:A(`grid-template-columns: repeat(${g.value}, 1fr)`)},[(r(!0),_(j,null,F(e.value,((a,e)=>(r(),S(d(E),{key:e,class:"update-card"},{content:f((()=>[s("div",cs,[s("div",us,[s("div",ms,[s("h3",ps,o(a.title),1),u(d(q),{value:y(a.timestamp),severity:"info",class:"time-tag"},null,8,["value"])]),s("div",vs,[s("div",gs,[i[11]||(i[11]=s("span",{class:"detail-label"},"Usuario:",-1)),s("span",fs,o(a.user),1)]),s("div",_s,[i[12]||(i[12]=s("span",{class:"detail-label"},"Fecha:",-1)),s("span",bs,o(x(a.timestamp)),1)]),s("div",hs,[i[13]||(i[13]=s("span",{class:"detail-label"},"Comentario:",-1)),s("p",ks,o(a.comment),1)])]),s("div",ws,[s("a",{href:`https://nomanssky.fandom.com/${v.value?"":"es/"}wiki/${w(a.title)}`,target:"_blank",class:"wiki-link"},i[14]||(i[14]=[s("i",{class:"pi pi-external-link"},null,-1),c(" Ver página en la wiki ")]),8,ys),i[16]||(i[16]=s("span",{class:"mx-2"},"|",-1)),s("a",{href:`https://nomanssky.fandom.com/${v.value?"":"es/"}wiki/${w(a.title)}?diff=${a.revid}&oldid=${a.old_revid}`,target:"_blank",class:"wiki-link"},i[15]||(i[15]=[s("i",{class:"pi pi-history"},null,-1),c(" Ver cambios ")]),8,xs)])])])])),_:2},1024)))),128))],4))])])),_:1}))}}),Ds=H($s,[["__scopeId","data-v-b749a47c"]]);export{Ds as default};