var e=new Set,t=new WeakMap,n=new WeakMap,r=new WeakMap,i=new WeakMap,a=new WeakMap,o=new WeakMap,s=new WeakMap,c=new WeakMap,l=new WeakSet,u,d=0,f=0,p=`__aa_tgt`,m=`__aa_del`,h=`__aa_new`,g=e=>{let t=E(e);t&&t.forEach(e=>O(e))},_=e=>{e.forEach(e=>{e.target===u&&x(),t.has(e.target)&&b(e.target)})};function v(e){let t=e.getBoundingClientRect(),n=u?.clientWidth||0,r=u?.clientHeight||0;return t.bottom<0||t.top>r||t.right<0||t.left>n}function y(e){i.get(e)?.disconnect();let n=t.get(e),r=0;n||(n=j(e),t.set(e,n));let{offsetWidth:a,offsetHeight:o}=u,s=[n.top-5,a-(n.left+5+n.width),o-(n.top+5+n.height),n.left-5].map(e=>`${-1*Math.floor(e)}px`).join(` `),c=new IntersectionObserver(()=>{++r>1&&b(e)},{root:u,threshold:1,rootMargin:s});c.observe(e),i.set(e,c)}function b(e,n=!0){clearTimeout(c.get(e));let i=N(e),a=n?R(i)?500:i.duration:0;c.set(e,setTimeout(async()=>{let n=r.get(e);try{await n?.finished,t.set(e,j(e)),y(e)}catch{}},a))}function x(){clearTimeout(c.get(u)),c.set(u,setTimeout(()=>{e.forEach(e=>I(e,e=>C(()=>b(e))))},100))}function S(e){setTimeout(()=>{o.set(e,setInterval(()=>C(b.bind(null,e)),2e3))},Math.round(2e3*Math.random()))}function C(e){typeof requestIdleCallback==`function`?requestIdleCallback(()=>e()):requestAnimationFrame(()=>e())}var w,T=typeof window<`u`&&`ResizeObserver`in window;T&&(u=document.documentElement,new MutationObserver(g),w=new ResizeObserver(_),window.addEventListener(`scroll`,()=>{f=window.scrollY,d=window.scrollX}),w.observe(u));function E(e){return e.reduce((e,t)=>[...e,...Array.from(t.addedNodes),...Array.from(t.removedNodes)],[]).every(e=>e.nodeName===`#comment`)?!1:e.reduce((e,t)=>{if(e===!1)return!1;if(t.target instanceof Element){if(D(t.target),!e.has(t.target)){e.add(t.target);for(let n=0;n<t.target.children.length;n++){let r=t.target.children.item(n);if(r){if(m in r)return!1;D(t.target,r),e.add(r)}}}if(t.removedNodes.length)for(let r=0;r<t.removedNodes.length;r++){let i=t.removedNodes[r];if(m in i)return!1;i instanceof Element&&(e.add(i),D(t.target,i),n.set(i,[t.previousSibling,t.nextSibling]))}}return e},new Set)}function D(e,t){!t&&!(p in e)?Object.defineProperty(e,p,{value:e}):t&&!(p in t)&&Object.defineProperty(t,p,{value:e})}function O(e){var i;let a=e.isConnected,o=t.has(e);a&&n.has(e)&&n.delete(e),r.get(e)?.playState!==`finished`&&((i=r.get(e))==null||i.cancel()),h in e?B(e):o&&a?z(e):o&&!a?H(e):B(e)}function k(e){return Number(e.replace(/[^0-9.\-]/g,``))}function A(e){let t=e.parentElement;for(;t;){if(t.scrollLeft||t.scrollTop)return{x:t.scrollLeft,y:t.scrollTop};t=t.parentElement}return{x:0,y:0}}function j(e){let t=e.getBoundingClientRect(),{x:n,y:r}=A(e);return{top:t.top+r,left:t.left+n,width:t.width,height:t.height}}function M(e,t,n){let r=t.width,i=t.height,a=n.width,o=n.height,s=getComputedStyle(e);if(s.getPropertyValue(`box-sizing`)===`content-box`){let e=k(s.paddingTop)+k(s.paddingBottom)+k(s.borderTopWidth)+k(s.borderBottomWidth),t=k(s.paddingLeft)+k(s.paddingRight)+k(s.borderRightWidth)+k(s.borderLeftWidth);r-=t,a-=t,i-=e,o-=e}return[r,a,i,o].map(Math.round)}function N(e){return p in e&&s.has(e[p])?s.get(e[p]):{duration:250,easing:`ease-in-out`}}function P(e){if(p in e)return e[p]}function F(e){let t=P(e);return t?l.has(t):!1}function I(e,...t){t.forEach(t=>t(e,s.has(e)));for(let n=0;n<e.children.length;n++){let r=e.children.item(n);r&&t.forEach(e=>e(r,s.has(r)))}}function L(e){return Array.isArray(e)?e:[e]}function R(e){return typeof e==`function`}function z(e){let n=t.get(e),i=j(e);if(!F(e))return t.set(e,i);if(v(e)){t.set(e,i),y(e);return}let a;if(!n)return;let o=N(e);if(typeof o!=`function`){let t=n.left-i.left,r=n.top-i.top,s=n.left+n.width-(i.left+i.width);n.top+n.height-(i.top+i.height)==0&&(r=0),s==0&&(t=0);let[c,l,u,d]=M(e,n,i),f={transform:`translate(${t}px, ${r}px)`},p={transform:`translate(0, 0)`};c!==l&&(f.width=`${c}px`,p.width=`${l}px`),u!==d&&(f.height=`${u}px`,p.height=`${d}px`),a=e.animate([f,p],{duration:o.duration,easing:o.easing})}else{let[t]=L(o(e,`remain`,n,i));a=new Animation(t),a.play()}r.set(e,a),t.set(e,i),a.addEventListener(`finish`,b.bind(null,e,!1),{once:!0})}function B(e){h in e&&delete e[h];let n=j(e);t.set(e,n);let i=N(e);if(!F(e))return;if(v(e)){y(e);return}let a;if(typeof i!=`function`)a=e.animate([{transform:`scale(.98)`,opacity:0},{transform:`scale(0.98)`,opacity:0,offset:.5},{transform:`scale(1)`,opacity:1}],{duration:i.duration*1.5,easing:`ease-in`});else{let[t]=L(i(e,`add`,n));a=new Animation(t),a.play()}r.set(e,a),a.addEventListener(`finish`,b.bind(null,e,!1),{once:!0})}function V(e,a){var o;e.remove(),t.delete(e),n.delete(e),r.delete(e),(o=i.get(e))==null||o.disconnect(),setTimeout(()=>{if(m in e&&delete e[m],Object.defineProperty(e,h,{value:!0,configurable:!0}),a&&e instanceof HTMLElement)for(let t in a)e.style[t]=``},0)}function H(e){var i;if(!n.has(e)||!t.has(e))return;let[a,o]=n.get(e);Object.defineProperty(e,m,{value:!0,configurable:!0});let s=window.scrollX,c=window.scrollY;if(o&&o.parentNode&&o.parentNode instanceof Element?o.parentNode.insertBefore(e,o):a&&a.parentNode?a.parentNode.appendChild(e):(i=P(e))==null||i.appendChild(e),!F(e))return V(e);let[l,u,p,h]=W(e),g=N(e),_=t.get(e);(s!==d||c!==f)&&U(e,s,c,g);let v,y={position:`absolute`,top:`${l}px`,left:`${u}px`,width:`${p}px`,height:`${h}px`,margin:`0`,pointerEvents:`none`,transformOrigin:`center`,zIndex:`100`};if(!R(g))Object.assign(e.style,y),v=e.animate([{transform:`scale(1)`,opacity:1},{transform:`scale(.98)`,opacity:0}],{duration:g.duration,easing:`ease-out`});else{let[t,n]=L(g(e,`remove`,_));n?.styleReset!==!1&&(y=n?.styleReset||y,Object.assign(e.style,y)),v=new Animation(t),v.play()}r.set(e,v),v.addEventListener(`finish`,()=>V(e,y),{once:!0})}function U(e,t,n,r){let i=d-t,a=f-n,o=document.documentElement.style.scrollBehavior;if(getComputedStyle(u).scrollBehavior===`smooth`&&(document.documentElement.style.scrollBehavior=`auto`),window.scrollTo(window.scrollX+i,window.scrollY+a),!e.parentElement)return;let s=e.parentElement,c=s.clientHeight,l=s.clientWidth,p=performance.now();function m(){requestAnimationFrame(()=>{if(!R(r)){let e=c-s.clientHeight,t=l-s.clientWidth;p+r.duration>performance.now()?(window.scrollTo({left:window.scrollX-t,top:window.scrollY-e}),c=s.clientHeight,l=s.clientWidth,m()):document.documentElement.style.scrollBehavior=o}})}m()}function W(e){let n=t.get(e),[i,,a]=M(e,n,j(e)),o=e.parentElement;for(;o&&(getComputedStyle(o).position===`static`||o instanceof HTMLBodyElement);)o=o.parentElement;o||=document.body;let s=getComputedStyle(o),c=!r.has(e)||r.get(e)?.playState===`finished`?j(o):t.get(o),l=Math.round(n.top-c.top)-k(s.borderTopWidth),u=Math.round(n.left-c.left)-k(s.borderLeftWidth);return[l,u,i,a]}function G(u,d={}){if(T&&w&&!(window.matchMedia(`(prefers-reduced-motion: reduce)`).matches&&!R(d)&&!d.disrespectUserMotionPreference)){l.add(u),getComputedStyle(u).position===`static`&&Object.assign(u.style,{position:`relative`}),I(u,b,S,e=>w?.observe(e)),R(d)?s.set(u,d):s.set(u,{duration:250,easing:`ease-in-out`,...d});let t=new MutationObserver(g);t.observe(u,{childList:!0}),a.set(u,t),e.add(u)}return Object.freeze({parent:u,enable:()=>{l.add(u)},disable:()=>{l.delete(u),I(u,e=>{let t=r.get(e);try{t?.cancel()}catch{}r.delete(e);let n=c.get(e);n&&clearTimeout(n),c.delete(e);let i=o.get(e);i&&clearInterval(i),o.delete(e)})},isEnabled:()=>l.has(u),destroy:()=>{l.delete(u),e.delete(u),s.delete(u),a.get(u)?.disconnect(),a.delete(u),I(u,e=>{w?.unobserve(e);let a=r.get(e);try{a?.cancel()}catch{}r.delete(e),i.get(e)?.disconnect(),i.delete(e);let s=o.get(e);s&&clearInterval(s),o.delete(e);let l=c.get(e);l&&clearTimeout(l),c.delete(e),t.delete(e),n.delete(e)})}})}export{G as t};