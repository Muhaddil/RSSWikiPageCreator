import{_ as Y}from"./PageCreator.vue_vue_type_script_setup_true_lang-DwzCrLWD.js";import{d as v,u as R,s as S,a as $,o as _,t as q,h as m,p as O,r as B,a2 as C,aT as z,b as s,f as i,W as A,g as u,aU as M,k as g,l as I,_ as F,Z as G,aV as N,j as H}from"./main-DHLb6U9I.js";import{T as L}from"./TextareaInput-DyaumuP0.js";import"./index-lBpTVinZ.js";import"./index-DF35eDPI.js";const W={class:"formatted-text"},Z=v({__name:"baseOutput",setup(b){const o=R(),{censusrenewal:n}=S(o);return(x,c)=>(_(),$("pre",W,q(m(n)),1))}}),J=O(Z,[["__scopeId","data-v-41f504f8"]]),K={class:"code-container"},Q={class:"checkbox-container"},X=v({__name:"BaseInput",setup(b){const o=R(),{censusrenewal:n,release:x,name:c}=S(o),h=new Date().getUTCFullYear(),w=x.value,d=B(!1),T=B("");function y(a){const e=h,t=/censusrenewal\s*=\s*([^\n]*)/,r=a.match(t);if(r&&r[1]){let l=r[1].split(",").map(f=>f.trim());if(l.length===0)return a.replace(t,`censusrenewal = ${e}`);if(d.value){const f=parseInt(l[l.length-1],10);for(let p=f+1;p<=e;p++)l.includes(p.toString())||l.push(p.toString())}return l.includes(e.toString())||l.push(e.toString()),a.replace(t,`censusrenewal = ${l.join(", ")}`)}else return a.trimEnd()+`
censusrenewal = ${e}`}function D(a){const e=/{{Version\|([^\n]*)}}/,t=/\| release =\s*([^\n]*)/;let r=a.replace(e,`{{Version|${w}}}`);return r=r.replace(t,`| release = ${w}`),r}function E(a){let e=y(a);return e=D(e),e}function P(a){const e=/\| name =\s*([^\n]*)/,t=a.match(e);return t&&t[1]?t[1].trim():""}function V(){if(n.value){const a=E(n.value);o.censusrenewal=a,T.value=P(n.value),o.name=T.value}}C(d,()=>{V()}),C(n,()=>{V()});const k=z();function j(a){k.error(a,{position:N.BOTTOM_RIGHT})}function U(){const a=[{field:o.name,message:"¡Pon el nombre de tu base!"}];for(const{field:e,message:t}of a)if(!e){j(t);return}k.success("¡Creada!",{position:N.BOTTOM_RIGHT}),window.open(`https://nomanssky.fandom.com/wiki/${o.name}?action=edit#editform`,"_blank")}return(a,e)=>(_(),$("div",K,[e[6]||(e[6]=s("h2",{class:"title"},"Actualización del Censo RSS",-1)),e[7]||(e[7]=s("p",{class:"description"}," Pega aquí el código que deseas actualizar. Los valores se actualizarán automáticamente con el año actual y la versión más reciente. ",-1)),s("div",Q,[s("label",null,[A(s("input",{type:"checkbox","onUpdate:modelValue":e[0]||(e[0]=t=>d.value=t)},null,512),[[M,d.value]]),e[3]||(e[3]=u(" Añadir todos los años desde el último registrado. ",-1))]),e[4]||(e[4]=s("div",{class:"note"},[s("p",null,[s("strong",null,"Nota:"),u(" Selecciona esto antes de ingresar tu código o puede haber errores.")])],-1))]),i(F,{modelValue:m(c),"onUpdate:modelValue":e[1]||(e[1]=t=>I(c)?c.value=t:null),"help-img":"base/baseName","help-title":"Nombre de la Base:",label:"Nombre de la Base",tooltip:"Escribe exactamente como se ve en el juego. Cuidado con 0 (cero) y O (o)."},{default:g(()=>[...e[5]||(e[5]=[u(" Escribe exactamente como se ve en el juego. Cuidado con 0 (cero) y O (o). ",-1)])]),_:1},8,["modelValue"]),i(m(G),{as:"a",label:"Ir a la base",severity:"warn",onClick:U}),e[8]||(e[8]=s("br",null,null,-1)),e[9]||(e[9]=s("br",null,null,-1)),i(L,{modelValue:m(n),"onUpdate:modelValue":e[2]||(e[2]=t=>I(n)?n.value=t:null),label:"Pega tu código aquí",placeholder:"Ejemplo de código a pegar",class:"textarea-input"},null,8,["modelValue"]),e[10]||(e[10]=s("div",{class:"note"},[s("p",null,[s("strong",null,"Nota:"),u(" Si no tienes ningún año en el campo de "),s("code",null,"censusrenewal"),u(", el sistema fallará. ")])],-1))]))}}),ee=O(X,[["__scopeId","data-v-0637f808"]]),le=v({__name:"BaseRenewal",setup(b){return(o,n)=>(_(),H(Y,null,{input:g(()=>[i(ee)]),output:g(()=>[i(J)]),_:1}))}});export{le as default};
