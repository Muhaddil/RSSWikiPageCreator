"use strict";import{d as H,r as i,c as S,x as V,a2 as L,y as M,a as d,o as r,f as c,k as p,b as a,t as o,b3 as R,h as u,U as F,W as I,g as m,aU as N,B as q,F as U,H as B,j as P,e as Y,a9 as G,p as J}from"./main-Cl-tM1iJ.js";import{_ as K}from"./logo-white-CwkOOWqZ.js";import{s as z}from"./index-BR9Rg848.js";import{s as O}from"./index-DtCiWGgX.js";import{s as Q}from"./index-Ca0eIYfG.js";import{s as X}from"./index-7a4H2-ve.js";import"./index-RaeJkH-i.js";const Z={class:"space-page-container"},aa={class:"flex items-start justify-between mb-6 header-container"},sa={class:"flex flex-col"},la={class:"header-container"},ea={class:"title-theme-container"},ta={class:"galactic-title"},ia={class:"title-text"},oa={class:"text-stellar-gray mt-2"},na={class:"text-stellar-gray mt-2"},ra={class:"filter-container mb-6 p-4 bg-space-dark rounded-lg"},ca={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},da={class:"flex"},ua={class:"block mb-2"},ma={class:"panel-content"},pa={class:"update-info mt-2"},va={key:0,class:"loading-message"},ga={key:1,class:"error-message p-error"},fa={class:"p-4"},ba={class:"flex flex-column gap-3"},ha={class:"flex align-items-center gap-2"},wa={class:"update-title"},ka={class:"update-details"},ya={class:"detail-item"},_a={class:"detail-value"},xa={class:"detail-item"},$a={class:"detail-value"},Ea={class:"comment-box mt-3 p-3 bg-space-light rounded"},Sa={class:"mt-1"},Va={class:"mt-3"},La=["href"],Ua=["href"],za=H({__name:"WikiUpdates",setup(Wa){const h=i([]),w=i(!0),v=i(null),k=i(window.innerWidth),g=i(500),f=i(""),n=i(!1),x=i(!1),C=S(()=>k.value<768?1:k.value<1200?2:3),W=S(()=>n.value?"https://nomanssky.fandom.com/api.php":"https://nomanssky.fandom.com/es/api.php"),j=i([{value:25,label:"25 resultados"},{value:50,label:"50 resultados"},{value:100,label:"100 resultados"},{value:200,label:"200 resultados"},{value:300,label:"300 resultados"},{value:400,label:"400 resultados"},{value:500,label:"500 resultados"}]),b=async()=>{try{w.value=!0,v.value=null;const t=new URLSearchParams({action:"query",list:"recentchanges",rcprop:"title|timestamp|user|comment|ids|flags|loginfo|revid|old_revid",rclimit:g.value.toString(),rcshow:"!bot",rcdir:"older",format:"json",origin:"*",...f.value&&{rcuser:f.value}}),s=await fetch(`${W.value}?${t.toString()}`);if(!s.ok)throw new Error("Error en la API de la wiki");const l=await s.json();if(l.error)throw new Error(l.error.info);h.value=l.query.recentchanges.map(e=>({title:e.title,timestamp:e.timestamp,user:e.user,comment:e.comment||"(sin comentario)",pageid:e.pageid,revid:e.revid,old_revid:e.old_revid}))}catch(t){v.value="Error al cargar actualizaciones",console.error(t)}finally{w.value=!1}};V(async()=>{window.addEventListener("resize",()=>k.value=window.innerWidth),await b()}),L(n,()=>{b()}),L(g,()=>{b()});const $=t=>t.trim().replace(/\s+/g,"_").replace(/\//g,"_"),T=t=>{const s=new Date,l=new Date(t),e=s.getTime()-l.getTime(),y=Math.floor(e/6e4);if(y<60)return`Hace ${y} min`;const _=Math.floor(y/60);return _<24?`Hace ${_} h`:`Hace ${Math.floor(_/24)} d\xEDas`},A=t=>new Date(t).toLocaleString("es-ES",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"}),E=()=>{x.value=window.scrollY>300},D=()=>{window.scrollTo({top:0,behavior:"smooth"})};return V(()=>{window.addEventListener("scroll",E)}),M(()=>{window.removeEventListener("scroll",E)}),(t,s)=>(r(),d(U,null,[c(u(z),{class:"p-0 galactic-card"},{content:p(()=>[a("div",Z,[a("div",aa,[a("div",sa,[s[3]||(s[3]=a("a",{href:"https://nomanssky.fandom.com/es/wiki/Royal_Space_Society",target:"_blank"},[a("div",{class:"wiki-logo"},[a("img",{src:K,class:"logo-image",alt:"Wiki Logo"})])],-1)),a("div",la,[a("div",ea,[a("h1",ta,[a("span",ia,"Actualizaciones Recientes - Wiki "+o(n.value?"EN":"ES"),1)])])]),a("p",oa," \xDAltimos cambios en la wiki "+o(n.value?"inglesa":"espa\xF1ola")+" de No Man's Sky ",1)]),a("p",na,[c(R,{style:{"margin-right":"2rem"}})])]),a("div",ra,[a("div",ca,[a("div",null,[s[4]||(s[4]=a("label",{class:"block mb-6 text-stellar-blue font-medium"},"Resultados:",-1)),c(u(X),{modelValue:g.value,"onUpdate:modelValue":s[0]||(s[0]=l=>g.value=l),options:j.value,optionLabel:"label",optionValue:"value",class:"w-full ml-2",pt:{root:{class:"bg-space-light border-space-blue"},input:{class:"text-stellar-light"},trigger:{class:"bg-space-blue"}}},null,8,["modelValue","options"])]),a("div",null,[s[5]||(s[5]=a("label",{class:"block mb-2"},"Filtrar por usuario:",-1)),a("div",da,[c(u(F),{modelValue:f.value,"onUpdate:modelValue":s[1]||(s[1]=l=>f.value=l),placeholder:"Nombre de usuario",class:"w-full"},null,8,["modelValue"]),a("button",{onClick:b,class:"p-button p-component ml-2"}," Buscar ")])])]),a("div",null,[a("label",ua,[I(a("input",{type:"checkbox","onUpdate:modelValue":s[2]||(s[2]=l=>n.value=l),class:"mr-2"},null,512),[[N,n.value]]),s[6]||(s[6]=m(" Consultar wiki en ingl\xE9s ",-1))])])]),c(u(Q),{class:"galactic-panel"},{header:p(()=>[...s[7]||(s[7]=[a("h2",{class:"panel-title"},"Informaci\xF3n de Actualizaciones",-1)])]),default:p(()=>[a("div",ma,[a("p",null,[s[8]||(s[8]=m(" Total de cambios recientes: ",-1)),a("strong",null,o(h.value.length),1)]),a("p",pa,"Actualizado: "+o(new Date().toLocaleString("es-ES")),1)])]),_:1}),s[17]||(s[17]=a("br",null,null,-1)),w.value?(r(),d("div",va,[...s[9]||(s[9]=[a("i",{class:"pi pi-spinner pi-spin"},null,-1),m(" Cargando actualizaciones... ",-1)])])):v.value?(r(),d("div",ga,[s[10]||(s[10]=a("i",{class:"pi pi-exclamation-triangle"},null,-1)),m(" "+o(v.value),1)])):(r(),d("div",{key:2,class:"grid gap-4",style:q(`grid-template-columns: repeat(${C.value}, 1fr)`)},[(r(!0),d(U,null,B(h.value,(l,e)=>(r(),P(u(z),{key:e,class:"update-card"},{content:p(()=>[a("div",fa,[a("div",ba,[a("div",ha,[a("h3",wa,o(l.title),1),c(u(O),{value:T(l.timestamp),severity:"info",class:"time-tag"},null,8,["value"])]),a("div",ka,[a("div",ya,[s[11]||(s[11]=a("span",{class:"detail-label"},"Usuario:",-1)),a("span",_a,o(l.user),1)]),a("div",xa,[s[12]||(s[12]=a("span",{class:"detail-label"},"Fecha:",-1)),a("span",$a,o(A(l.timestamp)),1)]),a("div",Ea,[s[13]||(s[13]=a("span",{class:"detail-label"},"Comentario:",-1)),a("p",Sa,o(l.comment),1)])]),a("div",Va,[a("a",{href:`https://nomanssky.fandom.com/${n.value?"":"es/"}wiki/${$(l.title)}`,target:"_blank",class:"wiki-link"},[...s[14]||(s[14]=[a("i",{class:"pi pi-external-link"},null,-1),m(" Ver p\xE1gina en la wiki ",-1)])],8,La),s[16]||(s[16]=a("span",{class:"mx-2"},"|",-1)),a("a",{href:`https://nomanssky.fandom.com/${n.value?"":"es/"}wiki/${$(l.title)}?diff=${l.revid}&oldid=${l.old_revid}`,target:"_blank",class:"wiki-link"},[...s[15]||(s[15]=[a("i",{class:"pi pi-history"},null,-1),m(" Ver cambios ",-1)])],8,Ua)])])])]),_:2},1024))),128))],4))])]),_:1}),c(G,{name:"fade"},{default:p(()=>[x.value?(r(),d("button",{key:0,onClick:D,class:"scroll-top-button"},[...s[18]||(s[18]=[a("i",{class:"pi pi-arrow-up"},null,-1)])])):Y("",!0)]),_:1})],64))}}),Ca=J(za,[["__scopeId","data-v-96583537"]]);export{Ca as default};
