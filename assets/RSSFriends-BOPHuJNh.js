import{l as I,p as G,s as L,b as T,n as N}from"./primevue-B5xHOMrV.js";import{_ as $}from"./FileUploadNotice.vue_vue_type_script_setup_true_lang-Bv8XtRoA.js";import{_ as y,g as B,G as M,b as K}from"./main-CmHG7xNP.js";import{h as q}from"./html2canvas-pro-DgAbkr8b.js";import{r as J}from"./inputValidation-BfiqxGfe.js";import{d as O}from"./debounce-B7UkYTDg.js";import{_ as Z,r as t,o as Q,a0 as H,v as X,c as p,b as n,J as g,L as i,K as f,d as a,O as r,x as c,M as b,F as v,E as Y,Q as ee,n as ae}from"./@vue-AaAR792z.js";import{w as le}from"./@vueuse-CeyP63Rz.js";import"./@primevue-CoWSFWgT.js";import"./@primeuix-B3koxSuN.js";/* empty css              */import"./pinia-DTMVEOtY.js";import"./parse-mediawiki-template--QNsUU1W.js";import"./vue-toastification-DhlY5ulG.js";/* empty css                   */const se="/RSSWikiPageCreator/assets/images/friends/marco.png",oe={class:"upload-section"},te={class:"columns is-mobile mb-0"},ne={class:"column is-flex"},ie={class:"columns is-mobile mb-0"},re={class:"column is-flex"},de={class:"columns is-mobile mb-0"},ue={class:"column is-flex"},ce={ref:"cardElement",class:"rss-card-wrapper"},me=["src"],ve={class:"card-image-container"},pe=["src"],ge={class:"card-race-icon-field"},fe=["src"],be={class:"download-section"},xe=Z({__name:"RSSFriends",setup(ke){const w=t(""),x=t(""),S=t(""),m=t(""),V=t(""),o=t(""),C=t(""),R=t(""),d=t(""),h=t(1),u=t(!1),E=t([{label:"Korvax",value:"Korvax",icon:"/RSSWikiPageCreator/assets/images/friends/holo-korvax.png"},{label:"Gek",value:"Gek",icon:"/RSSWikiPageCreator/assets/images/friends/holo-gek.png"},{label:"Vy'keen",value:"Vy'keen",icon:"/RSSWikiPageCreator/assets/images/friends/holo-vykeen.png"},{label:"Anomalía",value:"Anomalía",icon:"/RSSWikiPageCreator/assets/images/friends/holo-anomalia.png"},{label:"Autofago",value:"Autofago",icon:"/RSSWikiPageCreator/assets/images/friends/holo-autofago.png"},{label:"Viajero",value:"Viajero",icon:"/RSSWikiPageCreator/assets/images/friends/holo-viajero.png"}]),A=s=>{const e=s.files[0];if(e){const l=new FileReader;l.onload=W=>{var _;V.value=(_=W.target)==null?void 0:_.result},l.readAsDataURL(e)}},k=t(window.innerWidth);let U=null;const P=()=>{const s=window.innerWidth;Math.abs(s-k.value)>50&&(U&&clearTimeout(U),U=setTimeout(()=>{k.value=s},500))};Q(()=>{window.addEventListener("resize",P)}),H(()=>{window.removeEventListener("resize",P)});const F=()=>{const s=E.value.find(e=>e.value===x.value);S.value=s?s.icon:""},j=async()=>{const s=document.querySelector(".rss-card-wrapper");if(!s)return;await ae();const e=s.getBoundingClientRect();u.value=!0;try{requestAnimationFrame(async()=>{try{const W=(await q(s,{scale:h.value||1,backgroundColor:null,useCORS:!0,width:e.width,height:e.height,logging:!1})).toDataURL("image/png");D(W)}catch(l){console.error("Error al generar la imagen:",l)}finally{u.value=!1}})}catch(l){console.error("Error al descargar la imagen:",l),u.value=!1}},D=s=>{const e=document.createElement("a");e.href=s,e.download="tarjeta.png",document.body.appendChild(e),e.click(),document.body.removeChild(e)};X(()=>m.value=m.value.toUpperCase());const z=t(!0);return le(m,s=>{const e=new RegExp(/(?:[0-9A-Za-z]{4}-){2}[0-9A-Za-z]{5}/),l=J(s,e);z.value=!s||l},{debounce:O}),(s,e)=>(n(),p(ee,null,[k.value>768?(n(),g(c(N),{key:0,class:"rss-card-container"},{content:f(()=>[a("div",oe,[a("div",te,[e[8]||(e[8]=a("div",{class:"column is-flex is-align-items-center"},[a("label",null,"¿En blanco?")],-1)),a("div",ne,[r(c(I),{modelValue:o.value,"onUpdate:modelValue":e[0]||(e[0]=l=>o.value=l),"true-value":"true","false-value":"",class:"input-text",style:{width:"185px",left:"-12px"},binary:""},null,8,["modelValue"])])]),a("div",ie,[e[9]||(e[9]=a("div",{class:"column is-flex is-align-items-center"},[a("label",null,"¿Usar ubicación personalizada?")],-1)),a("div",re,[r(c(I),{modelValue:d.value,"onUpdate:modelValue":e[1]||(e[1]=l=>d.value=l),"true-value":"true","false-value":"",class:"input-text",style:{width:"185px",left:"-12px"},binary:""},null,8,["modelValue"])])]),r(y,{"model-value":h.value.toString(),"onUpdate:modelValue":e[2]||(e[2]=l=>h.value=Math.min(Number(l)||1,10)),placeholder:"Número",class:"input-text",label:"Escala de salida de la foto",tooltip:"La escala máxima es 10"},null,8,["model-value"]),r(y,{modelValue:w.value,"onUpdate:modelValue":e[3]||(e[3]=l=>w.value=l),placeholder:"Nombre",class:"input-text",label:"Nombre del jugador"},null,8,["modelValue"]),a("div",de,[e[10]||(e[10]=a("div",{class:"column is-flex is-align-items-center"},[a("label",null,"Raza del Jugador")],-1)),a("div",ue,[r(B,{modelValue:x.value,"onUpdate:modelValue":[e[4]||(e[4]=l=>x.value=l),F],options:E.value.map(l=>l.value),class:"input-text",style:{width:"185px",left:"-12px"}},null,8,["modelValue","options"])])]),d.value?(n(),g(M,{key:0,modelValue:C.value,"onUpdate:modelValue":e[5]||(e[5]=l=>C.value=l)},null,8,["modelValue"])):i("",!0),d.value?(n(),g(y,{key:1,modelValue:R.value,"onUpdate:modelValue":e[6]||(e[6]=l=>R.value=l),placeholder:"Ubicación",class:"input-text",label:"Ubicación"},null,8,["modelValue"])):i("",!0),r(y,{modelValue:m.value,"onUpdate:modelValue":e[7]||(e[7]=l=>m.value=l),placeholder:"Código de amigo",class:"input-text",label:"Código de amigo",invalid:!z.value,"error-message":"Formato de código de amigo incorrecto"},null,8,["modelValue","invalid"]),e[11]||(e[11]=a("br",null,null,-1)),r(c(G),{mode:"basic",name:"navImage",auto:!0,customUpload:!0,onUploader:A,accept:"image/*",chooseLabel:"Subir imagen"},{content:f(()=>[r($)]),_:1})]),e[15]||(e[15]=a("br",null,null,-1)),a("div",ce,[a("img",{class:"rss-card-background",src:d.value?o.value?"/RSSWikiPageCreator/assets/images/friends/friend-white-noglyphs.png":"/RSSWikiPageCreator/assets/images/friends/friend-noglyphs.png":o.value?"/RSSWikiPageCreator/assets/images/friends/friend-white.png":"/RSSWikiPageCreator/assets/images/friends/friend.png",alt:"Tarjeta RSS"},null,8,me),a("div",ve,[V.value?(n(),p("img",{key:0,src:V.value,alt:"Imagen subida",class:"uploaded-image"},null,8,pe)):i("",!0)]),e[12]||(e[12]=a("div",{class:"card-name-title"},"Nombre",-1)),e[13]||(e[13]=a("div",{class:"card-race-title"},"Raza",-1)),e[14]||(e[14]=a("img",{class:"card-image-marco",src:se,alt:"Tarjeta RSS"},null,-1)),a("div",{class:b(["card-name-field",{"text-black":o.value,"text-white":!o.value}])},v(w.value),3),a("div",{class:b(["card-race-field",{"text-black":o.value,"text-white":!o.value}])},v(x.value),3),d.value?(n(),p("div",{key:0,class:b(["card-glyphs-field",{"text-black":o.value,"text-white":!o.value}])},v(C.value),3)):i("",!0),d.value?(n(),p("div",{key:1,class:b(["card-location-field",{"text-black":o.value,"text-white":!o.value}])},v(R.value),3)):i("",!0),a("div",{class:b(["card-friend-code-field",{"text-black":o.value,"text-white":!o.value}])},v(m.value),3),a("div",ge,[S.value?(n(),p("img",{key:0,src:S.value,alt:"Icono de raza",class:"race-icon"},null,8,fe)):i("",!0)])],512),e[16]||(e[16]=a("br",null,null,-1)),a("div",be,[r(c(L),{onClick:j,class:"download-button",disabled:u.value,loading:u.value,style:{color:"white"}},{icon:f(()=>[u.value?(n(),g(c(T),{key:0,class:"pi pi-spin pi-spinner"})):i("",!0)]),default:f(()=>[Y(" "+v(u.value?"Generando imagen...":"Descargar Carta"),1)]),_:1},8,["disabled","loading"])]),e[17]||(e[17]=a("br",null,null,-1)),e[18]||(e[18]=a("br",null,null,-1)),e[19]||(e[19]=a("br",null,null,-1)),e[20]||(e[20]=a("h2",null,[a("i",null,"Imágenes creadas por paux1926.")],-1))]),_:1})):i("",!0),k.value<=768?(n(),g(c(N),{key:1,class:"rss-card-container"},{content:f(()=>e[21]||(e[21]=[a("h1",null,"Esta página solo está disponible en pantallas de escritorio.",-1)])),_:1})):i("",!0)],64))}}),Ae=K(xe,[["__scopeId","data-v-eb2bf46d"]]);export{Ae as default};
