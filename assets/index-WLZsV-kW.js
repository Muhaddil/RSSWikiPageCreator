"use strict";const B=new Set,l=new WeakMap,b=new WeakMap,f=new WeakMap,T=new WeakMap,j=new WeakMap,O=new WeakMap,E=new WeakMap,y=new WeakMap,W=new WeakSet;let p,A=0,_=0;const w="__aa_tgt",C="__aa_del",S="__aa_new",q=e=>{const t=ee(e);t&&t.forEach(n=>te(n))},K=e=>{e.forEach(t=>{t.target===p&&Q(),l.has(t.target)&&M(t.target)})};function X(e){const t=e.getBoundingClientRect(),n=p?.clientWidth||0,o=p?.clientHeight||0;return t.bottom<0||t.top>o||t.right<0||t.left>n}function R(e){T.get(e)?.disconnect();let n=l.get(e),o=0;const i=5;n||(n=x(e),l.set(e,n));const{offsetWidth:r,offsetHeight:s}=p,a=[n.top-i,r-(n.left+i+n.width),s-(n.top+i+n.height),n.left-i].map(d=>`${-1*Math.floor(d)}px`).join(" "),c=new IntersectionObserver(()=>{++o>1&&M(e)},{root:p,threshold:1,rootMargin:a});c.observe(e),T.set(e,c)}function M(e,t=!0){clearTimeout(y.get(e));const n=k(e),o=t?N(n)?500:n.duration:0;y.set(e,setTimeout(async()=>{const i=f.get(e);try{await i?.finished,l.set(e,x(e)),R(e)}catch{}},o))}function Q(){clearTimeout(y.get(p)),y.set(p,setTimeout(()=>{B.forEach(e=>$(e,t=>Y(()=>M(t))))},100))}function Z(e){setTimeout(()=>{O.set(e,setInterval(()=>Y(M.bind(null,e)),2e3))},Math.round(2e3*Math.random()))}function Y(e){typeof requestIdleCallback=="function"?requestIdleCallback(()=>e()):requestAnimationFrame(()=>e())}let L;const F=typeof window<"u"&&"ResizeObserver"in window;F&&(p=document.documentElement,new MutationObserver(q),L=new ResizeObserver(K),window.addEventListener("scroll",()=>{_=window.scrollY,A=window.scrollX}),L.observe(p));function ee(e){return e.reduce((t,n)=>[...t,...Array.from(n.addedNodes),...Array.from(n.removedNodes)],[]).every(t=>t.nodeName==="#comment")?!1:e.reduce((t,n)=>{if(t===!1)return!1;if(n.target instanceof Element){if(H(n.target),!t.has(n.target)){t.add(n.target);for(let o=0;o<n.target.children.length;o++){const i=n.target.children.item(o);if(i){if(C in i)return!1;H(n.target,i),t.add(i)}}}if(n.removedNodes.length)for(let o=0;o<n.removedNodes.length;o++){const i=n.removedNodes[o];if(C in i)return!1;i instanceof Element&&(t.add(i),H(n.target,i),b.set(i,[n.previousSibling,n.nextSibling]))}}return t},new Set)}function H(e,t){!t&&!(w in e)?Object.defineProperty(e,w,{value:e}):t&&!(w in t)&&Object.defineProperty(t,w,{value:e})}function te(e){var t,n;const o=e.isConnected,i=l.has(e);o&&b.has(e)&&b.delete(e),((t=f.get(e))===null||t===void 0?void 0:t.playState)!=="finished"&&((n=f.get(e))===null||n===void 0||n.cancel()),S in e?D(e):i&&o?oe(e):i&&!o?ie(e):D(e)}function g(e){return Number(e.replace(/[^0-9.\-]/g,""))}function ne(e){let t=e.parentElement;for(;t;){if(t.scrollLeft||t.scrollTop)return{x:t.scrollLeft,y:t.scrollTop};t=t.parentElement}return{x:0,y:0}}function x(e){const t=e.getBoundingClientRect(),{x:n,y:o}=ne(e);return{top:t.top+o,left:t.left+n,width:t.width,height:t.height}}function U(e,t,n){let o=t.width,i=t.height,r=n.width,s=n.height;const a=getComputedStyle(e);if(a.getPropertyValue("box-sizing")==="content-box"){const c=g(a.paddingTop)+g(a.paddingBottom)+g(a.borderTopWidth)+g(a.borderBottomWidth),d=g(a.paddingLeft)+g(a.paddingRight)+g(a.borderRightWidth)+g(a.borderLeftWidth);o-=d,r-=d,i-=c,s-=c}return[o,r,i,s].map(Math.round)}function k(e){return w in e&&E.has(e[w])?E.get(e[w]):{duration:250,easing:"ease-in-out"}}function V(e){if(w in e)return e[w]}function I(e){const t=V(e);return t?W.has(t):!1}function $(e,...t){t.forEach(n=>n(e,E.has(e)));for(let n=0;n<e.children.length;n++){const o=e.children.item(n);o&&t.forEach(i=>i(o,E.has(o)))}}function P(e){return Array.isArray(e)?e:[e]}function N(e){return typeof e=="function"}function oe(e){const t=l.get(e),n=x(e);if(!I(e))return l.set(e,n);if(X(e)){l.set(e,n),R(e);return}let o;if(!t)return;const i=k(e);if(typeof i!="function"){let r=t.left-n.left,s=t.top-n.top;const a=t.left+t.width-(n.left+n.width);t.top+t.height-(n.top+n.height)==0&&(s=0),a==0&&(r=0);const[c,d,m,v]=U(e,t,n),u={transform:`translate(${r}px, ${s}px)`},h={transform:"translate(0, 0)"};c!==d&&(u.width=`${c}px`,h.width=`${d}px`),m!==v&&(u.height=`${m}px`,h.height=`${v}px`),o=e.animate([u,h],{duration:i.duration,easing:i.easing})}else{const[r]=P(i(e,"remain",t,n));o=new Animation(r),o.play()}f.set(e,o),l.set(e,n),o.addEventListener("finish",M.bind(null,e,!1),{once:!0})}function D(e){S in e&&delete e[S];const t=x(e);l.set(e,t);const n=k(e);if(!I(e))return;if(X(e)){R(e);return}let o;if(typeof n!="function")o=e.animate([{transform:"scale(.98)",opacity:0},{transform:"scale(0.98)",opacity:0,offset:.5},{transform:"scale(1)",opacity:1}],{duration:n.duration*1.5,easing:"ease-in"});else{const[i]=P(n(e,"add",t));o=new Animation(i),o.play()}f.set(e,o),o.addEventListener("finish",M.bind(null,e,!1),{once:!0})}function G(e,t){var n;e.remove(),l.delete(e),b.delete(e),f.delete(e),(n=T.get(e))===null||n===void 0||n.disconnect(),setTimeout(()=>{if(C in e&&delete e[C],Object.defineProperty(e,S,{value:!0,configurable:!0}),t&&e instanceof HTMLElement)for(const o in t)e.style[o]=""},0)}function ie(e){var t;if(!b.has(e)||!l.has(e))return;const[n,o]=b.get(e);Object.defineProperty(e,C,{value:!0,configurable:!0});const i=window.scrollX,r=window.scrollY;if(o&&o.parentNode&&o.parentNode instanceof Element?o.parentNode.insertBefore(e,o):n&&n.parentNode?n.parentNode.appendChild(e):(t=V(e))===null||t===void 0||t.appendChild(e),!I(e))return G(e);const[s,a,c,d]=ae(e),m=k(e),v=l.get(e);(i!==A||r!==_)&&re(e,i,r,m);let u,h={position:"absolute",top:`${s}px`,left:`${a}px`,width:`${c}px`,height:`${d}px`,margin:"0",pointerEvents:"none",transformOrigin:"center",zIndex:"100"};if(!N(m))Object.assign(e.style,h),u=e.animate([{transform:"scale(1)",opacity:1},{transform:"scale(.98)",opacity:0}],{duration:m.duration,easing:"ease-out"});else{const[J,z]=P(m(e,"remove",v));z?.styleReset!==!1&&(h=z?.styleReset||h,Object.assign(e.style,h)),u=new Animation(J),u.play()}f.set(e,u),u.addEventListener("finish",()=>G(e,h),{once:!0})}function re(e,t,n,o){const i=A-t,r=_-n,s=document.documentElement.style.scrollBehavior;if(getComputedStyle(p).scrollBehavior==="smooth"&&(document.documentElement.style.scrollBehavior="auto"),window.scrollTo(window.scrollX+i,window.scrollY+r),!e.parentElement)return;const a=e.parentElement;let c=a.clientHeight,d=a.clientWidth;const m=performance.now();function v(){requestAnimationFrame(()=>{if(!N(o)){const u=c-a.clientHeight,h=d-a.clientWidth;m+o.duration>performance.now()?(window.scrollTo({left:window.scrollX-h,top:window.scrollY-u}),c=a.clientHeight,d=a.clientWidth,v()):document.documentElement.style.scrollBehavior=s}})}v()}function ae(e){var t;const n=l.get(e),[o,,i]=U(e,n,x(e));let r=e.parentElement;for(;r&&(getComputedStyle(r).position==="static"||r instanceof HTMLBodyElement);)r=r.parentElement;r||(r=document.body);const s=getComputedStyle(r),a=!f.has(e)||((t=f.get(e))===null||t===void 0?void 0:t.playState)==="finished"?x(r):l.get(r),c=Math.round(n.top-a.top)-g(s.borderTopWidth),d=Math.round(n.left-a.left)-g(s.borderLeftWidth);return[c,d,o,i]}function se(e,t={}){if(F&&L&&!(window.matchMedia("(prefers-reduced-motion: reduce)").matches&&!N(t)&&!t.disrespectUserMotionPreference)){W.add(e),getComputedStyle(e).position==="static"&&Object.assign(e.style,{position:"relative"}),$(e,M,Z,o=>L?.observe(o)),N(t)?E.set(e,t):E.set(e,{duration:250,easing:"ease-in-out",...t});const n=new MutationObserver(q);n.observe(e,{childList:!0}),j.set(e,n),B.add(e)}return Object.freeze({parent:e,enable:()=>{W.add(e)},disable:()=>{W.delete(e),$(e,n=>{const o=f.get(n);try{o?.cancel()}catch{}f.delete(n);const i=y.get(n);i&&clearTimeout(i),y.delete(n);const r=O.get(n);r&&clearInterval(r),O.delete(n)})},isEnabled:()=>W.has(e),destroy:()=>{W.delete(e),B.delete(e),E.delete(e),j.get(e)?.disconnect(),j.delete(e),$(e,o=>{L?.unobserve(o);const i=f.get(o);try{i?.cancel()}catch{}f.delete(o),T.get(o)?.disconnect(),T.delete(o);const s=O.get(o);s&&clearInterval(s),O.delete(o);const a=y.get(o);a&&clearTimeout(a),y.delete(o),l.delete(o),b.delete(o)})}})}export{se as a};
